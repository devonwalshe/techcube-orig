.bgblue
  .container
    .top-twenty-margin
      .row
        .span9
          .t1em
            Events
      

        .span3
          .row
            .span3
              - flash.each do |key, value|
                .bottom-ten-margin
                  %div{:class => "flash #{key}"}
                    = value
          .row
            .span3
              =render :partial => "layouts/sidebar"
.container
  .row
    .span9
      -# .border.bottom-twenty-margin.relative
      -#   .absolute{:style=>"bottom:30px; left:0px; opacity:0.8; background-color:#eee; padding:15px; width:445px"}
      -#     .t2-5em.pull-right{:style=>"opacity:1"}
      -#       Launch Date: 13th December 2012
      -#   =image_tag("/assets/office.jpg")  
      
      .row
        .span9
          - @date = @events.first["start"]["rfc2882local"]
          - @events.each do |otc_event|
            - if otc_event == @events.first
              .t2em.vdividerbottom
                = Date.parse(otc_event["start"]["rfc2882local"]).strftime("%A %B %d, %Y")
              .block.top-ten-margin
                = otc_event["summary"]
              .block
                = "Starts at: \t"+ DateTime.parse(otc_event["start"]["rfc2882local"]).strftime("%l:%M %p")
              .block
                = "Ends at: \t"+ DateTime.parse(otc_event["end"]["rfc2882local"]).strftime("%l:%M %p")

              .block.bottom-ten-margin.hdividerbottom
                -if otc_event["description"] != ""
                  = "\t" + otc_event["description"]
                -else
                  = "\tNo description was entered for this event"

            - elsif otc_event["start"]["rfc2882local"] == @date
              = "\t" + "event within the same date"
            - else
              .t2em.vdividerbottom
                = Date.parse(otc_event["start"]["rfc2882local"]).strftime("%A %B %d, %Y")
              .block.top-ten-margin
                = otc_event["summary"]
              .block
                = "Starts at: \t"+ DateTime.parse(otc_event["start"]["rfc2882local"]).strftime("%l:%M %p")
              .block
                = "Ends at: \t"+ DateTime.parse(otc_event["end"]["rfc2882local"]).strftime("%l:%M %p")

              .block.bottom-ten-margin.hdividerbottom
                -if otc_event["description"] != ""
                  = "\t" + otc_event["description"]
                -else
                  = "\tNo description was entered for this event"



            -@date = otc_event["start"]["rfc2882local"]
    .span3
      .top-twenty-margin
        .t2em.bottom-twenty-margin
          Where we are
        #map_canvas.bottom-twenty-margin{:style => "width:220px; height:220px; border:1px solid #aaa"}
      :javascript
        function initialize() {
          var mapOptions = {
            center: new google.maps.LatLng(55.939959, -3.182275,326247,672509),
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            disableDefaultUI: true
          };

          var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
          // var contentString = 'get with this';

          var infowindow = new google.maps.InfoWindow({
              content: 'get with this',
              maxwidth: 150
          });

          var cube_image = "http://gubbins.s3.amazonaws.com/tc_logo_box_colour_small.png"

          var marker = new google.maps.Marker({
             icon: cube_image,
             position:  new google.maps.LatLng(55.939959, -3.182),
             map: map,
             title: "whats up!"
          });

          var panoramaOptions = {

            position: new google.maps.LatLng(55.9406, -3.1831),
            pov:{
              heading:34,
              pitch:10,
              zoom:1
            }
          };

         // var panorama = new google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);

          //google.maps.event.addListener(marker, 'click', function() {
          //  infowindow.open(map,marker);
          //});

        }

        function loadScript() {
          var script = document.createElement("script");
          script.type = "text/javascript";
          script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyDSxwX0QVXxSm2-rHIisLXOSrj5Lw2ZINs&sensor=false&callback=initialize";
          document.body.appendChild(script);
        }

        window.onload = loadScript;

      %a{:href => "http://bit.ly/SkKZTh", :target => "blank"}


        -# %img{:src => "http://maps.googleapis.com/maps/api/staticmap?center=Edinburgh&zoom=13&size=450x90&markers=color:red|55.95,-3.22&sensor=false&scale=2"}/

  
  


