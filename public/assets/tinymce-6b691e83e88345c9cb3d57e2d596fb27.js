window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;e.length>o;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;r.length>i;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;n.length>r;r++){for(var i=e,o=n[r],s=o.split(/[.\/]/),l=0;s.length-1>l;++l)i[s[l]]===t&&(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=a[o]}}var a={},s="tinymce/dom/EventUtils",l="tinymce/dom/Sizzle",c="tinymce/dom/DomQuery",u="tinymce/html/Styles",d="tinymce/dom/TreeWalker",f="tinymce/util/Tools",p="tinymce/dom/Range",h="tinymce/html/Entities",m="tinymce/Env",g="tinymce/dom/DOMUtils",v="tinymce/dom/ScriptLoader",y="tinymce/AddOnManager",b="tinymce/html/Node",C="tinymce/html/Schema",x="tinymce/html/SaxParser",w="tinymce/html/DomParser",_="tinymce/html/Writer",N="tinymce/html/Serializer",E="tinymce/dom/Serializer",k="tinymce/dom/TridentSelection",S="tinymce/util/VK",T="tinymce/dom/ControlSelection",R="tinymce/dom/Selection",A="tinymce/dom/RangeUtils",B="tinymce/Formatter",L="tinymce/UndoManager",H="tinymce/EnterKey",M="tinymce/ForceBlocks",D="tinymce/EditorCommands",P="tinymce/util/URI",O="tinymce/util/Class",I="tinymce/ui/Selector",F="tinymce/ui/Collection",W="tinymce/ui/DomUtils",z="tinymce/ui/Control",V="tinymce/ui/Factory",U="tinymce/ui/Container",q="tinymce/ui/DragHelper",$="tinymce/ui/Scrollable",j="tinymce/ui/Panel",K="tinymce/ui/Movable",G="tinymce/ui/Resizable",Y="tinymce/ui/FloatPanel",X="tinymce/ui/KeyboardNavigation",J="tinymce/ui/Window",Q="tinymce/ui/MessageBox",Z="tinymce/WindowManager",et="tinymce/util/Quirks",tt="tinymce/util/Observable",nt="tinymce/Shortcuts",rt="tinymce/Editor",it="tinymce/util/I18n",ot="tinymce/FocusManager",at="tinymce/EditorManager",st="tinymce/LegacyInput",lt="tinymce/util/XHR",ct="tinymce/util/JSON",ut="tinymce/util/JSONRequest",dt="tinymce/util/JSONP",ft="tinymce/util/LocalStorage",pt="tinymce/Compat",ht="tinymce/ui/Layout",mt="tinymce/ui/AbsoluteLayout",gt="tinymce/ui/Tooltip",vt="tinymce/ui/Widget",yt="tinymce/ui/Button",bt="tinymce/ui/ButtonGroup",Ct="tinymce/ui/Checkbox",xt="tinymce/ui/CheckboxGroup",wt="tinymce/ui/PanelButton",_t="tinymce/ui/ColorButton",Nt="tinymce/ui/ComboBox",Et="tinymce/ui/Path",kt="tinymce/ui/ElementPath",St="tinymce/ui/FormItem",Tt="tinymce/ui/Form",Rt="tinymce/ui/FieldSet",At="tinymce/ui/FilePicker",Bt="tinymce/ui/FitLayout",Lt="tinymce/ui/FlexLayout",Ht="tinymce/ui/FlowLayout",Mt="tinymce/ui/FormatControls",Dt="tinymce/ui/GridLayout",Pt="tinymce/ui/Iframe",Ot="tinymce/ui/Label",It="tinymce/ui/Toolbar",Ft="tinymce/ui/MenuBar",Wt="tinymce/ui/MenuButton",zt="tinymce/ui/ListBox",Vt="tinymce/ui/MenuItem",Ut="tinymce/ui/Menu",qt="tinymce/ui/Radio",$t="tinymce/ui/RadioGroup",jt="tinymce/ui/ResizeHandle",Kt="tinymce/ui/Spacer",Gt="tinymce/ui/SplitButton",Yt="tinymce/ui/StackLayout",Xt="tinymce/ui/TabPanel",Jt="tinymce/ui/TextBox",Qt="tinymce/ui/Throbber";r(s,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function n(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){function n(){return!1}function r(){return!0}var i,o=t||{};for(i in e)"layerX"!==i&&"layerY"!==i&&(o[i]=e[i]);return o.target||(o.target=o.srcElement||document),o.preventDefault=function(){o.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=r,o.stopPropagation()},o.isDefaultPrevented||(o.isDefaultPrevented=n,o.isPropagationStopped=n,o.isImmediatePropagationStopped=n),o}function i(r,i,o){function a(){o.domLoaded||(o.domLoaded=!0,i(u))}function s(){"complete"===c.readyState&&(n(c,"readystatechange",s),a())}function l(){try{c.documentElement.doScroll("left")}catch(e){return setTimeout(l,0),t}a()}var c=r.document,u={type:"ready"};return o.domLoaded?(i(u),t):(c.addEventListener?e(r,"DOMContentLoaded",a):(e(c,"readystatechange",s),c.documentElement.doScroll&&r===r.top&&l()),e(r,"load",a),t)}function o(){function t(e,t){var n,r,i,o;if(n=f[t][e.type])for(r=0,i=n.length;i>r;r++)if(o=n[r],o&&o.func.call(o.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var o,s,l,c,u,d=this,f={};s=a+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},o=1,d.domLoaded=!1,d.events=f,d.bind=function(n,a,p,h){function m(e){t(r(e||_.event),g)}var g,v,y,b,C,x,w,_=window;if(n&&3!==n.nodeType&&8!==n.nodeType){for(n[s]?g=n[s]:(g=o++,n[s]=g,f[g]={}),h=h||n,a=a.split(" "),y=a.length;y--;)b=a[y],x=m,C=w=!1,"DOMContentLoaded"===b&&(b="ready"),d.domLoaded&&"ready"===b&&"complete"==n.readyState?p.call(h,r({type:b})):(c||(C=u[b],C&&(x=function(e){var n,i;if(n=e.currentTarget,i=e.relatedTarget,i&&n.contains)i=n.contains(i);else for(;i&&i!==n;)i=i.parentNode;i||(e=r(e||_.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=n,t(e,g))})),l||"focusin"!==b&&"focusout"!==b||(w=!0,C="focusin"===b?"focus":"blur",x=function(e){e=r(e||_.event),e.type="focus"===e.type?"focusin":"focusout",t(e,g)}),v=f[g][b],v?"ready"===b&&d.domLoaded?p({type:b}):v.push({func:p,scope:h}):(f[g][b]=v=[{func:p,scope:h}],v.fakeName=C,v.capture=w,v.nativeHandler=x,"ready"===b?i(n,x,d):e(n,C||b,x,w)));return n=v=0,p}},d.unbind=function(e,t,r){var i,o,a,l,c,u;if(!e||3===e.nodeType||8===e.nodeType)return d;if(i=e[s]){if(u=f[i],t){for(t=t.split(" "),a=t.length;a--;)if(c=t[a],o=u[c]){if(r)for(l=o.length;l--;)o[l].func===r&&o.splice(l,1);r&&0!==o.length||(delete u[c],n(e,o.fakeName||c,o.nativeHandler,o.capture))}}else{for(c in u)o=u[c],n(e,o.fakeName||c,o.nativeHandler,o.capture);u={}}for(c in u)return d;delete f[i];try{delete e[s]}catch(p){e[s]=null}}return d},d.fire=function(e,n,i){var o;if(!e||3===e.nodeType||8===e.nodeType)return d;i=r(null,i),i.type=n,i.target=e;do o=e[s],o&&t(i,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!i.isPropagationStopped());return d},d.clean=function(e){var t,n,r=d.unbind;if(!e||3===e.nodeType||8===e.nodeType)return d;if(e[s]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[s]&&r(e);return d},d.destory=function(){f={}},d.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var a="mce-data-";return o.Event=new o,o.Event.bind(window,"ready",function(){}),o}),r(l,[],function(){function e(e){return gt.test(e+"")}function n(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>N.cacheLength&&delete e[t.shift()],e[n]=r,r}}function i(e){return e[F]=!0,e}function o(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function a(e,t,n,r){var i,o,a,s,l,c,u,p,h,m;if((t?t.ownerDocument||t:W)!==L&&B(t),t=t||L,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(M&&!r){if(i=vt.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&I(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&z.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n}if(z.qsa&&!D.test(e)){if(u=!0,p=F,h=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(u=t.getAttribute("id"))?p=u.replace(Ct,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+f(c[l]);h=mt.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return et.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return C(e.replace(ct,"$1"),t,n,r)}function s(e,t){var n=t&&e,r=n&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function d(e,t){var n,r,i,o,s,l,c,u=$[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=N.preFilter;s;){(!n||(r=ut.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=dt.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ct," ")}),s=s.slice(n.length));for(o in N.filter)!(r=ht[o].exec(s))||c[o]&&!(r=c[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?a.error(e):$(e,l).slice(0)}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=U++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,c,u=V+" "+o;if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=t[F]||(t[F]={}),(l=c[r])&&l[0]===u){if((s=l[1])===!0||s===_)return s===!0}else if(l=c[r]=[u],l[1]=e(t,n,a)||_,l[1]===!0)return!0}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function g(e,t,n,r,o,a){return r&&!r[F]&&(r=g(r)),o&&!o[F]&&(o=g(o,a)),i(function(i,a,s,l){var c,u,d,f=[],p=[],h=a.length,g=i||b(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?g:m(g,f,e,s,l),y=n?o||(i?e:h||r)?[]:a:v;if(n&&n(v,y,s,l),r)for(c=m(y,p),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(v[p[u]]=d));if(i){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(v[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?nt.call(i,d):f[u])>-1&&(i[c]=!(a[c]=d))}}else y=m(y===a?y.splice(h,y.length):y),o?o(null,a,y,l):et.apply(a,y)})}function v(e){for(var t,n,r,i=e.length,o=N.relative[e[0].type],a=o||N.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return nt.call(t,e)>-1},a,!0),u=[function(e,n,r){return!o&&(r||n!==T)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];i>s;s++)if(n=N.relative[e[s].type])u=[p(h(u),n)];else{if(n=N.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;i>r&&!N.relative[e[r].type];r++);return g(s>1&&h(u),s>1&&f(e.slice(0,s-1)).replace(ct,"$1"),n,r>s&&v(e.slice(s,r)),i>r&&v(e=e.slice(r)),i>r&&f(e))}u.push(n)}return h(u)}function y(e,t){var n=0,r=t.length>0,o=e.length>0,s=function(i,s,l,c,u){var d,f,p,h=[],g=0,v="0",y=i&&[],b=null!=u,C=T,x=i||o&&N.find.TAG("*",u&&s.parentNode||s),w=V+=null==C?1:Math.random()||.1;for(b&&(T=s!==L&&s,_=n);null!=(d=x[v]);v++){if(o&&d){for(f=0;p=e[f++];)if(p(d,s,l)){c.push(d);break}b&&(V=w,_=++n)}r&&((d=!p&&d)&&g--,i&&y.push(d))}if(g+=v,r&&v!==g){for(f=0;p=t[f++];)p(y,h,s,l);if(i){if(g>0)for(;v--;)y[v]||h[v]||(h[v]=Q.call(c));h=m(h)}et.apply(c,h),b&&!i&&h.length>0&&g+t.length>1&&a.uniqueSort(c)}return b&&(V=w,T=C),y};return r?i(s):s}function b(e,t,n){for(var r=0,i=t.length;i>r;r++)a(e,t[r],n);return n}function C(e,t,n,r){var i,o,a,s,l,c=d(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&M&&N.relative[o[1].type]){if(t=(N.find.ID(a.matches[0].replace(wt,_t),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=ht.needsContext.test(e)?0:o.length;i--&&(a=o[i],!N.relative[s=a.type]);)if((l=N.find[s])&&(r=l(a.matches[0].replace(wt,_t),mt.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return et.apply(n,r),n;break}}return S(e,c)(r,t,!M,n,mt.test(e)),n}function x(){}var w,_,N,E,k,S,T,R,A,B,L,H,M,D,P,O,I,F="sizzle"+-new Date,W=window.document,z={},V=0,U=0,q=n(),$=n(),j=n(),K=!1,G=function(){return 0},Y=typeof t,X=1<<31,J=[],Q=J.pop,Z=J.push,et=J.push,tt=J.slice,nt=J.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=it.replace("w","w#"),at="([*^$|!~]?=)",st="\\["+rt+"*("+it+")"+rt+"*(?:"+at+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ot+")|)|)"+rt+"*\\]",lt=":("+it+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",ct=RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ut=RegExp("^"+rt+"*,"+rt+"*"),dt=RegExp("^"+rt+"*([\\x20\\t\\r\\n\\f>+~])"+rt+"*"),ft=RegExp(lt),pt=RegExp("^"+ot+"$"),ht={ID:RegExp("^#("+it+")"),CLASS:RegExp("^\\.("+it+")"),NAME:RegExp("^\\[name=['\"]?("+it+")['\"]?\\]"),TAG:RegExp("^("+it.replace("w","w*")+")"),ATTR:RegExp("^"+st),PSEUDO:RegExp("^"+lt),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),needsContext:RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},mt=/[\x20\t\r\n\f]*[+~]/,gt=/^[^{]+\{\s*\[native code/,vt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,yt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,Ct=/'|\\/g,xt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,wt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,_t=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{et.apply(J=tt.call(W.childNodes),W.childNodes),J[W.childNodes.length].nodeType}catch(Nt){et={apply:J.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}k=a.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},B=a.setDocument=function(n){var r=n?n.ownerDocument||n:W;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,H=r.documentElement,M=!k(r),z.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),z.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),z.getElementsByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),z.getByName=o(function(e){e.id=F+0,e.appendChild(L.createElement("a")).setAttribute("name",F),e.appendChild(L.createElement("i")).setAttribute("name",F),H.appendChild(e);var t=r.getElementsByName&&r.getElementsByName(F).length===2+r.getElementsByName(F+0).length;return H.removeChild(e),t}),z.sortDetached=o(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(L.createElement("div"))}),N.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==Y&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},z.getByName?(N.find.ID=function(e,t){if(typeof t.getElementById!==Y&&M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},N.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){return e.getAttribute("id")===t}}):(N.find.ID=function(e,n){if(typeof n.getElementById!==Y&&M){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==Y&&r.getAttributeNode("id").value===e?[r]:t:[]}},N.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),N.find.TAG=z.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==Y?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},N.find.NAME=z.getByName&&function(e,n){return typeof n.getElementsByName!==Y?n.getElementsByName(name):t},N.find.CLASS=z.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==Y&&M?n.getElementsByClassName(e):t},P=[],D=[":focus"],(z.qsa=e(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||D.push("\\["+rt+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||D.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&D.push("[*^$]="+rt+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(z.matchesSelector=e(O=H.matchesSelector||H.mozMatchesSelector||H.webkitMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&o(function(e){z.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),P.push("!=",lt)}),D=RegExp(D.join("|")),P=P.length&&RegExp(P.join("|")),I=e(H.contains)||H.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=H.compareDocumentPosition?function(e,t){if(e===t)return K=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||R&&t.compareDocumentPosition(e)===n?e===r||I(W,e)?-1:t===r||I(W,t)?1:A?nt.call(A,e)-nt.call(A,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,a=t.parentNode,l=[e],c=[t];if(e===t)return K=!0,0;if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[i]===c[i];)i++;return i?s(l[i],c[i]):l[i]===W?-1:c[i]===W?1:0},L):L},a.matches=function(e,t){return a(e,null,null,t)},a.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&B(e),t=t.replace(xt,"='$1']"),z.matchesSelector&&M&&(!P||!P.test(t))&&!D.test(t))try{var n=O.call(e,t);if(n||z.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return a(t,L,null,[e]).length>0},a.contains=function(e,t){return(e.ownerDocument||e)!==L&&B(e),I(e,t)},a.attr=function(e,t){var n;return(e.ownerDocument||e)!==L&&B(e),M&&(t=t.toLowerCase()),(n=N.attrHandle[t])?n(e):!M||z.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},a.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},a.uniqueSort=function(e){var t,n=[],r=0,i=0;if(K=!z.detectDuplicates,R=!z.sortDetached,A=!z.sortStable&&e.slice(0),e.sort(G),K){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},E=a.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=E(t);return n},N=a.selectors={cacheLength:50,createPseudo:i,match:ht,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,_t),e[3]=(e[4]||e[5]||"").replace(wt,_t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||a.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&a.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ht.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ft.test(n)&&(t=d(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(wt,_t).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=q[e+" "];return t||(t=RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&q(e,function(e){return t.test(e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=a.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(u=g[F]||(g[F]={}),c=u[e]||[],p=c[0]===V&&c[1],f=c[0]===V&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[V,p,f];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===V)f=c[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[F]||(d[F]={}))[e]=[V,f]),d!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=N.pseudos[e]||N.setFilters[e.toLowerCase()]||a.error("unsupported pseudo: "+e);return r[F]?r(t):r.length>1?(n=[e,e,"",t],N.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=nt.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(ct,"$1"));return r[F]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return a(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||a.error("unsupported lang: "+e),e=e.replace(wt,_t).toLowerCase(),function(t){var n;do if(n=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===H},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!N.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return yt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})N.pseudos[w]=l(w);for(w in{submit:!0,reset:!0})N.pseudos[w]=c(w);return S=a.compile=function(e,t){var n,r=[],i=[],o=j[e+" "];if(!o){for(t||(t=d(e)),n=t.length;n--;)o=v(t[n]),o[F]?r.push(o):i.push(o);o=j(e,y(i,r))}return o},N.pseudos.nth=N.pseudos.eq,x.prototype=N.filters=N.pseudos,N.setFilters=new x,z.sortStable=F.split("").sort(G).join("")===F,B(),[0,0].sort(G),z.detectDuplicates=K,"function"==typeof r&&r.amd?r(function(){return a}):window.Sizzle=a,a}),r(c,[s,l],function(e,n){function r(e){return e!==t}function i(e){return"string"==typeof e}function o(e){var t,n,r;for(r=g.createElement("div"),t=g.createDocumentFragment(),r.innerHTML=e;n=r.firstChild;)t.appendChild(n);return t}function a(e,t,n){var r;if("string"==typeof t)t=o(t);else if(t.length){for(r=0;t.length>r;r++)a(e,t[r],n);return e}for(r=e.length;r--;)n.call(e[r],t.parentNode?t:t);return e}function s(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function l(e,t){var n;for(e=e||[],"string"==typeof e&&(e=e.split(" ")),t=t||{},n=e.length;n--;)t[e[n]]={};return t}function c(e,t){return new c.fn.init(e,t)}function u(e){var t,n,r,i=arguments;for(n=1;i.length>n;n++){t=i[n];for(r in t)e[r]=t[r]}return e}function d(e){var t,n,r=[];for(t=0,n=e.length;n>t;t++)r[t]=e[t];return r}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e,t){var n,r,i,o,a;if(e)if(n=e.length,n===o){for(r in e)if(e.hasOwnProperty(r)&&(a=e[r],t.call(a,a,r)===!1))break}else for(i=0;n>i&&(a=e[i],t.call(a,a,r)!==!1);i++);return e}function h(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!c(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i}function m(e,t,n,r){for(var i=[];e;e=e[n])r&&e.nodeType!==r||e===t||i.push(e);return i}var g=document,v=Array.prototype.push,y=Array.prototype.slice,b=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,C=e.Event,x=l("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"),w=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},_=/^\s*|\s*$/g,N=function(e){return null===e||e===t?"":(""+e).replace(_,"")};return c.fn=c.prototype={constructor:c,selector:"",length:0,init:function(e,t){var n,r,a=this;if(!e)return a;if(e.nodeType)return a.context=a[0]=e,a.length=1,a;if(i(e)){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:b.exec(e),!n)return c(t||document).find(e);if(n[1])for(r=o(e).firstChild;r;)this.add(r),r=r.nextSibling;else{if(r=g.getElementById(n[2]),r.id!==n[2])return a.find(e);a.length=1,a[0]=r}}else this.add(e);return a},toArray:function(){return d(this)},add:function(e){var t=this;return w(e)?v.apply(t,e):e instanceof c?t.add(e.toArray()):v.call(t,e),t},attr:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.attr(t,e)});else{if(!r(n))return i[0]&&1===i[0].nodeType?i[0].getAttribute(e):t;this.each(function(){1===this.nodeType&&this.setAttribute(e,n)})}return i},css:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.css(t,e)});else{if(e=e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),!r(n))return i[0]?i[0].style[e]:t;"number"!=typeof n||x[e]||(n+="px"),i.each(function(){var r=this.style;"opacity"===e&&this.runtimeStyle&&this.runtimeStyle.opacity===t&&(r.filter=""===n?"":"alpha(opacity="+100*n+")");try{r[e]=n}catch(i){}})}return i},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],C.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(r(e)){for(t=n.length;t--;)n[t].innerHTML=e;return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(r(e)){for(t=n.length;t--;)n[t].innerText=n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return a(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return a(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){var e=this;return e[0]&&e[0].parentNode?a(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?a(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},appendTo:function(e){return c(e).append(this),this},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(){var n,r=this;s(r,e)!==t&&(n=r.className,t?r.className+=n?" "+e:e:r.className=N((" "+n+" ").replace(" "+e+" "," ")))}),n},hasClass:function(e){return s(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){C.bind(this,e,t)})},off:function(e,t){return this.each(function(){C.unbind(this,e,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new c(y.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},replaceWith:function(e){var t=this;return t[0]&&t[0].parentNode.replaceChild(c(e)[0],t[0]),t},wrap:function(e){return e=c(e)[0],this.each(function(){var t=this,n=e.cloneNode(!1);t.parentNode.insertBefore(n,t),n.appendChild(t)})},unwrap:function(){return this.each(function(){for(var e,t=this,n=t.firstChild;n;)e=n,n=n.nextSibling,t.parentNode.insertBefore(e,t)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),c(e)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)c.find(e,this[t],r);return c(r)},push:v,sort:[].sort,splice:[].splice},u(c,{extend:u,toArray:d,inArray:f,isArray:w,each:p,trim:N,makeMap:l,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,isXMLDoc:n.isXML,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?c.find.matchesSelector(t[0],e)?[t[0]]:[]:c.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t){return h(e,"parentNode",t)},next:function(e){return m(e,"nextSibling",1)},prev:function(e){return m(e,"previousSibling",1)},nextNodes:function(e){return m(e,"nextSibling")},prevNodes:function(e){return m(e,"previousSibling")},children:function(e){return m(e.firstChild,"nextSibling",1)},contents:function(e){return d(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){c.fn[e]=function(n){var r,i=this;if(i.length>1)throw Error("DomQuery only supports traverse functions on a single node.");return i[0]&&(r=t(i[0],n)),r=c(r),n&&"parentsUntil"!==e?r.filter(n):r}}),c.fn.filter=function(e){return c.filter(e)},c.fn.is=function(e){return!!e&&this.filter(e).length>0},c.fn.init.prototype=c.fn,c}),r(u,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={},d="﻿";for(e=e||{},o=("\\\" \\' \\; \\: ; : "+d).split(" "),i=0;o.length>i;i++)u[o[i]]=d+i,u[d+i]=o[i];return{toHex:function(e){return e.replace(a,n)},parse:function(t){function r(e,t){var n,r,i,o;n=y[e+"-top"+t],n&&(r=y[e+"-right"+t],n==r&&(i=y[e+"-bottom"+t],r==i&&(o=y[e+"-left"+t],i==o&&(y[e+t]=o,delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t]))))}function i(e){var t,n=y[e];if(n&&!(0>n.indexOf(" "))){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}}function o(e,t,n,r){i(t)&&i(n)&&i(r)&&(y[e]=y[t]+" "+y[n]+" "+y[r],delete y[t],delete y[n],delete y[r])}function d(e){return v=!0,u[e]}function f(e,t){return v&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return u[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,r,i,o){return(i=i||o)?(i=f(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=f(t||n||r),b&&(t=b.call(C,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var h,m,g,v,y={},b=e.url_converter,C=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,d).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,d)
});h=l.exec(t);)m=h[1].replace(c,"").toLowerCase(),g=h[2].replace(c,""),m&&g.length>0&&("font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(a,n),g=g.replace(s,p),y[m]=v?f(g,!0):g),l.lastIndex=h.index+h[0].length;r("border",""),r("border","-width"),r("border","-color"),r("border","-style"),r("padding",""),r("margin",""),o("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border}return y},serialize:function(e,n){function i(n){var i,o,a,l;if(i=t.styles[n])for(o=0,a=i.length;a>o;o++)n=i[o],l=e[n],l!==r&&l.length>0&&(s+=(s.length>0?" ":"")+n+": "+l+";")}var o,a,s="";if(n&&t&&t.styles)i("*"),i(n);else for(o in e)a=e[o],a!==r&&a.length>0&&(s+=(s.length>0?" ":"")+o+": "+a+";");return s}}}}),r(d,[],function(){return function(e,t){function n(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(o=e[r])return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[r])return o}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(f,[],function(){function e(e,n){return n?"array"==n&&g(e)?!0:typeof e==n:e!==t}function n(e){var t,n,r=[];for(t=0,n=e.length;n>t;t++)r[t]=e[t];return r}function r(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function i(e,n,r){var i,o;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,o=e.length;o>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function o(e,t){var n=[];return i(e,function(e){n.push(t(e))}),n}function a(e,t){var n=[];return i(e,function(e){(!t||t(e))&&n.push(e)}),n}function s(e,n,r){var i,o,a,s,l,c=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],o=c.createNS(e[3].replace(/\.\w+$/,""),r),!o[a]){if("static"==e[2])return o[a]=n,this.onCreate&&this.onCreate(e[2],e[3],o[a]),t;n[a]||(n[a]=function(){},u=1),o[a]=n[a],c.extend(o[a].prototype,n),e[5]&&(i=c.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],l=o[a],o[a]=u?function(){return i[s].apply(this,arguments)}:function(){return this.parent=i[s],l.apply(this,arguments)},o[a].prototype[a]=o[a],c.each(i,function(e,t){o[a].prototype[t]=i[t]}),c.each(n,function(e,t){i[t]?o[a].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=a&&(o[a].prototype[t]=e)})),c.each(n["static"],function(e,t){o[a][t]=e})}}function l(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function c(e,n){var r,i,o,a,s=arguments;for(r=1,i=s.length;i>r;r++){n=s[r];for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!==t&&(e[o]=a))}return e}function u(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),i(e,function(e,i){return n.call(o,e,i,r)===!1?!1:(u(e,n,r,o),t)}))}function d(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;e.length>n;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function f(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]]);n++);return t}function p(t,n){return!t||e(t,"array")?t:o(t.split(n||","),m)}var h=/^\s*|\s*$/g,m=function(e){return null===e||e===t?"":(""+e).replace(h,"")},g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:m,isArray:g,is:e,toArray:n,makeMap:r,each:i,map:o,grep:a,inArray:l,extend:c,create:s,walk:u,createNS:d,resolve:f,explode:p}}),r(p,[f],function(e){function n(r){function i(){return P.createDocumentFragment()}function o(e,t){N(W,e,t)}function a(e,t){N(z,e,t)}function s(e){o(e.parentNode,K(e))}function l(e){o(e.parentNode,K(e)+1)}function c(e){a(e.parentNode,K(e))}function u(e){a(e.parentNode,K(e)+1)}function d(e){e?(D[q]=D[U],D[$]=D[V]):(D[U]=D[q],D[V]=D[$]),D.collapsed=W}function f(e){s(e),u(e)}function p(e){o(e,0),a(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function h(e,n){var r=D[U],i=D[V],o=D[q],a=D[$],s=n.startContainer,l=n.startOffset,c=n.endContainer,u=n.endOffset;return 0===e?_(r,i,s,l):1===e?_(o,a,s,l):2===e?_(o,a,c,u):3===e?_(r,i,c,u):t}function m(){E(F)}function g(){return E(O)}function v(){return E(I)}function y(e){var t,n,i=this[U],o=this[V];3!==i.nodeType&&4!==i.nodeType||!i.nodeValue?(i.childNodes.length>0&&(n=i.childNodes[o]),n?i.insertBefore(e,n):i.appendChild(e)):o?o>=i.nodeValue.length?r.insertAfter(e,i):(t=i.splitText(o),i.parentNode.insertBefore(e,t)):i.parentNode.insertBefore(e,i)}function b(e){var t=D.extractContents();D.insertNode(e),e.appendChild(t),D.selectNode(e)}function C(){return j(new n(r),{startContainer:D[U],startOffset:D[V],endContainer:D[q],endOffset:D[$],collapsed:D.collapsed,commonAncestorContainer:D.commonAncestorContainer})}function x(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function w(){return D[U]==D[q]&&D[V]==D[$]}function _(e,t,n,i){var o,a,s,l,c,u;if(e==n)return t==i?0:i>t?-1:1;for(o=n;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(o=e;o&&o.parentNode!=n;)o=o.parentNode;if(o){for(a=0,s=n.firstChild;s!=o&&i>a;)a++,s=s.nextSibling;return i>a?-1:1}for(l=r.findCommonAncestor(e,n),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=n;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==u)return 1;s=s.nextSibling}}function N(e,t,n){var i,o;for(e?(D[U]=t,D[V]=n):(D[q]=t,D[$]=n),i=D[q];i.parentNode;)i=i.parentNode;for(o=D[U];o.parentNode;)o=o.parentNode;o==i?_(D[U],D[V],D[q],D[$])>0&&D.collapse(e):D.collapse(e),D.collapsed=w(),D.commonAncestorContainer=r.findCommonAncestor(D[U],D[q])}function E(e){var t,n,r,i,o,a,s,l=0,c=0;if(D[U]==D[q])return k(e);for(t=D[q],n=t.parentNode;n;t=n,n=n.parentNode){if(n==D[U])return S(t,e);++l}for(t=D[U],n=t.parentNode;n;t=n,n=n.parentNode){if(n==D[q])return T(t,e);++c}for(r=c-l,i=D[U];r>0;)i=i.parentNode,r--;for(o=D[q];0>r;)o=o.parentNode,r++;for(a=i.parentNode,s=o.parentNode;a!=s;a=a.parentNode,s=s.parentNode)i=a,o=s;return R(i,o,e)}function k(e){var t,n,r,o,a,s,l,c,u;if(e!=F&&(t=i()),D[V]==D[$])return t;if(3==D[U].nodeType){if(n=D[U].nodeValue,r=n.substring(D[V],D[$]),e!=I&&(o=D[U],c=D[V],u=D[$]-D[V],0===c&&u>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(c,u),D.collapse(W)),e==F)return;return r.length>0&&t.appendChild(P.createTextNode(r)),t}for(o=x(D[U],D[V]),a=D[$]-D[V];o&&a>0;)s=o.nextSibling,l=H(o,e),t&&t.appendChild(l),--a,o=s;return e!=I&&D.collapse(W),t}function S(e,t){var n,r,o,a,s,l;if(t!=F&&(n=i()),r=A(e,t),n&&n.appendChild(r),o=K(e),a=o-D[V],0>=a)return t!=I&&(D.setEndBefore(e),D.collapse(z)),n;for(r=e.previousSibling;a>0;)s=r.previousSibling,l=H(r,t),n&&n.insertBefore(l,n.firstChild),--a,r=s;return t!=I&&(D.setEndBefore(e),D.collapse(z)),n}function T(e,t){var n,r,o,a,s,l;for(t!=F&&(n=i()),o=B(e,t),n&&n.appendChild(o),r=K(e),++r,a=D[$]-r,o=e.nextSibling;o&&a>0;)s=o.nextSibling,l=H(o,t),n&&n.appendChild(l),--a,o=s;return t!=I&&(D.setStartAfter(e),D.collapse(W)),n}function R(e,t,n){var r,o,a,s,l,c,u,d;for(n!=F&&(o=i()),r=B(e,n),o&&o.appendChild(r),a=e.parentNode,s=K(e),l=K(t),++s,c=l-s,u=e.nextSibling;c>0;)d=u.nextSibling,r=H(u,n),o&&o.appendChild(r),u=d,--c;return r=A(t,n),o&&o.appendChild(r),n!=I&&(D.setStartAfter(e),D.collapse(W)),o}function A(e,t){var n,r,i,o,a,s=x(D[q],D[$]-1),l=s!=D[q];if(s==e)return L(s,l,z,t);for(n=s.parentNode,r=L(n,z,z,t);n;){for(;s;)i=s.previousSibling,o=L(s,l,z,t),t!=F&&r.insertBefore(o,r.firstChild),l=W,s=i;if(n==e)return r;s=n.previousSibling,n=n.parentNode,a=L(n,z,z,t),t!=F&&a.appendChild(r),r=a}}function B(e,t){var n,r,i,o,a,s=x(D[U],D[V]),l=s!=D[U];if(s==e)return L(s,l,W,t);for(n=s.parentNode,r=L(n,z,W,t);n;){for(;s;)i=s.nextSibling,o=L(s,l,W,t),t!=F&&r.appendChild(o),l=W,s=i;if(n==e)return r;s=n.nextSibling,n=n.parentNode,a=L(n,z,W,t),t!=F&&a.appendChild(r),r=a}}function L(e,t,n,i){var o,a,s,l,c;if(t)return H(e,i);if(3==e.nodeType){if(o=e.nodeValue,n?(l=D[V],a=o.substring(l),s=o.substring(0,l)):(l=D[$],a=o.substring(0,l),s=o.substring(l)),i!=I&&(e.nodeValue=s),i==F)return;return c=r.clone(e,z),c.nodeValue=a,c}return i!=F?r.clone(e,z):void 0}function H(e,n){return n!=F?n==I?r.clone(e,W):e:(e.parentNode.removeChild(e),t)}function M(){return r.create("body",null,v()).outerText}var D=this,P=r.doc,O=0,I=1,F=2,W=!0,z=!1,V="startOffset",U="startContainer",q="endContainer",$="endOffset",j=e.extend,K=r.nodeIndex;return j(D,{startContainer:P,startOffset:0,endContainer:P,endOffset:0,collapsed:W,commonAncestorContainer:P,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:a,setStartBefore:s,setStartAfter:l,setEndBefore:c,setEndAfter:u,collapse:d,selectNode:f,selectNodeContents:p,compareBoundaryPoints:h,deleteContents:m,extractContents:g,cloneContents:v,insertNode:y,surroundContents:b,cloneRange:C,toStringIE:M}),D}return n.prototype.toString=function(){return this.toStringIE()},n}),r(h,[f],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,o,a={};if(e){for(e=e.split(","),t=t||10,n=0;e.length>n;n+=2)r=String.fromCharCode(parseInt(e[n],t)),i[r]||(o="&"+e[n+1]+";",a[r]=o,a[o]=r);return a}}var r,i,o,a=e.makeMap,s=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,d={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},r=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||r,e.replace(t?s:l,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?s:l,function(e){return i[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||r,e=a(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?c:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(u,function(e,n,i){return n?(i=parseInt(i,2===n.length?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):d[i]||String.fromCharCode(i)):o[e]||r[e]||t(e)})}};return f}),r(m,[],function(){var e,t,n,r,i,o,a=navigator,s=a.userAgent;e=window.opera&&window.opera.buildNumber,t=/WebKit/.test(s),n=!t&&!e&&/MSIE/gi.test(s)&&/Explorer/gi.test(a.appName),n=n&&/MSIE (\w+)\./.exec(s)[1],r=!t&&/Gecko/.test(s),i=-1!=s.indexOf("Mac"),o=/(iPad|iPhone)/.test(s);var l=!o||s.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:e,webkit:t,ie:n,gecko:r,mac:i,iOS:o,contentEditable:l,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window}}),r(g,[l,u,s,d,p,h,m,f],function(e,n,r,i,o,a,s,l){function c(e,t){var i,o=this;o.doc=e,o.win=window,o.files={},o.counter=0,o.stdMode=!g||e.documentMode>=8,o.boxModel=!g||"CSS1Compat"==e.compatMode||o.stdMode,o.hasOuterHTML="outerHTML"in e.createElement("a"),o.settings=t=h({keep_values:!1,hex_colors:1},t),o.schema=t.schema,o.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),o.fixDoc(e),o.events=t.ownEvents?new r(t.proxy):r.Event,i=t.schema?t.schema.getBlockElements():{},o.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!i[e.nodeName]):!!i[e]}}var u=l.each,d=l.is,f=l.grep,p=l.trim,h=l.extend,m=s.webkit,g=s.ie,v=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/,b=l.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");return c.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(e){var t,n=this.settings;if(g&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,r,i=this;return!g||1!==e.nodeType||t?e.cloneNode(t):(r=i.doc,t?n.firstChild:(n=r.createElement(e.nodeName),u(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,r=this;return e=r.get(e),t=r.getPos(e),n=r.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,r=this;return e=r.get(e),t=r.getStyle(e,"width"),n=r.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var o,a=this,s=[];for(e=a.get(e),i=i===t,r=r||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),d(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;s.push(e)}e=e.parentNode}return i?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(v.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}return e.matches(r,n.nodeType?[n]:n).length>0},add:function(e,t,n,r,i){var o=this;return this.run(e,function(e){var a;return a=d(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):o.setHTML(a,r)),i?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,n,r){var i,o="";o+="<"+e;for(i in n)n.hasOwnProperty(i)&&null!==n[i]&&(o+=" "+i+'="'+this.encode(n[i])+'"');return r!==t?o+">"+r+"</"+e+">":o+" />"},createFragment:function(e){var t,n,r,i=this.doc;for(r=i.createElement("div"),t=i.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return this.run(e,function(e){var n,r=e.parentNode;if(!r)return null;if(t)for(;n=e.firstChild;)!g||3!==n.nodeType||n.nodeValue?r.insertBefore(n,e):e.removeChild(n);return r.removeChild(e)})},setStyle:function(e,n,r){return this.run(e,function(e){var i,o,a=this;if(n)if("string"==typeof n){i=e.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"number"!=typeof r||b[n]||(r+="px"),"opacity"===n&&e.runtimeStyle&&e.runtimeStyle.opacity===t&&(i.filter=""===r?"":"alpha(opacity="+100*r+")"),"float"==n&&(n="cssFloat"in e.style?"cssFloat":"styleFloat");try{i[n]=r}catch(s){}a.settings.update_styles&&e.removeAttribute("data-mce-style")}else for(o in n)a.setStyle(e,o,n[o])})},getStyle:function(e,n,r){if(e=this.get(e)){if(this.doc.defaultView&&r){n=n.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(n)}catch(i){return null}}return n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=g?"styleFloat":"cssFloat"),n.currentStyle&&r?e.currentStyle[n]:e.style?e.style[n]:t}},setStyles:function(e,t){this.setStyle(e,t)},css:function(e,t,n){this.setStyle(e,t,n)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,n,r){var i=this;return e&&n?this.run(e,function(e){var o=i.settings,a=e.getAttribute(n);if(null!==r)switch(n){case"style":if(!d(r,"string"))return u(r,function(t,n){i.setStyle(e,n,t)}),t;o.keep_values&&(r?e.setAttribute("data-mce-style",r,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=r;break;case"class":e.className=r||"";break;case"src":case"href":o.keep_values&&(o.url_converter&&(r=o.url_converter.call(o.url_converter_scope||i,r,n,e)),i.setAttrib(e,"data-mce-"+n,r,2));break;case"shape":e.setAttribute("data-mce-style",r)}d(r)&&null!==r&&0!==r.length?e.setAttribute(n,""+r,2):e.removeAttribute(n,2),a!=r&&o.onSetAttrib&&o.onSetAttrib({attrElm:e,attrName:n,attrValue:r})}):void 0},setAttribs:function(e,t){var n=this;return this.run(e,function(e){u(t,function(t,r){n.setAttrib(e,r,t)})})},getAttrib:function(e,t,n){var r,i,o=this;if(e=o.get(e),!e||1!==e.nodeType)return n===i?!1:n;if(d(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(r=e.getAttribute("data-mce-"+t)))return r;if(g&&o.props[t]&&(r=e[o.props[t]],r=r&&r.nodeValue?r.nodeValue:r),r||(r=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return e[o.props[t]]===!0&&""===r?t:r?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&(r=r||e.style.cssText,r&&(r=o.serializeStyle(o.parseStyle(r),e.nodeName),o.settings.keep_values&&e.setAttribute("data-mce-style",r))),m&&"class"===t&&r&&(r=r.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),g)switch(t){case"rowspan":case"colspan":1===r&&(r="");break;case"size":("+0"===r||20===r||0===r)&&(r="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===r&&(r="");break;case"hspace":-1===r&&(r="");break;case"maxlength":case"tabindex":(32768===r||2147483647===r||"32768"===r)&&(r="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===r?t:n;case"shape":r=r.toLowerCase();break;default:0===t.indexOf("on")&&r&&(r=(""+r).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return r!==i&&null!==r&&""!==r?""+r:n},getPos:function(e,t){var n,r,i=this,o=0,a=0,s=i.doc;if(e=i.get(e),t=t||s.body,e){if(t===s.body&&e.getBoundingClientRect)return r=e.getBoundingClientRect(),t=i.boxModel?s.documentElement:s.body,o=r.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-t.clientTop,a=r.top+(s.documentElement.scrollTop||s.body.scrollTop)-t.clientLeft,{x:o,y:a};for(n=e;n&&n!=t&&n.nodeType;)o+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)o-=n.scrollLeft||0,a-=n.scrollTop||0,n=n.parentNode}return{x:o,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,r=this,i=r.doc;if(r!==c.DOM&&i===document){var o=c.DOM.addedStyles;if(o=o||[],o[e])return;o[e]=!0,c.DOM.addedStyles=o}n=i.getElementById("mceDefaultStyles"),n||(n=i.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=i.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(i.createTextNode(e))},loadCSS:function(e){var n,r=this,i=r.doc;return r!==c.DOM&&i===document?(c.DOM.loadCSS(e),t):(e||(e=""),n=i.getElementsByTagName("head")[0],u(e.split(","),function(e){var t;r.files[e]||(r.files[e]=!0,t=r.create("link",{rel:"stylesheet",href:e}),g&&i.documentMode&&i.recalc&&(t.onload=function(){i.recalc&&i.recalc(),t.onload=null}),n.appendChild(t))}),t)},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=n=(""!==n?n+" ":"")+t,n):0})},removeClass:function(e,t){var n,r=this;return r.run(e,function(e){var i;return r.hasClass(e,t)?(n||(n=RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),i=e.className.replace(n," "),i=p(" "!=i?i:""),e.className=i,i||(e.removeAttribute("class"),e.removeAttribute("className")),i):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},toggleClass:function(e,n,r){r=r===t?!this.hasClass(e,n):r,this.hasClass(e,n)!==r&&(r?this.addClass(e,n):this.removeClass(e,n))},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return n.run(e,function(e){if(g){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(r){var i=n.create("div");i.innerHTML="<br />"+t,u(f(i.childNodes),function(t,n){n&&e.canHaveHTML&&e.appendChild(t)})}}else e.innerHTML=t;return t})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var r=this;return r.run(e,function(e){function i(){var i,o;for(o=n.createElement("body"),o.innerHTML=t,i=o.lastChild;i;)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}if(1==e.nodeType)if(n=n||e.ownerDocument||r.doc,g)try{1==e.nodeType&&r.hasOuterHTML?e.outerHTML=t:i()}catch(o){i()}else i()})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return d(t,"array")&&(e=e.cloneNode(!0)),n&&u(f(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,r=this;return e.nodeName!=t.toUpperCase()&&(n=r.create(t),u(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!=n;)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(l.trim(e))},getClasses:function(){function e(n){u(n.imports,function(t){e(t)}),u(n.cssRules||n.rules,function(n){switch(n.type||1){case 1:n.selectorText&&u(n.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(t=e,e=e.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!o||(e=o(e,t)))&&(i[e]||(r.push({"class":e}),i[e]=1)))});break;case 3:e(n.styleSheet)}})}var t,n=this,r=[],i={},o=n.settings.class_filter;if(n.classes)return n.classes;try{u(n.doc.styleSheets,e)}catch(a){}return r.length>0&&(n.classes=r),r},run:function(e,t,n){var r,i=this;return"string"==typeof e&&(e=i.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],u(e,function(e,o){e&&("string"==typeof e&&(e=i.get(e)),r.push(t.call(n,e,o)))}),r)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(g){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,r,o,a,s,l=this,c=0;if(e=e.firstChild){a=new i(e,e.parentNode),t=t||l.schema?l.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){c++;continue}return!1}for(r=l.getAttribs(e),n=e.attributes.length;n--;)if(s=e.attributes[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1}while(e=a.next())}return 1>=c},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new o(this)},nodeIndex:function(e,t){var n,r,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling,r=e;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(o++,n=i);return o},split:function(e,n,r){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,r=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=r.length-1;n>=0;n--)i(r[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var a=p(e.nodeValue).length;if(!l.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==o&&(r=e.childNodes,1==r.length&&r[0]&&1==r[0].nodeType&&"bookmark"==r[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(r[0],e),r.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;l.remove(e)}return e}}var o,a,s,l=this,c=l.createRng();return e&&n?(c.setStart(e.parentNode,l.nodeIndex(e)),c.setEnd(n.parentNode,l.nodeIndex(n)),o=c.extractContents(),c=l.createRng(),c.setStart(n.parentNode,l.nodeIndex(n)+1),c.setEnd(e.parentNode,l.nodeIndex(e)+1),a=c.extractContents(),s=e.parentNode,s.insertBefore(i(o),e),r?s.replaceChild(r,n):s.insertBefore(n,e),s.insertBefore(i(a),e),l.remove(e),r||n):t},bind:function(e,t,n,r){return this.events.bind(e,t,n,r||this)},unbind:function(e,t,n){return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},destroy:function(){var e=this;e.win=e.doc=e.root=e.events=e.frag=null},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},c.DOM=new c(document),c}),r(v,[g,f],function(e,n){function r(){function e(e,t){function n(){s.remove(a),o&&(o.onreadystatechange=o.onload=o=null),t()}function r(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var o,a,s=i;a=s.uniqueId(),o=document.createElement("script"),o.id=a,o.type="text/javascript",o.src=e,o.onload=n,o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.onerror=r,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var n,r=0,s=1,l=2,c={},u=[],d={},f=[],p=0;this.isDone=function(e){return c[e]==l},this.markDone=function(e){c[e]=l},this.add=this.load=function(e,t,i){var o=c[e];o==n&&(u.push(e),c[e]=r),t&&(d[e]||(d[e]=[]),d[e].push({func:t,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(u,e,t)},this.loadScripts=function(r,i,u){function h(e){o(d[e],function(e){e.func.call(e.scope)}),d[e]=n}var m;f.push({func:i,scope:u||this}),m=function(){var n=a(r);r.length=0,o(n,function(n){return c[n]==l?(h(n),t):(c[n]!=s&&(c[n]=s,p++,e(n,function(){c[n]=l,p--,h(n),m()})),t)}),p||(o(f,function(e){e.func.call(e.scope)}),f.length=0)},m()}}var i=e.DOM,o=n.each,a=n.grep;return r.ScriptLoader=new r,r}),r(y,[v,f],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=r.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,o,a,s){function l(){var r=c.dependencies(n);i(r,function(e){var n=c.createUrl(o,e);c.load(n.resource,n,t,t)}),a&&(s?a.call(s):a.call(e))}var c=this,u=o;c.urls[n]||("object"==typeof o&&(u=o.prefix+o.resource+o.suffix),0!==u.indexOf("/")&&-1==u.indexOf("://")&&(u=r.baseURL+"/"+u),c.urls[n]=u.substring(0,u.lastIndexOf("/")),c.lookup[n]?l():e.ScriptLoader.add(u,l,s))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(b,[],function(){function e(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,r,i,o=this;if("string"!=typeof e){for(r in e)o.attr(r,e[r]);return o}if(n=o.attributes){if(t!==i){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),o;return o}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}return n.map[e]}},clone:function(){var e,n,r,i,o,a=this,s=new t(a.name,a.type);if(r=a.attributes){for(o=[],o.map={},e=0,n=r.length;n>e;e++)i=r[e],"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var r;
return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n,r=this,i=[];for(n=r.firstChild;n;n=e(n,r))n.name===t&&i.push(n);return i},empty:function(){var t,n,r,i=this;if(i.firstChild){for(t=[],r=i.firstChild;r;r=e(r,i))t.push(r);for(n=t.length;n--;)r=t[n],r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(t){var r,i,o=this,a=o.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(r=a.attributes.length;r--;)if(i=a.attributes[r].name,"name"===i||0===i.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,o));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,o;if(i=new t(e,r[e]||1),n)for(o in n)i.attr(o,n[o]);return i},t}),r(C,[f],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t,n,r={};for(t=0,n=e.length;n>t;t++)r[e[t]]={};return r}var o,s,l,c=arguments;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),s=3;c.length>s;s++)"string"==typeof c[s]&&(c[s]=t(c[s])),r.push.apply(r,c[s]);for(e=t(e),o=e.length;o--;)l=[].concat(a,t(n)),p[e[o]]={attributes:i(l),attributesOrder:l,children:i(r)}}function i(e,n){var r,i,o,a;for(e=t(e),r=e.length,n=t(n);r--;)for(i=p[e[r]],o=0,a=n.length;a>o;o++)i.attributes[n[o]]={},i.attributesOrder.push(n[o])}var a,s,l,c,u,d,f,p={};return r[e]?r[e]:(a=t("id accesskey class dir lang style tabindex title"),s=t("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting"),l=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),c=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(a.push.apply(a,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),l.push.apply(l,t("article aside details dialog figure header footer hgroup section nav")),c.push.apply(c,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(a.push("xml:lang"),f=t("acronym applet basefont big font strike tt"),c.push.apply(c,f),o(f,function(e){n(e,"",c)}),d=t("center dir isindex noframes"),l.push.apply(l,d),u=[].concat(l,c),o(d,function(e){n(e,"",u)})),u=u||[].concat(l,c),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),n("address dt dd div caption","",u),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),n("blockquote","cite",u),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",u),n("dl","","dt dd"),n("a","href target rel media hreflang type",c),n("q","cite",c),n("ins del","cite datetime",u),n("img","src alt usemap ismap width height"),n("iframe","src name width height",u),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",u,"param"),n("param","name value"),n("map","name",u,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",u),n("th","colspan rowspan headers scope abbr",u),n("form","accept-charset action autocomplete enctype method name novalidate target",u),n("fieldset","disabled form name",u,"legend"),n("label","form for",c),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?u:c),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",u,"li"),n("noscript","",u),"html4"!=e&&(n("wbr"),n("ruby","",c,"rt rp"),n("figcaption","",u),n("mark rt rp summary bdi","",c),n("canvas","width height",u),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height",u,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls",u,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",c,"option"),n("article section nav aside header footer","",u),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",u,"figcaption"),n("time","datetime",c),n("dialog","open",u),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",c),n("progress","value max",c),n("meter","value min max low high optimum",c),n("details","open",u,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid codebase codetype archive standby align border hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","srcdoc sandbox seamless allowfullscreen")),o(t("a form meter progress dfn"),function(e){p[e]&&delete p[e].children[e]}),delete p.caption.children.table,r[e]=p,p)}var r={},i=e.makeMap,o=e.each,a=e.extend,s=e.explode,l=e.inArray;return function(e){function c(t,n,o){var s=e[t];return s?s=i(s,",",i(s.toUpperCase()," ")):(s=r[t],s||(s=i(n," ",i(n.toUpperCase()," ")),s=a(s,o),r[t]=s)),s}function u(e){return RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function d(e){var n,r,o,a,s,c,d,f,p,h,m,g,v,y,b,C,x,w,_,N=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=t(e,","),k["@"]&&(C=k["@"].attributes,x=k["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(s=N.exec(e[n])){if(y=s[1],p=s[2],b=s[3],f=s[5],g={},v=[],c={attributes:g,attributesOrder:v},"#"===y&&(c.paddEmpty=!0),"-"===y&&(c.removeEmpty=!0),"!"===s[4]&&(c.removeEmptyAttrs=!0),C){for(w in C)g[w]=C[w];v.push.apply(v,x)}if(f)for(f=t(f,"|"),o=0,a=f.length;a>o;o++)if(s=E.exec(f[o])){if(d={},m=s[1],h=s[2].replace(/::/g,":"),y=s[3],_=s[4],"!"===m&&(c.attributesRequired=c.attributesRequired||[],c.attributesRequired.push(h),d.required=!0),"-"===m){delete g[h],v.splice(l(v,h),1);continue}y&&("="===y&&(c.attributesDefault=c.attributesDefault||[],c.attributesDefault.push({name:h,value:_}),d.defaultValue=_),":"===y&&(c.attributesForced=c.attributesForced||[],c.attributesForced.push({name:h,value:_}),d.forcedValue=_),"<"===y&&(d.validValues=i(_,"?"))),S.test(h)?(c.attributePatterns=c.attributePatterns||[],d.pattern=u(h),c.attributePatterns.push(d)):(g[h]||v.push(h),g[h]=d)}C||"@"!=p||(C=g,x=v),b&&(c.outputName=p,k[b]=c),S.test(p)?(c.pattern=u(p),T.push(c)):k[p]=c}}function f(e){k={},T=[],d(e),o(v,function(e,t){S[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&o(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",a=t[2];S[a]=S[i],R[a]=i,r||(w[a.toUpperCase()]={},w[a]={}),k[a]||(k[a]=k[i]),o(S,function(e){e[i]&&(e[a]=e[i])})})}function h(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&o(t(e,","),function(e){var r,i,a=n.exec(e);a&&(i=a[1],r=i?S[a[2]]:S[a[2]]={"#comment":{}},r=S[a[2]],o(t(a[3],"|"),function(e){"-"===i?delete r[e]:r[e]={}}))})}function m(e){var t,n=k[e];if(n)return n;for(t=T.length;t--;)if(n=T[t],n.pattern.test(e))return n}var g,v,y,b,C,x,w,_,N,E=this,k={},S={},T=[],R={},A={};e=e||{},v=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),e.valid_styles&&(g={},o(e.valid_styles,function(e,t){g[t]=s(e)})),y=c("whitespace_elements","pre script noscript style textarea video audio iframe object"),b=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=c("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),_=c("non_empty_elements","td th iframe video audio object",C),N=c("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),w=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",N),o((e.special||"script noscript style textarea").split(" "),function(e){A[e]=RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?f(e.valid_elements):(o(v,function(e,t){k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},S[t]=e.children}),"html5"!=e.schema&&o(t("strong/b em/i"),function(e){e=t(e,"/"),k[e[1]].outputName=e[0]}),k.img.attributesDefault=[{name:"alt",value:""}],o(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){k[e]&&(k[e].removeEmpty=!0)}),o(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){k[e].paddEmpty=!0}),o(t("span"),function(e){k[e].removeEmptyAttrs=!0})),p(e.custom_elements),h(e.valid_children),d(e.extended_valid_elements),h("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&o(s(e.invalid_elements),function(e){k[e]&&delete k[e]}),m("span")||d("span[!data-mce-type|*]"),E.children=S,E.styles=g,E.getBoolAttrs=function(){return x},E.getBlockElements=function(){return w},E.getTextBlockElements=function(){return N},E.getShortEndedElements=function(){return C},E.getSelfClosingElements=function(){return b},E.getNonEmptyElements=function(){return _},E.getWhiteSpaceElements=function(){return y},E.getSpecialElements=function(){return A},E.isValidChild=function(e,t){var n=S[e];return!(!n||!n[t])},E.isValid=function(e,t){var n,r,i=m(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},E.getElementRule=m,E.getCustomElements=function(){return R},E.addValidElements=d,E.setValidElements=f,E.addCustomElements=p,E.addValidChildren=h,E.elements=k}}),r(x,[C,h,f],function(e,t,n){var r=n.each;return function(n,i){var o=this,a=function(){};n=n||{},o.schema=i=i||new e,n.fix_self_closing!==!1&&(n.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(o[e]=n[e]||a)}),o.parse=function(e){function r(e){var t,n;for(t=O.length;t--&&O[t].name!==e;);if(t>=0){for(n=O.length-1;n>=t;n--)e=O[n],e.valid&&D.end(e.name);O.length=t}}function o(e,t,n,r,i){var o,a;if(t=t.toLowerCase(),n=t in g?t:F(n||r||i||""),y&&!p&&0!==t.indexOf("data-mce-")){if(o=_[t],!o&&N){for(a=N.length;a--&&(o=N[a],!o.pattern.test(t)););-1===a&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}c.map[t]=n,c.push({name:t,value:n})}var a,s,l,c,u,d,f,p,h,m,g,v,y,b,C,x,w,_,N,E,k,S,T,R,A,B,L,H,M,D=this,P=0,O=[],I=0,F=t.decode;for(A=RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),B=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,m=i.getShortEndedElements(),R=n.self_closing_elements||i.getSelfClosingElements(),g=i.getBoolAttrs(),y=n.validate,h=n.remove_internals,M=n.fix_self_closing,L=i.getSpecialElements();a=A.exec(e);){if(a.index>P&&D.text(F(e.substr(P,a.index-P))),s=a[6])s=s.toLowerCase(),":"===s.charAt(0)&&(s=s.substr(1)),r(s);else if(s=a[7]){if(s=s.toLowerCase(),":"===s.charAt(0)&&(s=s.substr(1)),v=s in m,M&&R[s]&&O.length>0&&O[O.length-1].name===s&&r(s),!y||(b=i.getElementRule(s))){if(C=!0,y&&(_=b.attributes,N=b.attributePatterns),(w=a[8])?(p=-1!==w.indexOf("data-mce-type"),p&&h&&(C=!1),c=[],c.map={},w.replace(B,o)):(c=[],c.map={}),y&&!p){if(E=b.attributesRequired,k=b.attributesDefault,S=b.attributesForced,T=b.removeEmptyAttrs,T&&!c.length&&(C=!1),S)for(u=S.length;u--;)x=S[u],f=x.name,H=x.value,"{$uid}"===H&&(H="mce_"+I++),c.map[f]=H,c.push({name:f,value:H});if(k)for(u=k.length;u--;)x=k[u],f=x.name,f in c.map||(H=x.value,"{$uid}"===H&&(H="mce_"+I++),c.map[f]=H,c.push({name:f,value:H}));if(E){for(u=E.length;u--&&!(E[u]in c.map););-1===u&&(C=!1)}c.map["data-mce-bogus"]&&(C=!1)}C&&D.start(s,c,v)}else C=!1;if(l=L[s]){l.lastIndex=P=a.index+a[0].length,(a=l.exec(e))?(C&&(d=e.substr(P,a.index-P)),P=a.index+a[0].length):(d=e.substr(P),P=e.length),C&&(d.length>0&&D.text(d,!0),D.end(s)),A.lastIndex=P;continue}v||(w&&w.indexOf("/")==w.length-1?C&&D.end(s):O.push({name:s,valid:C}))}else(s=a[1])?D.comment(s):(s=a[2])?D.cdata(s):(s=a[3])?D.doctype(s):(s=a[4])&&D.pi(s,a[5]);P=a.index+a[0].length}for(e.length>P&&D.text(F(e.substr(P))),u=O.length-1;u>=0;u--)s=O[u],s.valid&&D.end(s.name)}}}),r(w,[b,C,x,f],function(e,n,r,i){var o=i.makeMap,a=i.each,s=i.explode,l=i.extend;return function(i,c){function u(t){var n,r,i,a,s,l,u,f,p,h,m,g,v,y;for(m=o("tr,td,th,tbody,thead,tfoot,table"),h=c.getNonEmptyElements(),g=c.getTextBlockElements(),n=0;t.length>n;n++)if(r=t[n],r.parent&&!r.fixed)if(g[r.name]&&"li"==r.parent.name){for(v=r.next;v&&g[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(a=[r],i=r.parent;i&&!c.isValidChild(i.name,r.name)&&!m[i.name];i=i.parent)a.push(i);if(i&&a.length>1){for(a.reverse(),s=l=d.filterNode(a[0].clone()),p=0;a.length-1>p;p++){for(c.isValidChild(l.name,a[p].name)?(u=d.filterNode(a[p].clone()),l.append(u)):u=l,f=a[p].firstChild;f&&f!=a[p+1];)y=f.next,u.append(f),f=y;l=u}s.isEmpty(h)?i.insert(r,a[0],!0):(i.insert(s,a[0],!0),i.insert(r,s)),i=a[0],(i.isEmpty(h)||i.firstChild===i.lastChild&&"br"===i.firstChild.name)&&i.empty().remove()}else if(r.parent){if("li"===r.name){if(v=r.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if(v=r.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(d.filterNode(new e("ul",1)));continue}c.isValidChild(r.parent.name,"div")&&c.isValidChild("div",r.name)?r.wrap(d.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var d=this,f={},p=[],h={},m={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",d.schema=c=c||new n,d.filterNode=function(e){var t,n,r;n in f&&(r=h[n],r?r.push(e):h[n]=[e]),t=p.length;for(;t--;)n=p[t].name,n in e.attributes.map&&(r=m[n],r?r.push(e):m[n]=[e]);return e},d.addNodeFilter=function(e,t){a(s(e),function(e){var n=f[e];n||(f[e]=n=[]),n.push(t)})},d.addAttributeFilter=function(e,n){a(s(e),function(e){var r;for(r=0;p.length>r;r++)if(p[r].name===e)return p[r].callbacks.push(n),t;p.push({name:e,callbacks:[n]})})},d.parse=function(n,a){function s(){function e(e){e&&(r=e.firstChild,r&&3==r.type&&(r.value=r.value.replace(A,"")),r=e.lastChild,r&&3==r.type&&(r.value=r.value.replace(L,"")))}var t,n,r=b.firstChild;if(c.isValidChild(b.name,I.toLowerCase())){for(;r;)t=r.next,3==r.type||1==r.type&&"p"!==r.name&&!R[r.name]&&!r.attr("data-mce-type")?n?n.append(r):(n=d(I,1),b.insert(n,r),n.append(r)):(e(n),n=null),r=t;e(n)}}function d(t,n){var r,i=new e(t,n);return t in f&&(r=h[t],r?r.push(i):h[t]=[i]),i}function g(e){var t,n,r;for(t=e.prev;t&&3===t.type;)n=t.value.replace(L,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function v(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var y,b,C,x,w,_,N,E,k,S,T,R,A,B,L,H,M,D,P,O,I,F=[];if(a=a||{},h={},m={},R=l(o("script,style,head,html,body,title,meta,param"),c.getBlockElements()),O=c.getNonEmptyElements(),P=c.children,T=i.validate,I="forced_root_block"in a?a.forced_root_block:i.forced_root_block,D=c.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,L=/[ \t\r\n]+$/,H=/[ \t\r\n]+/g,M=/^[ \t\r\n]+$/,y=new r({validate:T,self_closing_elements:v(c.getSelfClosingElements()),cdata:function(e){C.append(d("#cdata",4)).value=e},text:function(e,t){var n;B||(e=e.replace(H," "),C.lastChild&&R[C.lastChild.name]&&(e=e.replace(A,""))),0!==e.length&&(n=d("#text",3),n.raw=!!t,C.append(n).value=e)},comment:function(e){C.append(d("#comment",8)).value=e},pi:function(e,t){C.append(d(e,7)).value=t,g(C)},doctype:function(e){var t;t=C.append(d("#doctype",10)),t.value=e,g(C)},start:function(e,t,n){var r,i,o,a,s;if(o=T?c.getElementRule(e):{}){for(r=d(o.outputName||e,1),r.attributes=t,r.shortEnded=n,C.append(r),s=P[C.name],s&&P[r.name]&&!s[r.name]&&F.push(r),i=p.length;i--;)a=p[i].name,a in t.map&&(k=m[a],k?k.push(r):m[a]=[r]);R[e]&&g(r),n||(C=r),!B&&D[e]&&(B=!0)}},end:function(n){var r,i,o,a,s;if(i=T?c.getElementRule(n):{}){if(R[n]&&!B){if(r=C.firstChild,r&&3===r.type)if(o=r.value.replace(A,""),o.length>0)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.next,(0===o.length||M.test(o))&&(r.remove(),r=a),r=a;if(r=C.lastChild,r&&3===r.type)if(o=r.value.replace(L,""),o.length>0)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.prev,(0===o.length||M.test(o))&&(r.remove(),r=a),r=a}if(B&&D[n]&&(B=!1),(i.removeEmpty||i.paddEmpty)&&C.isEmpty(O))if(i.paddEmpty)C.empty().append(new e("#text","3")).value=" ";else if(!C.attributes.map.name&&!C.attributes.map.id)return s=C.parent,C.empty().remove(),C=s,t;C=C.parent}}},c),b=C=new e(a.context||i.root_name,11),y.parse(n),T&&F.length&&(a.context?a.invalid=!0:u(F)),I&&("body"==b.name||a.isRootContent)&&s(),!a.invalid){for(S in h){for(k=f[S],x=h[S],N=x.length;N--;)x[N].parent||x.splice(N,1);for(w=0,_=k.length;_>w;w++)k[w](x,S,a)}for(w=0,_=p.length;_>w;w++)if(k=p[w],k.name in m){for(x=m[k.name],N=x.length;N--;)x[N].parent||x.splice(N,1);for(N=0,E=k.callbacks.length;E>N;N++)k.callbacks[N](x,k.name,a)}}return b},i.remove_trailing_brs&&d.addNodeFilter("br",function(t){var n,r,i,o,a,s,u,d,f=t.length,p=l({},c.getBlockElements()),h=c.getNonEmptyElements();for(p.body=1,n=0;f>n;n++)if(r=t[n],i=r.parent,p[r.parent.name]&&r===i.lastChild){for(a=r.prev;a;){if(s=a.name,"span"!==s||"bookmark"!==a.attr("data-mce-type")){if("br"!==s)break;if("br"===s){r=null;break}}a=a.prev}r&&(r.remove(),i.isEmpty(h)&&(u=c.getElementRule(i.name),u&&(u.removeEmpty?i.remove():u.paddEmpty&&(i.empty().append(new e("#text",3)).value=" "))))}else{for(o=r;i.firstChild===o&&i.lastChild===o&&(o=i,!p[i.name]);)i=i.parent;o===i&&(d=new e("#text",3),d.value=" ",r.replace(d))}}),i.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if(i=e[o],"a"===i.name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do n=t.prev,r.insert(t,i),t=n;while(t)}})}}),r(_,[h,f],function(e,t){var n=t.makeMap;return function(t){var r,i,o,a,s,l=[];return t=t||{},r=t.indent,i=n(t.indent_before||""),o=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var c,u,d,f;if(r&&i[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n")),l.push("<",e),t)for(c=0,u=t.length;u>c;c++)d=t[c],l.push(" ",d.name,'="',a(d.value,!0),'"');l[l.length]=!n||s?">":" />",n&&r&&o[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),r&&o[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),r&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),r(N,[_,C],function(e,t){return function(n,r){var i=this,o=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,i.schema=r=r||new t,i.writer=o,i.serialize=function(e){function t(e){var n,s,l,c,u,d,f,p,h,m=i[e.type];if(m)m(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1){for(d=[],d.map={},h=r.getElementRule(e.name),f=0,p=h.attributesOrder.length;p>f;f++)c=h.attributesOrder[f],c in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(f=0,p=l.length;p>f;f++)c=l[f].name,c in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(o.start(e.name,l,s),!s){if(e=e.firstChild)do t(e);while(e=e.next);o.end(n)}}}var i,a;return a=n.validate,i={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},o.reset(),1!=e.type||n.inner?i[11](e):t(e),o.getContent()}}}),r(E,[g,w,h,N,b,C,m,f],function(e,t,n,r,i,o,a,s){var l=s.each,c=s.trim,u=e.DOM;return function(e,i){var s,d,f;return i&&(s=i.dom,d=i.schema),s=s||u,d=d||new o(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,f=new t(e,d),f.addAttributeFilter("src,href,style",function(t,n){for(var r,i,o,a=t.length,l="data-mce-"+n,c=e.url_converter,u=e.url_converter_scope;a--;)r=t[a],i=r.attributes.map[l],i!==o?(r.attr(n,i.length>0?i:null),r.attr(l,null)):(i=r.attributes.map[n],"style"===n?i=s.serializeStyle(s.parseStyle(i),r.name):c&&(i=c.call(u,i,n,r.name)),r.attr(n,i.length>0?i:null))}),f.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null)}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)r=e[i],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),f.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),f.addNodeFilter("noscript",function(e){for(var t,r=e.length;r--;)t=e[r].firstChild,t&&(t.value=n.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r,i,o=e.length;o--;)r=e[o],i=r.firstChild?r.firstChild.value:"","script"===t?(r.attr("type",(r.attr("type")||"text/javascript").replace(/^mce\-/,"")),i.length>0&&(r.firstChild.value="// <![CDATA[\n"+n(i)+"\n// ]]>")):i.length>0&&(r.firstChild.value="<!--\n"+n(i)+"\n-->")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)n=e[r],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:d,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(t,n){var i,o,u,p,h,m=this;return a.ie&&s.select("script,style,select,map").length>0?(h=t.innerHTML,t=t.cloneNode(!1),s.setHTML(t,h)):t=t.cloneNode(!0),i=t.ownerDocument.implementation,i.createHTMLDocument&&(o=i.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!=t.nodeName?o.body.firstChild:o.body,u=s.doc,s.doc=o),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,m.onPreProcess(n)),p=new r(e,d),n.content=p.serialize(f.parse(c(n.getInner?t.innerHTML:s.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||m.onPostProcess(n),u&&(s.doc=u),n.node=null,n.content},addRules:function(e){d.addValidElements(e)},setRules:function(e){d.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(k,[],function(){function e(e){function n(t,n){var r,i,o,a,s,l,c,u,d=0,f=-1;if(r=t.duplicate(),r.collapse(n),u=r.parentElement(),u.ownerDocument===e.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(a=u.children,i=a.length-1;i>=d;)if(c=Math.floor((d+i)/2),s=a[c],r.moveToElementText(s),f=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)i=c-1;else{if(!(0>f))return{node:s};d=c+1}if(0>f)for(s?r.collapse(!1):(r.moveToElementText(u),r.collapse(!0),s=u,o=!0),l=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&u==r.parentElement();)l++;else for(r.collapse(!0),l=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&u==r.parentElement();)l++;return{node:s,position:f,offset:l,inside:o}}}function r(){function r(e){var r,i,o,a,s,l=n(d,e),c=0;if(r=l.node,i=l.offset,l.inside&&!r.hasChildNodes())return f[e?"setStart":"setEnd"](r,0),t;if(i===a)return f[e?"setStartBefore":"setEndAfter"](r),t;if(0>l.position){if(o=l.inside?r.firstChild:r.nextSibling,!o)return f[e?"setStartAfter":"setEndAfter"](r),t;if(!i)return 3==o.nodeType?f[e?"setStart":"setEnd"](o,0):f[e?"setStartBefore":"setEndBefore"](o),t;for(;o;){if(s=o.nodeValue,c+=s.length,c>=i){r=o,c-=i,c=s.length-c;break}o=o.nextSibling}}else{if(o=r.previousSibling,!o)return f[e?"setStartBefore":"setEndBefore"](r);if(!i)return 3==r.nodeType?f[e?"setStart":"setEnd"](o,r.nodeValue.length):f[e?"setStartAfter":"setEndAfter"](o),t;for(;o;){if(c+=o.nodeValue.length,c>=i){r=o,c-=i;break}o=o.previousSibling}}f[e?"setStart":"setEnd"](r,c)}var a,s,l,c,u,d=e.getRng(),f=o.createRng();if(a=d.item?d.item(0):d.parentElement(),a.ownerDocument!=o.doc)return f;if(s=e.isCollapsed(),d.item)return f.setStart(a.parentNode,o.nodeIndex(a)),f.setEnd(f.startContainer,f.startOffset+1),f;try{r(!0),s||r()}catch(p){if(-2147024809!=p.number)throw p;u=i.getBookmark(2),l=d.duplicate(),l.collapse(!0),a=l.parentElement(),s||(l=d.duplicate(),l.collapse(!1),c=l.parentElement(),c.innerHTML=c.innerHTML),a.innerHTML=a.innerHTML,i.moveToBookmark(u),d=e.getRng(),r(!0),s||r()}return f}var i=this,o=e.dom,a=!1;this.getBookmark=function(r){function i(e){var t,n,r,i,a=[];for(t=e.parentNode,n=o.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,i=r.length;i--;)if(e===r[i]){a.push(i);break}e=t,t=t.parentNode}return a}function a(e){var r;return r=n(s,e),r?{position:r.position,offset:r.offset,indexes:i(r.node),inside:r.inside}:t}var s=e.getRng(),l={};return 2===r&&(s.item?l.start={ctrl:!0,indexes:i(s.item(0))}:(l.start=a(!0),e.isCollapsed()||(l.end=a()))),l},this.moveToBookmark=function(e){function t(e){var t,n,r,i;for(t=o.getRoot(),n=e.length-1;n>=0;n--)i=t.children,r=e[n],i.length-1>=r&&(t=i[r]);return t}function n(n){var o,a,s,l,c=e[n?"start":"end"];c&&(o=c.position>0,a=i.createTextRange(),a.moveToElementText(t(c.indexes)),l=c.offset,l!==s?(a.collapse(c.inside||o),a.moveStart("character",o?-l:l)):a.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",a),n&&r.collapse(!0))}var r,i=o.doc.body;e.start&&(e.start.ctrl?(r=i.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=i.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(n){function r(e){var t,n,r,s,f;r=o.create("a"),t=e?l:u,n=e?c:d,s=i.duplicate(),(t==m||t==m.documentElement)&&(t=g,n=0),3==t.nodeType?(t.parentNode.insertBefore(r,t),s.moveToElementText(r),s.moveStart("character",n),o.remove(r),i.setEndPoint(e?"StartToStart":"EndToEnd",s)):(f=t.childNodes,f.length?(n>=f.length?o.insertAfter(r,f[f.length-1]):t.insertBefore(r,f[n]),s.moveToElementText(r)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",r=t.firstChild,s.moveToElementText(r),s.collapse(a)),i.setEndPoint(e?"StartToStart":"EndToEnd",s),o.remove(r))}var i,s,l,c,u,d,f,p,h,m=e.dom.doc,g=m.body;if(l=n.startContainer,c=n.startOffset,u=n.endContainer,d=n.endOffset,i=g.createTextRange(),l==u&&1==l.nodeType){if(c==d&&!l.hasChildNodes()){if(l.canHaveHTML)return f=l.previousSibling,f&&!f.hasChildNodes()&&o.isBlock(f)?f.innerHTML="&#xFEFF;":f=null,l.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(l.lastChild),i.select(),o.doc.selection.clear(),l.innerHTML="",f&&(f.innerHTML=""),t;c=o.nodeIndex(l),l=l.parentNode}if(c==d-1)try{if(h=l.childNodes[c],s=g.createControlRange(),s.addElement(h),s.select(),p=e.getRng(),p.item&&h===p.item(0))return}catch(v){}}r(!0),r(),i.select()},this.getRangeAt=r}return e}),r(S,[m],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r(T,[S,f,m],function(e,n,r){return function(i,o){function a(e){return o.settings.object_resizing===!1?!1:/TABLE|IMG|DIV/.test(e.nodeName)?"false"===e.getAttribute("data-mce-resize")?!1:!0:!1}function s(t){var n,r;n=t.screenX-_,r=t.screenY-N,B=n*w[2]+S,L=r*w[3]+T,B=5>B?5:B,L=5>L?5:L,(e.modifierPressed(t)||"IMG"==b.nodeName&&0!==w[2]*w[3])&&(B=Math.round(L/R),L=Math.round(B*R)),H.setStyles(C,{width:B,height:L}),0>w[2]&&B>=C.clientWidth&&H.setStyle(C,"left",E+(S-B)),0>w[3]&&L>=C.clientHeight&&H.setStyle(C,"top",k+(T-L)),A||(o.fire("ObjectResizeStart",{target:b,width:S,height:T}),A=!0)}function l(){function e(e,t){t&&(b.style[e]||!o.schema.isValid(b.nodeName.toLowerCase(),e)?H.setStyle(b,e,t):H.setAttrib(b,e,t))}A=!1,e("width",B),e("height",L),H.unbind(D,"mousemove",s),H.unbind(D,"mouseup",l),P!=D&&(H.unbind(P,"mousemove",s),H.unbind(P,"mouseup",l)),H.remove(C),O&&"TABLE"!=b.nodeName||c(b),o.fire("ObjectResized",{target:b,width:B,height:L}),o.nodeChanged()}function c(e,n,r){var i,c,d,f,p;i=H.getPos(e,o.getBody()),E=i.x,k=i.y,p=e.getBoundingClientRect(),c=p.width||p.right-p.left,d=p.height||p.bottom-p.top,b!=e&&(g(),b=e,B=L=0),f=o.fire("ObjectSelected",{target:e}),a(e)&&!f.isDefaultPrevented()?M(x,function(e,i){function a(t){A=!0,_=t.screenX,N=t.screenY,S=b.clientWidth,T=b.clientHeight,R=T/S,w=e,C=b.cloneNode(!0),H.addClass(C,"mce-clonedresizable"),C.contentEditable=!1,C.unSelectabe=!0,H.setStyles(C,{left:E,top:k,margin:0}),C.removeAttribute("data-mce-selected"),o.getBody().appendChild(C),H.bind(D,"mousemove",s),H.bind(D,"mouseup",l),P!=D&&(H.bind(P,"mousemove",s),H.bind(P,"mouseup",l))
}var u,f;return n?(i==n&&a(r),t):(u=H.get("mceResizeHandle"+i),u?H.show(u):(f=o.getBody(),u=H.add(f,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":!0,"class":"mce-resizehandle",contentEditable:!1,unSelectabe:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),H.bind(u,"mousedown",function(e){e.preventDefault(),a(e)})),H.setStyles(u,{left:c*e[0]+E-u.offsetWidth/2,top:d*e[1]+k-u.offsetHeight/2}),t)}):u(),b.setAttribute("data-mce-selected","1")}function u(){var e,t;b&&b.removeAttribute("data-mce-selected");for(e in x)t=H.get("mceResizeHandle"+e),t&&(H.unbind(t),H.remove(t))}function d(e){function n(e,t){do if(e===t)return!0;while(e=e.parentNode)}var r;return M(H.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"==e.type?e.target:i.getNode(),r=H.getParent(r,O?"table":"table,img,hr"),r&&n(i.getStart(),r)&&n(i.getEnd(),r)&&(!O||r!=i.getStart()&&"IMG"!==i.getStart().nodeName)?(c(r),t):(u(),t)}function f(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function p(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function h(e){var t,n,r,i,a,s,l,u=e.srcElement;t=u.getBoundingClientRect(),s=e.clientX-t.left,l=e.clientY-t.top;for(n in x)if(r=x[n],i=u.offsetWidth*r[0],a=u.offsetHeight*r[1],8>Math.abs(i-s)&&8>Math.abs(a-l)){w=r;break}A=!0,o.getDoc().selection.empty(),c(u,n,e)}function m(e){var n=e.srcElement;if(n!=b){if(g(),0===n.id.indexOf("mceResizeHandle"))return e.returnValue=!1,t;("IMG"==n.nodeName||"TABLE"==n.nodeName)&&(u(),b=n,f(n,"resizestart",h))}}function g(){p(b,"resizestart",h)}function v(e){var t;if(O){t=D.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function y(){b=C=null,O&&(g(),p(o.getBody(),"controlselect",m))}var b,C,x,w,_,N,E,k,S,T,R,A,B,L,H=o.dom,M=n.each,D=o.getDoc(),P=document,O=r.ie;x={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var I=".mce-content-body";return o.contentStyles.push(I+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"background: #FFF;"+"width: 5px;"+"height: 5px;"+"z-index: 10000"+"}"+I+" .mce-resizehandle:hover {"+"background: #000"+"}"+I+" img[data-mce-selected], hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+I+" .mce-clonedresizable {"+"position: absolute;"+(r.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"),o.on("init",function(){if(O)o.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(u(),v(e.target))}),f(o.getBody(),"controlselect",m);else try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}o.on("nodechange mousedown ResizeEditor",d),o.on("keydown keyup",function(e){b&&"TABLE"==b.nodeName&&d(e)})}),{controlSelect:v,destroy:y}}}),r(R,[d,k,T,m,f],function(e,n,r,i,o){function a(e,t,i,o){var a=this;a.dom=e,a.win=t,a.serializer=i,a.editor=o,a.controlSelection=new r(a,o),a.win.getSelection||(a.tridentSel=new n(a))}var s=o.each,l=o.grep,c=o.trim,u=i.ie,d=i.opera;return a.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var n,r,i,o=this,a=o.getRng(),s=o.dom.create("body"),l=o.getSel();return e=e||{},n=r="",e.get=!0,e.format=e.format||"html",e.selection=!0,o.editor.fire("BeforeGetContent",e),"text"==e.format?o.isCollapsed()?"":a.text||(l.toString?""+l:""):(a.cloneContents?(i=a.cloneContents(),i&&s.appendChild(i)):a.item!==t||a.htmlText!==t?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=""+a,/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(r=" "),e.getInner=!0,e.content=o.isCollapsed()?"":n+o.serializer.serialize(s,e)+r,o.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,r,i,o=this,a=o.getRng(),s=o.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||o.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(r=s.createDocumentFragment(),i=s.createElement("div"),r.appendChild(i),i.outerHTML=e,a.insertNode(r))),n=o.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),o.setRng(a),o.dom.remove("__caret");try{o.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=o.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),o.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||o.editor.fire("SetContent",t)},getStart:function(){var e,t,n,r,i=this,o=i.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for(n=o.duplicate(),n.collapse(1),e=n.parentElement(),e.ownerDocument!==i.dom.doc&&(e=i.dom.getRoot()),t=r=o.parentElement();r=r.parentNode;)if(r==e){e=t;break}return e}return e=o.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,o.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,r=n.getRng();return r.duplicate||r.item?r.item?r.item(0):(r=r.duplicate(),r.collapse(0),e=r.parentElement(),e.ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=r.endContainer,t=r.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){function n(e,t){var n=0;return s(h.select(e),function(e,r){e==t&&(n=r)}),n}function r(e){function t(t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function i(){function e(e,n){var i,o,a=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],l=[],c=0;if(3==a.nodeType){if(t)for(i=a.previousSibling;i&&3==i.nodeType;i=i.previousSibling)s+=i.nodeValue.length;l.push(s)}else o=a.childNodes,s>=o.length&&o.length&&(c=1,s=Math.max(0,o.length-1)),l.push(p.dom.nodeIndex(o[s],t)+c);for(;a&&a!=r;a=a.parentNode)l.push(p.dom.nodeIndex(a,t));return l}var n=p.getRng(!0),r=h.getRoot(),i={};return i.start=e(n,!0),p.isCollapsed()||(i.end=e(n)),i}var o,a,l,c,u,d,f,p=this,h=p.dom,m="&#xFEFF;";if(2==e)return d=p.getNode(),u=d.nodeName,"IMG"==u?{name:u,index:n(u,d)}:p.tridentSel?p.tridentSel.getBookmark(e):i();if(e)return{rng:p.getRng()};if(o=p.getRng(),l=h.uniqueId(),c=p.isCollapsed(),f="overflow:hidden;line-height:0px",o.duplicate||o.item){if(o.item)return d=o.item(0),u=d.nodeName,{name:u,index:n(u,d)};a=o.duplicate();try{o.collapse(),o.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+f+'">'+m+"</span>"),c||(a.collapse(!1),o.moveToElementText(a.parentElement()),0===o.compareEndPoints("StartToEnd",a)&&a.move("character",-1),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+f+'">'+m+"</span>"))}catch(g){return null}}else{if(d=p.getNode(),u=d.nodeName,"IMG"==u)return{name:u,index:n(u,d)};a=r(o.cloneRange()),c||(a.collapse(!1),a.insertNode(h.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:f},m))),o=r(o),o.collapse(!0),o.insertNode(h.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:f},m))}return p.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(e){function t(t){var n,r,a,s,l=e[t?"start":"end"];if(l){for(a=l[0],r=o,n=l.length-1;n>=1;n--){if(s=r.childNodes,l[n]>s.length-1)return;r=s[l[n]]}3===r.nodeType&&(a=Math.min(l[0],r.nodeValue.length)),1===r.nodeType&&(a=Math.min(l[0],r.childNodes.length)),t?i.setStart(r,a):i.setEnd(r,a)}return!0}function n(t){var n,r,i,o,u=m.get(e.id+"_"+t),h=e.keep;if(u&&(n=u.parentNode,"start"==t?(h?(n=u.firstChild,r=1):r=m.nodeIndex(u),a=c=n,f=p=r):(h?(n=u.firstChild,r=1):r=m.nodeIndex(u),c=n,p=r),!h)){for(o=u.previousSibling,i=u.nextSibling,s(l(u.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=m.get(e.id+"_"+t);)m.remove(u,1);o&&i&&o.nodeType==i.nodeType&&3==o.nodeType&&!d&&(r=o.nodeValue.length,o.appendData(i.nodeValue),m.remove(i),"start"==t?(a=c=o,f=p=r):(c=o,p=r))}}function r(e){return!m.isBlock(e)||e.innerHTML||u||(e.innerHTML='<br data-mce-bogus="1" />'),e}var i,o,a,c,f,p,h=this,m=h.dom;if(e)if(e.start){if(i=m.createRng(),o=m.getRoot(),h.tridentSel)return h.tridentSel.moveToBookmark(e);t(!0)&&t()&&h.setRng(i)}else e.id?(n("start"),n("end"),a&&(i=m.createRng(),i.setStart(r(a),f),i.setEnd(r(c),p),h.setRng(i))):e.name?h.select(m.select(e.name)[e.index]):e.rng&&h.setRng(e.rng)},select:function(n,r){function i(n,r){var i=new e(n,n);do{if(3==n.nodeType&&0!==c(n.nodeValue).length)return r?l.setStart(n,0):l.setEnd(n,n.nodeValue.length),t;if("BR"==n.nodeName)return r?l.setStartBefore(n):l.setEndBefore(n),t}while(n=r?i.next():i.prev())}var o,a=this,s=a.dom,l=s.createRng();if(n){if(!r&&a.controlSelection.controlSelect(n))return;o=s.nodeIndex(n),l.setStart(n.parentNode,o),l.setEnd(n.parentNode,o+1),r&&(i(n,1),i(n)),a.setRng(l)}return n},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,r=n.getRng();r.item&&(t=r.item(0),r=n.win.document.body.createTextRange(),r.moveToElementText(t)),r.collapse(!!e),n.setRng(r)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t,n,r,i=this,o=i.win.document;if(e&&i.tridentSel)return i.tridentSel.getRangeAt(0);try{(t=i.getSel())&&(n=t.rangeCount>0?t.getRangeAt(0):t.createRange?t.createRange():o.createRange())}catch(a){}return u&&n&&n.setStart&&o.selection.createRange().item&&(r=o.selection.createRange().item(0),n=o.createRange(),n.setStartBefore(r),n.setEndAfter(r)),n||(n=o.createRange?o.createRange():o.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(r=i.dom.getRoot(),n.setStart(r,0),n.setEnd(r,0)),i.selectedRange&&i.explicitRange&&(0===n.compareBoundaryPoints(n.START_TO_START,i.selectedRange)&&0===n.compareBoundaryPoints(n.END_TO_END,i.selectedRange)?n=i.explicitRange:(i.selectedRange=null,i.explicitRange=null)),n},setRng:function(e,n){var r,i=this;if(e.select)try{e.select()}catch(o){}else if(i.tridentSel){if(e.cloneRange)try{return i.tridentSel.addRange(e),t}catch(o){}}else if(r=i.getSel()){i.explicitRange=e;try{r.removeAllRanges()}catch(o){}r.addRange(e),n===!1&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),i.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,r=n.getRng(),i=r.startContainer,o=r.endContainer,a=r.startOffset,s=r.endOffset;return r?r.setStart?(t=r.commonAncestorContainer,!r.collapsed&&(i==o&&2>s-a&&i.hasChildNodes()&&(t=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?e(i.nextSibling,!0):i.parentNode,o=0===s?e(o.previousSibling,!1):o.parentNode,i&&i===o))?i:t&&3==t.nodeType?t.parentNode:t):r.item?r.item(0):r.parentElement():n.dom.getRoot()},getSelectedBlocks:function(t,n){var r,i=this,o=i.dom,a=[];if(t=o.getParent(t||i.getStart(),o.isBlock),n=o.getParent(n||i.getEnd(),o.isBlock),t&&a.push(t),t&&n&&t!=n){r=t;for(var s=new e(t,o.getRoot());(r=s.next())&&r!=n;)o.isBlock(r)&&a.push(r)}return n&&t!=n&&a.push(n),a},isForward:function(){var e,t,n=this.dom,r=this.getSel();return r&&r.anchorNode&&r.focusNode?(e=n.createRng(),e.setStart(r.anchorNode,r.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(r.focusNode,r.focusOffset),t.collapse(!0),0>=e.compareBoundaryPoints(e.START_TO_START,t)):!0},normalize:function(){function n(n){function s(t,n){for(var r=new e(t,g.getParent(t.parentNode,g.isBlock)||v);t=r[n?"prev":"next"]();)if("BR"===t.nodeName)return!0}function l(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function c(n,r){var a,s;for(r=r||u,a=new e(r,g.getParent(r.parentNode,g.isBlock)||v);p=a[n?"prev":"next"]();){if(3===p.nodeType&&p.nodeValue.length>0)return u=p,d=n?p.nodeValue.length:0,i=!0,t;if(g.isBlock(p)||h[p.nodeName.toLowerCase()])return;s=p}o&&s&&(u=s,i=!0,d=0)}var u,d,f,p,h,m,g=a.dom,v=g.getRoot();if(u=r[(n?"start":"end")+"Container"],d=r[(n?"start":"end")+"Offset"],h=g.schema.getNonEmptyElements(),9===u.nodeType&&(u=g.getRoot(),d=0),u===v){if(n&&(p=u.childNodes[d>0?d-1:0],p&&(m=p.nodeName.toLowerCase(),h[p.nodeName]||"TABLE"==p.nodeName)))return;if(u.hasChildNodes()&&(d=Math.min(!n&&d>0?d-1:d,u.childNodes.length-1),u=u.childNodes[d],d=0,u.hasChildNodes()&&!/TABLE/.test(u.nodeName))){p=u,f=new e(u,v);do{if(3===p.nodeType&&p.nodeValue.length>0){d=n?0:p.nodeValue.length,u=p,i=!0;break}if(h[p.nodeName.toLowerCase()]){d=g.nodeIndex(p),u=p.parentNode,"IMG"!=p.nodeName||n||d++,i=!0;break}}while(p=n?f.next():f.prev())}}o&&(3===u.nodeType&&0===d&&c(!0),1===u.nodeType&&(p=u.childNodes[d],!p||"BR"!==p.nodeName||l(p,"A")||s(p)||s(p,!0)||c(!0,u.childNodes[d]))),n&&!o&&3===u.nodeType&&d===u.nodeValue.length&&c(!1),i&&r["set"+(n?"Start":"End")](u,d)}var r,i,o,a=this;u||(r=a.getRng(),o=r.collapsed,n(!0),o||n(),i&&(o&&r.collapse(!0),a.setRng(r,a.isForward())))},selectorChanged:function(e,n){var r,i=this;return i.selectorChangedData||(i.selectorChangedData={},r={},i.editor.on("NodeChange",function(e){var n=e.element,o=i.dom,a=o.getParents(n,null,o.getRoot()),l={};s(i.selectorChangedData,function(e,n){s(a,function(i){return o.is(i,n)?(r[n]||(s(e,function(e){e(!0,{node:i,selector:n,parents:a})}),r[n]=e),l[n]=e,!1):t})}),s(r,function(e,t){l[t]||(delete r[t],s(e,function(e){e(!1,{node:n,selector:t,parents:a})}))})})),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(n),i},scrollIntoView:function(e){var t,n,r=this,i=r.dom;n=i.getViewPort(r.editor.getWin()),t=i.getPos(e).y,(n.y>t||t+25>n.y+n.h)&&r.editor.getWin().scrollTo(0,n.y>t?t:t-n.h+25)},destroy:function(){this.win=null,this.controlSelection.destroy()}},a}),r(A,[f],function(e){function n(e){this.walk=function(n,i){function o(e){var t;return t=e[0],3===t.nodeType&&t===g&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function s(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,n){var r=n?"nextSibling":"previousSibling";for(f=e,p=f.parentNode;f&&f!=t;f=p)p=f.parentNode,h=a(f==e?f:f[r],r),h.length&&(n||h.reverse(),i(o(h)))}var c,u,d,f,p,h,m,g=n.startContainer,v=n.startOffset,y=n.endContainer,b=n.endOffset;if(m=e.select("td.mce-item-selected,th.mce-item-selected"),m.length>0)return r(m,function(e){i([e])}),t;if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[v]),1==y.nodeType&&y.hasChildNodes()&&(y=y.childNodes[Math.min(b-1,y.childNodes.length-1)]),g==y)return i(o([g]));for(c=e.findCommonAncestor(g,y),f=g;f;f=f.parentNode){if(f===y)return l(g,c,!0);if(f===c)break}for(f=y;f;f=f.parentNode){if(f===g)return l(y,c);if(f===c)break}u=s(g,c)||g,d=s(y,c)||y,l(g,u,!0),h=a(u==g?u:u.nextSibling,"nextSibling",d==y?d.nextSibling:d),h.length&&i(o(h)),l(y,d)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset;return n==i&&3==n.nodeType?r>0&&n.nodeValue.length>r&&(i=t(n,r),n=i.previousSibling,o>r?(o-=r,n=i=t(i,o).previousSibling,o=i.nodeValue.length,r=0):o=0):(3==n.nodeType&&r>0&&n.nodeValue.length>r&&(n=t(n,r),r=0),3==i.nodeType&&o>0&&i.nodeValue.length>o&&(i=t(i,o).previousSibling,o=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:o}}}var r=e.each;return n.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},n}),r(B,[d,A,f],function(e,n,r){return function(i){function o(e){return e.nodeType&&(e=e.nodeName),!!i.schema.getTextBlockElements()[e.toLowerCase()]}function a(e,t){return V.getParents(e,t,V.getRoot())}function s(e){return 1===e.nodeType&&"_mce_caret"===e.id}function l(){d({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){et(n,function(t,n){V.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),et("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){d(e,{block:e,remove:"all"})}),d(i.settings.formats)}function c(){i.addShortcut("ctrl+b","bold_desc","Bold"),i.addShortcut("ctrl+i","italic_desc","Italic"),i.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)i.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);i.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),i.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),i.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function u(e){return e?z[e]:z}function d(e,t){e&&("string"!=typeof e?et(e,function(e,t){d(t,e)}):(t=t.length?t:[t],et(t,function(e){e.deep===I&&(e.deep=!e.selector),e.split===I&&(e.split=!e.selector||e.inline),e.remove===I&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),z[e]=t))}function f(e){var t;return i.dom.getParent(e,function(e){return t=i.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function p(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=f(e.parentNode),i.dom.getStyle(e,"color")&&t?i.dom.setStyle(e,"text-decoration",t):i.dom.getStyle(e,"textdecoration")===t&&i.dom.setStyle(e,"text-decoration",null))}function h(n,r,a){function l(e,t){t=t||b,e&&(t.onformat&&t.onformat(e,t,r,a),et(t.styles,function(t,n){V.setStyle(e,n,E(t,r))}),et(t.attributes,function(t,n){V.setAttrib(e,n,E(t,r))}),et(t.classes,function(t){t=E(t,r),V.hasClass(e,t)||V.addClass(e,t)}))}function c(){function t(t,n){var r=new e(n);for(a=r.current();a;a=r.prev())if(a.childNodes.length>1||a==t||"BR"==a.tagName)return a}var n=i.selection.getRng(),r=n.startContainer,o=n.endContainer;if(r!=o&&0===n.endOffset){var s=t(r,o),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function d(e,n,r,i,o){var a,s,l=[],c=-1,u=-1,d=-1;return et(e.childNodes,function(e,n){return"UL"===e.nodeName||"OL"===e.nodeName?(c=n,a=e,!1):t}),et(e.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==V.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?u=t:e.id==n.id+"_end"&&(d=t))}),0>=c||c>u&&d>c?(et(tt(e.childNodes),o),0):(s=V.clone(r,J),et(tt(e.childNodes),function(e,t){(c>u&&c>t||u>c&&t>c)&&(l.push(e),e.parentNode.removeChild(e))}),c>u?e.insertBefore(s,a):u>c&&e.insertBefore(s,a.nextSibling),i.push(s),et(l,function(e){s.appendChild(e)}),s)}function f(e,i,a){var c,u,f=[],p=!0;c=b.inline||b.block,u=V.create(c),l(u),q.walk(e,function(e){function h(e){var g,x,w,N,E;return E=p,g=e.nodeName.toLowerCase(),x=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&Z(e)&&(E=p,p="true"===Z(e),N=!0),_(g,"br")?(m=0,b.block&&V.remove(e),t):b.wrapper&&v(e,n,r)?(m=0,t):p&&!N&&b.block&&!b.wrapper&&o(g)&&$(x,c)?(e=V.rename(e,c),l(e),f.push(e),m=0,t):b.selector&&(et(y,function(t){"collapsed"in t&&t.collapsed!==C||V.is(e,t.selector)&&!s(e)&&(l(e,t),w=!0)}),!b.inline||w)?(m=0,t):(!p||N||!$(c,g)||!$(x,c)||!a&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||s(e)||b.inline&&j(e)?"li"==g&&i?m=d(e,i,u,f,h):(m=0,et(tt(e.childNodes),h),N&&(p=E),m=0):(m||(m=V.clone(u,J),e.parentNode.insertBefore(m,e),f.push(m)),m.appendChild(e)),t)}var m;et(e,h)}),b.wrap_links===!1&&et(f,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=V.clone(u,J),f.push(r),i=tt(e.childNodes),n=0;i.length>n;n++)r.appendChild(i[n]);e.appendChild(r)}et(tt(e.childNodes),t)}t(e)}),et(f,function(e){function i(e){var t=0;return et(e.childNodes,function(e){k(e)||L(e)||t++}),t}function o(e){var n,r;return et(e.childNodes,function(e){return 1!=e.nodeType||L(e)||s(e)?t:(n=e,J)}),n&&w(n,b)&&(r=V.clone(n,J),l(r),V.replace(r,e,Q),V.remove(n,1)),r||e}var a;if(a=i(e),(f.length>1||!j(e))&&0===a)return V.remove(e,1),t;if(b.inline||b.wrapper){if(b.exact||1!==a||(e=o(e)),et(y,function(t){et(V.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if("A"===n.nodeName)return;while(n=n.parentNode)}R(t,r,e,t.exact?e:null)})}),v(e.parentNode,n,r))return V.remove(e,1),e=0,Q;b.merge_with_parents&&V.getParent(e.parentNode,function(i){return v(i,n,r)?(V.remove(e,1),e=0,Q):t}),e&&b.merge_siblings!==!1&&(e=H(B(e),e),e=H(e,B(e,Q)))}})}var m,g,y=u(n),b=y[0],C=!a&&U.isCollapsed();if(b)if(a)a.nodeType?(g=V.createRng(),g.setStartBefore(a),g.setEndAfter(a),f(T(g,y),null,!0)):f(a,null,!0);else if(C&&b.inline&&!V.select("td.mce-item-selected,th.mce-item-selected").length)D("apply",n,r);else{var x=i.selection.getNode();K||!y[0].defaultBlock||V.getParent(x,V.isBlock)||h(y[0].defaultBlock),i.selection.setRng(c()),m=U.getBookmark(),f(T(U.getRng(Q),y),m),b.styles&&(b.styles.color||b.styles.textDecoration)&&(nt(x,p,"childNodes"),p(x)),U.moveToBookmark(m),P(U.getRng(Q)),i.nodeChanged()}}function m(e,n,r){function o(e){var t,r,i,a,s;if(1===e.nodeType&&Z(e)&&(a=C,C="true"===Z(e),s=!0),t=tt(e.childNodes),C&&!s)for(r=0,i=g.length;i>r&&!R(g[r],n,e,e);r++);if(b.deep&&t.length){for(r=0,i=t.length;i>r;r++)o(t[r]);s&&(C=a)}}function s(t){var r;return et(a(t.parentNode).reverse(),function(t){var i;r||"_start"==t.id||"_end"==t.id||(i=v(t,e,n),i&&i.split!==!1&&(r=t))}),r}function l(e,t,r,i){var o,a,s,l,c,u;if(e){for(u=e.parentNode,o=t.parentNode;o&&o!=u;o=o.parentNode){for(a=V.clone(o,J),c=0;g.length>c;c++)if(R(g[c],n,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!i||b.mixed&&j(e)||(t=V.split(e,t)),s&&(r.parentNode.insertBefore(s,r),l.appendChild(r))}return t}function c(e){return l(s(e),e,e,!0)}function d(e){var t=V.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return L(n)&&(n=n[e?"firstChild":"lastChild"]),V.remove(t,!0),n}function p(e){var t,n;e=T(e,g,Q),b.split&&(t=M(e,Q),n=M(e),t!=n?(/^(TR|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TD"==t.nodeName?t.firstChild||t:t.firstChild.firstChild||t),t=S(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=S(n,"span",{id:"_end","data-mce-type":"bookmark"}),c(t),c(n),t=d(Q),n=d()):t=n=c(t),e.startContainer=t.parentNode,e.startOffset=G(t),e.endContainer=n.parentNode,e.endOffset=G(n)+1),q.walk(e,function(e){et(e,function(e){o(e),1===e.nodeType&&"underline"===i.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===f(e.parentNode)&&R({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var h,m,g=u(e),b=g[0],C=!0;return r?(r.nodeType?(m=V.createRng(),m.setStartBefore(r),m.setEndAfter(r),p(m)):p(r),t):(U.isCollapsed()&&b.inline&&!V.select("td.mce-item-selected,th.mce-item-selected").length?D("remove",e,n):(h=U.getBookmark(),p(U.getRng(Q)),U.moveToBookmark(h),b.inline&&y(e,n,U.getStart())&&P(U.getRng(!0)),i.nodeChanged()),t)}function g(e,t,n){var r=u(e);!y(e,t,n)||"toggle"in r[0]&&!r[0].toggle?h(e,t,n):m(e,t,n)}function v(e,t,n,r){function i(e,t,i){var o,a,s,l=t[i];if(t.onmatch)return t.onmatch(e,t,i);if(l)if(l.length===I){for(o in l)if(l.hasOwnProperty(o)){if(a="attributes"===i?V.getAttrib(e,o):N(e,o),r&&!a&&!t.exact)return;if((!r||t.exact)&&!_(a,E(l[o],n)))return}}else for(s=0;l.length>s;s++)if("attributes"===i?V.getAttrib(e,l[s]):N(e,l[s]))return t;return t}var o,a,s,l=u(t);if(l&&e)for(a=0;l.length>a;a++)if(o=l[a],w(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(s=o.classes)for(a=0;s.length>a;a++)if(!V.hasClass(e,s[a]))return;return o}}function y(e,t,n){function r(n){return n=V.getParent(n,function(n){return!!v(n,e,t,!0)}),v(n,e,t)}var i;return n?r(n):(n=U.getNode(),r(n)?Q:(i=U.getStart(),i!=n&&r(i)?Q:J))}function b(e,t){var n,r=[],i={};return n=U.getStart(),V.getParent(n,function(n){var o,a;for(o=0;e.length>o;o++)a=e[o],!i[a]&&v(n,a,t)&&(i[a]=!0,r.push(a))},V.getRoot()),r}function C(e){var t,n,r,i,o,s=u(e);if(s)for(t=U.getStart(),n=a(t),i=s.length-1;i>=0;i--){if(o=s[i].selector,!o)return Q;for(r=n.length-1;r>=0;r--)if(V.is(n[r],o))return Q}return J}function x(e,n,r){var o;return O||(O={},o={},i.on("NodeChange",function(e){var n=a(e.element),r={};et(O,function(e,i){et(n,function(a){return v(a,i,{},e.similar)?(o[i]||(et(e,function(e){e(!0,{node:a,format:i,parents:n})}),o[i]=e),r[i]=e,!1):t})}),et(o,function(t,i){r[i]||(delete o[i],et(t,function(t){t(!1,{node:e.element,format:i,parents:n})}))})})),et(e.split(","),function(e){O[e]||(O[e]=[],O[e].similar=r),O[e].push(n)}),this}function w(e,n){return _(e,n.inline)?Q:_(e,n.block)?Q:n.selector?1==e.nodeType&&V.is(e,n.selector):t}function _(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function N(e,t){var n=V.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=V.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function E(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function k(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function S(e,t,n){var r=V.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function T(n,r,s){function l(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,i,o,a,s;if(n=i=e?v:b,a=e?"previousSibling":"nextSibling",s=V.getRoot(),3==n.nodeType&&!k(n)&&(e?y>0:n.nodeValue.length>C))return n;for(;;){if(!r[0].block_expand&&j(i))return i;for(o=i[a];o;o=o[a])if(!L(o)&&!k(o)&&!t(o))return i;if(i.parentNode==s){n=i;break}i=i.parentNode}return n}function c(e,t){for(t===I&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function u(e){for(var t=e;t;){if(1===t.nodeType&&Z(t))return"false"===Z(t)?t:e;t=t.parentNode}return e}function d(n,r,o){function a(e,n){var r,i,a=e.nodeValue;return n===t&&(n=o?a.length:0),o?(r=a.lastIndexOf(" ",n),i=a.lastIndexOf(" ",n),r=r>i?r:i,-1===r||s||r++):(r=a.indexOf(" ",n),i=a.indexOf(" ",n),r=-1!==r&&(-1===i||i>r)?r:i),r}var l,c,u,d;if(3===n.nodeType){if(u=a(n,r),-1!==u)return{container:n,offset:u};d=n}for(l=new e(n,V.getParent(n,j)||i.getBody());c=l[o?"prev":"next"]();)if(3===c.nodeType){if(d=c,u=a(c),-1!==u)return{container:c,offset:u}}else if(j(c))break;return d?(r=o?0:d.length,{container:d,offset:r}):t}function f(e,t){var i,o,s,l;for(3==e.nodeType&&0===e.nodeValue.length&&e[t]&&(e=e[t]),i=a(e),o=0;i.length>o;o++)for(s=0;r.length>s;s++)if(l=r[s],!("collapsed"in l&&l.collapsed!==n.collapsed)&&V.is(i[o],l.selector))return i[o];return e}function p(e,t){var n;if(r[0].wrapper||(n=V.getParent(e,r[0].block)),n||(n=V.getParent(3==e.nodeType?e.parentNode:e,o)),n&&r[0].wrapper&&(n=a(n,"ul,ol").reverse()[0]||n),!n)for(n=e;n[t]&&!j(n[t])&&(n=n[t],!_(n,"br")););return n||e}var h,m,g,v=n.startContainer,y=n.startOffset,b=n.endContainer,C=n.endOffset;if(1==v.nodeType&&v.hasChildNodes()&&(h=v.childNodes.length-1,v=v.childNodes[y>h?h:y],3==v.nodeType&&(y=0)),1==b.nodeType&&b.hasChildNodes()&&(h=b.childNodes.length-1,b=b.childNodes[C>h?h:C-1],3==b.nodeType&&(C=b.nodeValue.length)),v=u(v),b=u(b),(L(v.parentNode)||L(v))&&(v=L(v)?v:v.parentNode,v=v.nextSibling||v,3==v.nodeType&&(y=0)),(L(b.parentNode)||L(b))&&(b=L(b)?b:b.parentNode,b=b.previousSibling||b,3==b.nodeType&&(C=b.length)),r[0].inline&&(n.collapsed&&(g=d(v,y,!0),g&&(v=g.container,y=g.offset),g=d(b,C),g&&(b=g.container,C=g.offset)),m=c(b,C),m.node)){for(;m.node&&0===m.offset&&m.node.previousSibling;)m=c(m.node.previousSibling);m.node&&m.offset>0&&3===m.node.nodeType&&" "===m.node.nodeValue.charAt(m.offset-1)&&m.offset>1&&(b=m.node,b.splitText(m.offset-1))}return(r[0].inline||r[0].block_expand)&&(r[0].inline&&3==v.nodeType&&0!==y||(v=l(!0)),r[0].inline&&3==b.nodeType&&C!==b.nodeValue.length||(b=l())),r[0].selector&&r[0].expand!==J&&!r[0].inline&&(v=f(v,"previousSibling"),b=f(b,"nextSibling")),(r[0].block||r[0].selector)&&(v=p(v,"previousSibling"),b=p(b,"nextSibling"),r[0].block&&(j(v)||(v=l(!0)),j(b)||(b=l()))),1==v.nodeType&&(y=G(v),v=v.parentNode),1==b.nodeType&&(C=G(b)+1,b=b.parentNode),{startContainer:v,startOffset:y,endContainer:b,endOffset:C}}function R(e,n,r,i){var o,a,s;if(!w(r,e))return J;if("all"!=e.remove)for(et(e.styles,function(e,t){e=E(e,n),"number"==typeof t&&(t=e,i=0),(!i||_(N(i,t),e))&&V.setStyle(r,t,""),s=1}),s&&""===V.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),et(e.attributes,function(e,o){var a;if(e=E(e,n),"number"==typeof o&&(o=e,i=0),!i||_(V.getAttrib(i,o),e)){if("class"==o&&(e=V.getAttrib(r,o),e&&(a="",et(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(a+=(a?" ":"")+e)}),a)))return V.setAttrib(r,o,a),t;"class"==o&&r.removeAttribute("className"),X.test(o)&&r.removeAttribute("data-mce-"+o),r.removeAttribute(o)}}),et(e.classes,function(e){e=E(e,n),(!i||V.hasClass(i,e))&&V.removeClass(r,e)}),a=V.getAttribs(r),o=0;a.length>o;o++)if(0!==a[o].nodeName.indexOf("_"))return J;return"none"!=e.remove?(A(r,e),Q):t}function A(e,t){function n(e,t,n){return e=B(e,t,n),!e||"BR"==e.nodeName||j(e)}var r,i=e.parentNode;t.block&&(K?i==V.getRoot()&&(t.list_block&&_(e,t.list_block)||et(tt(e.childNodes),function(e){$(K,e.nodeName.toLowerCase())?r?r.appendChild(e):r=S(e,K):r=0})):j(e)&&!j(i)&&(n(e,J)||n(e.firstChild,Q,1)||e.insertBefore(V.create("br"),e.firstChild),n(e,Q)||n(e.lastChild,J,1)||e.appendChild(V.create("br")))),t.selector&&t.inline&&!_(t.inline,e)||V.remove(e,1)}function B(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!k(e))return e}function L(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function H(e,t){function n(e,t){function n(e){var t={};return et(V.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&(t[r]=V.getAttrib(e,r))}),t}function r(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],n===I)return J;if(e[r]!=n)return J;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return J;return Q}return e.nodeName!=t.nodeName?J:r(n(e),n(t))?r(V.parseStyle(V.getAttrib(e,"style")),V.parseStyle(V.getAttrib(t,"style")))?Q:J:J}function r(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!L(i))return i}return e}var i,o;if(e&&t&&(e=r(e,"previousSibling"),t=r(t,"nextSibling"),n(e,t))){for(i=e.nextSibling;i&&i!=t;)o=i,i=i.nextSibling,e.appendChild(o);return V.remove(t),et(tt(t.childNodes),function(t){e.appendChild(t)}),e}return t}function M(t,n){var r,o,a;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1==r.nodeType&&(a=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[o>a?a:o]),3===r.nodeType&&n&&o>=r.nodeValue.length&&(r=new e(r,i.getBody()).next()||r),3!==r.nodeType||n||0!==o||(r=new e(r,i.getBody()).prev()||r),r
}function D(t,n,r){function o(e){var t=V.create("span",{id:g,"data-mce-bogus":!0,style:y?"color:red":""});return e&&t.appendChild(i.getDoc().createTextNode(Y)),t}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==Y||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function s(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,r;if(e)r=U.getRng(!0),a(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),V.remove(e)):(n=l(e),n.nodeValue.charAt(0)===Y&&(n=n.deleteData(0,1)),V.remove(e,1)),U.setRng(r);else if(e=s(U.getStart()),!e)for(;e=V.get(g);)c(e,!1)}function d(){var e,t,i,a,c,d,f;e=U.getRng(!0),a=e.startOffset,d=e.startContainer,f=d.nodeValue,t=s(U.getStart()),t&&(i=l(t)),f&&a>0&&f.length>a&&/\w/.test(f.charAt(a))&&/\w/.test(f.charAt(a-1))?(c=U.getBookmark(),e.collapse(!0),e=T(e,u(n)),e=q.split(e),h(n,r,e),U.moveToBookmark(c)):(t&&i.nodeValue===Y?h(n,r,t):(t=o(!0),i=t.firstChild,e.insertNode(t),a=1,h(n,r,t)),U.setCursorLocation(i,a))}function f(){var e,t,i,a,s,l,c,d,f=U.getRng(!0),p=[];for(e=f.startContainer,t=f.startOffset,s=e,3==e.nodeType&&((t!=e.nodeValue.length||e.nodeValue===Y)&&(a=!0),s=s.parentNode);s;){if(v(s,n,r)){l=s;break}s.nextSibling&&(a=!0),p.push(s),s=s.parentNode}if(l)if(a)i=U.getBookmark(),f.collapse(!0),f=T(f,u(n),!0),f=q.split(f),m(n,r,f),U.moveToBookmark(i);else{for(d=o(),s=d,c=p.length-1;c>=0;c--)s.appendChild(V.clone(p[c],!1)),s=s.firstChild;s.appendChild(V.doc.createTextNode(Y)),s=s.firstChild,V.insertAfter(d,l),U.setCursorLocation(s,1)}}function p(){var e;e=s(U.getStart()),e&&!V.isEmpty(e)&&nt(e,function(e){1!=e.nodeType||e.id===g||V.isEmpty(e)||V.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",y=i.settings.caret_debug;i._hasCaretEvents||(W=function(){var e,t=[];if(a(s(U.getStart()),t))for(e=t.length;e--;)V.setAttrib(t[e],"data-mce-bogus","1")},F=function(e){var t=e.keyCode;c(),(8==t||37==t||39==t)&&c(s(U.getStart())),p()},i.on("SetContent",function(e){e.selection&&p()}),i._hasCaretEvents=!0),"apply"==t?d():f()}function P(n){var r,i,o,a,s,l=n.startContainer,c=n.startOffset;if(3==l.nodeType&&c>=l.nodeValue.length&&(c=G(l),l=l.parentNode,r=!0),1==l.nodeType)for(a=l.childNodes,l=a[Math.min(c,a.length-1)],i=new e(l,V.getParent(l,V.isBlock)),(c>a.length-1||r)&&i.next(),o=i.current();o;o=i.next())if(3==o.nodeType&&!k(o))return s=V.create("a",null,Y),o.parentNode.insertBefore(s,o),n.setStart(o,0),U.setRng(n),V.remove(s),t}var O,I,F,W,z={},V=i.dom,U=i.selection,q=new n(V),$=i.schema.isValidChild,j=V.isBlock,K=i.settings.forced_root_block,G=V.nodeIndex,Y="﻿",X=/^(src|href|style)$/,J=!1,Q=!0,Z=V.getContentEditable,et=r.each,tt=r.grep,nt=r.walk,rt=r.extend;rt(this,{get:u,register:d,apply:h,remove:m,toggle:g,match:y,matchAll:b,matchNode:v,canApply:C,formatChanged:x}),l(),c(),i.on("BeforeGetContent",function(){W&&W()}),i.on("mouseup keydown",function(e){F&&F(e)})}}),r(L,[m,f],function(e,n){var r,i=n.trim;return r=RegExp(["<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>","<div[^>]+data-mce-bogus[^>]+><\\/div>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(n){function o(){return i(n.getContent({format:"raw",no_events:1}).replace(r,""))}function a(){s.typing=!1,s.add()}var s,l,c=0,u=[];return n.on("init",function(){s.add()}),n.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s.beforeChange()}),n.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s.add()}),n.on("ObjectResizeStart",function(){s.beforeChange()}),n.on("SaveContent ObjectResized",a),n.dom.bind(n.dom.getRoot(),"dragend",a),n.dom.bind(n.getBody(),"focusout",function(){!n.removed&&s.typing&&a()}),n.on("KeyUp",function(t){var r=t.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||t.ctrlKey)&&(a(),n.nodeChanged()),(46==r||8==r||e.isMac&&(91==r||93==r))&&n.nodeChanged()}),n.on("KeyDown",function(e){var n=e.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?(s.typing&&a(),t):((16>n||n>20)&&224!=n&&91!=n&&!s.typing&&(s.beforeChange(),s.typing=!0,s.add()),t)}),n.on("MouseDown",function(){s.typing&&a()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),n.on("AddUndo Undo Redo ClearUndos MouseUp",function(e){e.isDefaultPrevented()||n.nodeChanged()}),s={data:u,typing:!1,beforeChange:function(){l=n.selection.getBookmark(2,!0)},add:function(e){var t,r,i=n.settings;if(e=e||{},e.content=o(),n.fire("BeforeAddUndo",{level:e}).isDefaultPrevented())return null;if(r=u[c],r&&r.content==e.content)return null;if(u[c]&&(u[c].beforeBookmark=l),i.custom_undo_redo_levels&&u.length>i.custom_undo_redo_levels){for(t=0;u.length-1>t;t++)u[t]=u[t+1];u.length--,c=u.length}return e.bookmark=n.selection.getBookmark(2,!0),u.length-1>c&&(u.length=c+1),u.push(e),c=u.length-1,n.fire("AddUndo",{level:e,lastLevel:r}),n.isNotDirty=0,e},undo:function(){var e;return s.typing&&(s.add(),s.typing=!1),c>0&&(e=u[--c],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),n.fire("undo",{level:e})),e},redo:function(){var e;return u.length-1>c&&(e=u[++c],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),n.fire("redo",{level:e})),e},clear:function(){u=[],c=0,s.typing=!1,n.fire("ClearUndos")},hasUndo:function(){return c>0||s.typing&&u[0]&&o()!=u[0].content},hasRedo:function(){return u.length-1>c&&!this.typing},transact:function(e){s.beforeChange(),e(),s.add()}}}}),r(H,[d,m],function(e,n){var r=n.ie;return function(n){function i(i){function d(e){return e&&o.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==o.getContentEditable(e)}function f(e){var t;o.isBlock(e)&&(t=a.getRng(),e.appendChild(o.create("span",null," ")),a.select(e),e.lastChild.outerHTML="",a.setRng(t))}function p(e){for(var t,n=e,r=[];n=n.firstChild;){if(o.isBlock(n))return;1!=n.nodeType||u[n.nodeName.toLowerCase()]||r.push(n)}for(t=r.length;t--;)n=r[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?o.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&o.remove(n)}function h(t){var n,r,i,s,l=t;if(i=o.createRng(),t.hasChildNodes()){for(n=new e(t,t);r=n.current();){if(3==r.nodeType){i.setStart(r,0),i.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}l=r,r=n.next()}r||(i.setStart(l,0),i.setEnd(l,0))}else"BR"==t.nodeName?t.nextSibling&&o.isBlock(t.nextSibling)?((!R||9>R)&&(s=o.create("br"),t.parentNode.insertBefore(s,t)),i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));a.setRng(i),o.remove(s),a.scrollIntoView(t)}function m(e){var t,n,i,a=k;if(t=e||"TABLE"==M?o.create(e||P):T.cloneNode(!1),i=t,s.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)){if("_mce_caret"==a.id)continue;n=a.cloneNode(!1),o.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(i=n,t.appendChild(n))}while(a=a.parentNode);return r||(i.innerHTML='<br data-mce-bogus="1">'),t}function g(t){var n,r,i;if(3==k.nodeType&&(t?S>0:k.nodeValue.length>S))return!1;if(k.parentNode==T&&O&&!t)return!0;if(t&&1==k.nodeType&&k==T.firstChild)return!0;if("TABLE"===k.nodeName||k.previousSibling&&"TABLE"==k.previousSibling.nodeName)return O&&!t||!O&&t;for(n=new e(k,T),3==k.nodeType&&(t&&0===S?n.prev():t||S!=k.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),u[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function v(e,t){var r,i,a,s,l,u,f=P||"P";if(i=o.getParent(e,o.isBlock),u=n.getBody().nodeName.toLowerCase(),!i||!d(i)){if(i=i||E,!i.hasChildNodes())return r=o.create(f),i.appendChild(r),I.setStart(r,0),I.setEnd(r,0),r;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!o.isBlock(s);)a=s,s=s.previousSibling;if(a&&c.isValidChild(u,f.toLowerCase())){for(r=o.create(f),a.parentNode.insertBefore(r,a),s=a;s&&!o.isBlock(s);)l=s.nextSibling,r.appendChild(s),s=l;I.setStart(e,t),I.setEnd(e,t)}}return e}function y(){function e(e){for(var t=H[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===T}function t(){var e=H.parentNode;return"LI"==e.nodeName?e:H}var n=H.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(P="LI"),B=P?m(P):o.create("BR"),e(!0)&&e()?"LI"==n?o.insertAfter(B,t()):o.replace(B,H):e(!0)?"LI"==n?(o.insertAfter(B,t()),B.appendChild(o.doc.createTextNode(" ")),B.appendChild(H)):H.parentNode.insertBefore(B,H):e()?(o.insertAfter(B,t()),f(B)):(H=t(),N=I.cloneRange(),N.setStartAfter(T),N.setEndAfter(H),L=N.extractContents(),o.insertAfter(L,H),o.insertAfter(B,H)),o.remove(T),h(B),l.add()}function b(){for(var t,n=new e(k,T);t=n.next();)if(u[t.nodeName.toLowerCase()]||t.length>0)return!0}function C(){var e,t,n;k&&3==k.nodeType&&S>=k.nodeValue.length&&(r||b()||(e=o.create("br"),I.insertNode(e),I.setStartAfter(e),I.setEndAfter(e),t=!0)),e=o.create("br"),I.insertNode(e),r&&"PRE"==M&&(!R||8>R)&&e.parentNode.insertBefore(o.doc.createTextNode("\r"),e),n=o.create("span",{},"&nbsp;"),e.parentNode.insertBefore(n,e),a.scrollIntoView(n),o.remove(n),t?(I.setStartBefore(e),I.setEndBefore(e)):(I.setStartAfter(e),I.setEndAfter(e)),a.setRng(I),l.add()}function x(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function w(e){var t,n,r=o.getRoot();for(t=e;t!==r&&"false"!==o.getContentEditable(t);)"true"===o.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==r?n:r}function _(e){var t;r||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(o.getStyle(t,"float",!0)))&&o.add(e,"br"))}var N,E,k,S,T,R,A,B,L,H,M,D,P,O,I=a.getRng(!0);if(!I.collapsed)return n.execCommand("Delete"),t;if(!i.isDefaultPrevented()&&(k=I.startContainer,S=I.startOffset,P=(s.force_p_newlines?"p":"")||s.forced_root_block,P=P?P.toUpperCase():"",R=o.doc.documentMode,A=i.shiftKey,1==k.nodeType&&k.hasChildNodes()&&(O=S>k.childNodes.length-1,k=k.childNodes[Math.min(S,k.childNodes.length-1)]||k,S=O&&3==k.nodeType?k.nodeValue.length:0),E=w(k))){if(l.beforeChange(),!o.isBlock(E)&&E!=o.getRoot())return(!P||A)&&C(),t;if((P&&!A||!P&&A)&&(k=v(k,S)),T=o.getParent(k,o.isBlock),H=T?o.getParent(T.parentNode,o.isBlock):null,M=T?T.nodeName.toUpperCase():"",D=H?H.nodeName.toUpperCase():"","LI"!=D||i.ctrlKey||(T=H,M=D),"LI"==M){if(!P&&A)return C(),t;if(o.isEmpty(T))return y(),t}if("PRE"==M&&s.br_in_pre!==!1){if(!A)return C(),t}else if(!P&&!A&&"LI"!=M||P&&A)return C(),t;P&&T===n.getBody()||(P=P||"P",g()?(B=/^(H[1-6]|PRE|FIGURE)$/.test(M)&&"HGROUP"!=D?m(P):m(),s.end_container_on_empty_block&&d(H)&&o.isEmpty(T)?B=o.split(H,T):o.insertAfter(B,T),h(B)):g(!0)?(B=T.parentNode.insertBefore(m(),T),f(B)):(N=I.cloneRange(),N.setEndAfter(T),L=N.extractContents(),x(L),B=L.firstChild,o.insertAfter(L,T),p(B),_(T),h(B)),o.setAttrib(B,"id",""),l.add())}}var o=n.dom,a=n.selection,s=n.settings,l=n.undoManager,c=n.schema,u=c.getNonEmptyElements();n.on("keydown",function(e){13==e.keyCode&&i(e)!==!1&&e.preventDefault()})}}),r(M,[],function(){return function(e){function t(){var t,s,l,c,u,d,f,p,h,m,g,v,y=i.getStart(),b=e.getBody(),C=-16777215;if(v=n.forced_root_block,y&&1===y.nodeType&&v){for(;y&&y!=b;){if(a[y.nodeName])return;y=y.parentNode}if(t=i.getRng(),t.setStart){s=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset;try{h=e.getDoc().activeElement===b}catch(x){}}else t.item&&(y=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(y)),h=t.parentElement().ownerDocument===e.getDoc(),m=t.duplicate(),m.collapse(!0),l=-1*m.move("character",C),m.collapsed||(m=t.duplicate(),m.collapse(!1),u=-1*m.move("character",C)-l);for(y=b.firstChild,g=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!a[y.nodeName])&&o.isValidChild(g,v.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){f=y,y=y.nextSibling,r.remove(f);continue}d||(d=r.create(v),y.parentNode.insertBefore(d,y),p=!0),f=y,y=y.nextSibling,d.appendChild(f)}else d=null,y=y.nextSibling;if(p&&h){if(t.setStart)t.setStart(s,l),t.setEnd(c,u),i.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",l),u>0&&t.moveEnd("character",u),t.select()}catch(x){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,o=e.schema,a=o.getBlockElements();n.forced_root_block&&e.on("KeyUp NodeChange",t)}}),r(D,[N,m,f],function(e,n,r){var i=r.each,o=r.extend,a=r.map,s=r.inArray,l=r.explode,c=n.gecko,u=n.ie,d=!0,f=!1;return function(n){function r(e,t,n){var r;return e=e.toLowerCase(),(r=N.exec[e])?(r(e,t,n),d):f}function p(e){var t;return e=e.toLowerCase(),(t=N.state[e])?t(e):-1}function h(e){var t;return e=e.toLowerCase(),(t=N.value[e])?t(e):f}function m(e,t){t=t||"exec",i(e,function(e,n){i(n.toLowerCase().split(","),function(n){N[t][n]=e})})}function g(e,r,i){return r===t&&(r=f),i===t&&(i=null),n.getDoc().execCommand(e,r,i)}function v(e){return k.match(e)}function y(e,r){k.toggle(e,r?{value:r}:t),n.nodeChanged()}function b(e){x=_.getBookmark(e)}function C(){_.moveToBookmark(x)}var x,w=n.dom,_=n.selection,N={state:{},exec:{},value:{}},E=n.settings,k=n.formatter;o(this,{execCommand:r,queryCommandState:p,queryCommandValue:h,addCommands:m}),m({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var t,r=n.getDoc();try{g(e)}catch(i){t=d}(t||!r.queryCommandSupported(e))&&(c?n.windowManager.confirm(n.getLang("clipboard_msg"),function(e){e&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):n.windowManager.alert("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."))},unlink:function(e){_.isCollapsed()&&_.select(_.getNode()),g(e),_.collapse(f)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),i("left,center,right,justify".split(","),function(e){t!=e&&k.remove("align"+e)}),y("align"+t),r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;g(e),t=w.getParent(_.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),w.split(n,t),C()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=l(E.font_size_style_values),r=l(E.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),y(e,n)},RemoveFormat:function(e){k.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=_.getBookmark();n.setContent(n.getContent({cleanup:d}),{cleanup:d}),_.moveToBookmark(e)},mceRemoveNode:function(e,t,r){var i=r||_.getNode();i!=n.getBody()&&(b(),n.dom.remove(i,d),C())},mceSelectNodeDepth:function(e,r,i){var o=0;w.getParent(_.getNode(),function(e){return 1==e.nodeType&&o++==i?(_.select(e),f):t},n.getBody())},mceSelectNode:function(e,t,n){_.select(n)},mceInsertContent:function(t,r,i){function o(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=_.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r.length>i?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}var a,s,l,c,d,f,p,h,m,g,v,y,b,C;if(/^ | $/.test(i)&&(i=o(i)),a=n.parser,s=new e({},n.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',f={content:i,format:"html",selection:!0},n.fire("BeforeSetContent",f),i=f.content,-1==i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),_.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),l=_.getNode(),f={context:l.nodeName.toLowerCase()},d=a.parse(i,f),v=d.lastChild,"mce_marker"==v.attr("id"))for(p=v,v=v.prev;v;v=v.walk(!0))if(3==v.type||!w.isBlock(v.name)){v.parent.insert(p,v,"br"===v.name);break}if(f.invalid){for(_.setContent(b),l=_.getNode(),c=n.getBody(),9==l.nodeType?l=v=c:v=l;v!==c;)l=v,v=v.parentNode;i=l==c?c.innerHTML:w.getOuterHTML(l),i=s.serialize(a.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return s.serialize(d)}))),l==c?w.setHTML(c,i):w.setOuterHTML(l,i)}else i=s.serialize(d),v=l.firstChild,y=l.lastChild,!v||v===y&&"BR"===v.nodeName?w.setHTML(l,i):_.setContent(i);p=w.get("mce_marker"),h=w.getRect(p),m=w.getViewPort(n.getWin()),(h.y+h.h>m.y+m.h||h.y<m.y||h.x>m.x+m.w||h.x<m.x)&&(C=u?n.getDoc().documentElement:n.getBody(),C.scrollLeft=h.x,C.scrollTop=h.y-m.h+25),g=w.createRng(),v=p.previousSibling,v&&3==v.nodeType?(g.setStart(v,v.nodeValue.length),u||(y=p.nextSibling,y&&3==y.nodeType&&(v.appendData(y.data),y.parentNode.removeChild(y)))):(g.setStartBefore(p),g.setEndBefore(p)),w.remove(p),_.setRng(g),n.fire("SetContent",f),n.addVisual()},mceInsertRawHTML:function(e,t,r){_.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return r}))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(e,t,r){n.setContent(r)},"Indent,Outdent":function(e){var t,n,r;t=E.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),p("InsertUnorderedList")||p("InsertOrderedList")?g(e):(E.forced_root_block||w.getParent(_.getNode(),w.isBlock)||k.apply("div"),i(_.getSelectedBlocks(),function(i){var o;"LI"!=i.nodeName&&(o="rtl"==w.getStyle(i,"direction",!0)?"paddingRight":"paddingLeft","outdent"==e?(r=Math.max(0,parseInt(i.style[o]||0,10)-t),w.setStyle(i,o,r?r+n:"")):(r=parseInt(i.style[o]||0,10)+t+n,w.setStyle(i,o,r)))}))},mceRepaint:function(){if(c)try{b(d),_.getSel()&&_.getSel().selectAllChildren(n.getBody()),_.collapse(d),C()}catch(e){}},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,r){n.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,_.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=w.getParent(_.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||k.remove("link"),n.href&&k.apply("link",n,r)},selectAll:function(){var e=w.getRoot(),t=w.createRng();_.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),_.setRng(t)):g("SelectAll")},mceNewDocument:function(){n.setContent("")}}),m({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=_.isCollapsed()?[w.getParent(_.getNode(),w.isBlock)]:_.getSelectedBlocks(),r=a(n,function(e){return!!k.matchNode(e,t)});return-1!==s(r,d)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return v(e)},mceBlockQuote:function(){return v("blockquote")},Outdent:function(){var e;if(E.inline_styles){if((e=w.getParent(_.getStart(),w.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return d;if((e=w.getParent(_.getEnd(),w.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return d}return p("InsertUnorderedList")||p("InsertOrderedList")||!E.inline_styles&&!!w.getParent(_.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=w.getParent(_.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),m({"FontSize,FontName":function(e){var t,n=0;return(t=w.getParent(_.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),m({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),r(P,[f],function(e){function n(e,o){var a,s,l=this;return e=i(e),o=l.settings=o||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?(l.source=e,t):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(o.base_uri?o.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(s=o.base_uri?o.base_uri.path:new n(location.href).directory,e=(o.base_uri&&o.base_uri.protocol||"http")+"://mce_host"+l.toAbsPath(s,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),r(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),l[t]=r}),a=o.base_uri,a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),l.port||"mce_host"!==l.host||(l.port=a.port),l.host&&"mce_host"!==l.host||(l.host=a.host),l.source=""),t)}var r=e.each,i=e.trim;return n.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,r=this;if("./"===e)return e;if(e=new n(e,{base_uri:r}),"mce_host"!=e.host&&r.host!=e.host&&e.host||r.port!=e.port||r.protocol!=e.protocol)return e.getURI();var i=r.getURI(),o=e.getURI();return i==o||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==o?i:(t=r.toRelPath(r.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new n(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;i>r;r++)if(r>=n.length||e[r]!=n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;i>r;r++)if(r>=e.length||e[r]!=n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);i>r;r++)a+="../";for(r=o-1,i=n.length;i>r;r++)a+=r!=o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,i,o,a=0,s=[];for(i=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),r(e,function(e){e&&s.push(e)}),e=s,n=t.length-1,s=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?a>0?a--:s.push(t[n]):a++);return n=e.length-a,o=0>=n?s.reverse().join("/"):e.slice(0,n).join("/")+"/"+s.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},n}),r(O,[f],function(e){function t(){}var n,r,i=e.each,o=e.extend;return t.extend=n=function(e){function t(){var e,t,n,i;if(!r&&(i=this,i.init&&i.init.apply(i,arguments),t=i.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(i,arguments)}function a(){return this}function s(e,t){return function(){var n,r=this,i=r._super;return r._super=f[e],n=t.apply(r,arguments),r._super=i,n}}var l,c,u,d=this,f=d.prototype;r=!0,l=new d,r=!1,e.Mixins&&(i(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&i(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&i(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,r=this;return e!==t?(r[n]=e,r):r[n]}}),e.Statics&&i(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=o({},f.Defaults,e.Defaults));for(c in e)u=e[c],l[c]="function"==typeof u&&f[c]?s(c,u):u;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),r(I,[O,f],function(e,n){function r(e){for(var t,n=[],r=e.length;r--;)t=e[r],t.__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}var i,o=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=/^\s*|\s*$/g,l=e.extend({init:function(e){function n(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):t}function r(e){return e?function(t){return t._name===e}:t}function i(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):t}function l(e,n,r){return e?function(t){var i=t[e]?t[e]():"";return n?"="===n?i===r:"*="===n?i.indexOf(r)>=0:"~="===n?(" "+i+" ").indexOf(" "+r+" ")>=0:"!="===n?i!=r:"^="===n?0===i.indexOf(r):"$="===n?i.substr(i.length-r.length)===r:!1:!!r}:t}function c(e){var n;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(n=d(e[1],[]),function(e){return!f(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?0===n%2:"odd"===e?1===n%2:t[e]?t[e]():!1})):t}function u(e,t,a){function u(e){e&&t.push(e)}var d;return d=o.exec(e.replace(s,"")),u(n(d[1])),u(r(d[2])),u(i(d[3])),u(l(d[4],d[5],d[6])),u(c(d[7])),t.psuedo=!!d[7],t.direct=a,t}function d(e,t){var n,r,i,o=[];do if(a.exec(""),r=a.exec(e),r&&(e=r[3],o.push(r[1]),r[2])){n=r[3];break}while(r);for(n&&d(n,t),e=[],i=0;o.length>i;i++)">"!=o[i]&&e.push(u(o[i],[],">"===o[i-1]));return t.push(e),t}var f=this.match;this._selectors=d(e,[])},match:function(e,t){var r,i,o,a,s,l,c,u,d,f,p,h,m;for(t=t||this._selectors,r=0,i=t.length;i>r;r++){for(s=t[r],a=s.length,m=e,h=0,o=a-1;o>=0;o--)for(u=s[o];m;){for(u.psuedo&&(p=m.parent().items(),d=n.inArray(m,p),f=p.length),l=0,c=u.length;c>l;l++)if(!u[l](m,d,f)){l=c+1;break}if(l===c){h++;break}if(o===a-1)break;m=m.parent()}if(h===a)return!0}return!1},find:function(e){function t(e,n,r){var i,o,s,l,c,u=n[r];for(i=0,o=e.length;o>i;i++){for(c=e[i],s=0,l=u.length;l>s;s++)if(!u[s](c,i,o)){s=l+1;break}if(s===l)r==n.length-1?a.push(c):c.items&&t(c.items(),n,r+1);else if(u.direct)return;c.items&&t(c.items(),n,r)}}var n,o,a=[],s=this._selectors;if(e.items){for(n=0,o=s.length;o>n;n++)t(e.items(),s[n],0);o>1&&(a=r(a))}return i||(i=l.Collection),new i(a)}});return l}),r(F,[f,I,O],function(e,n,r){var i,o,a=Array.prototype.push,s=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?a.apply(n,t):t instanceof i?n.add(t.toArray()):a.call(n,t),n},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;r>t;t++)delete n[t];return n},filter:function(e){var t,r,o,a,s=this,l=[];for("string"==typeof e?(e=new n(e),a=function(t){return e.match(t)}):a=e,t=0,r=s.length;r>t;t++)o=s[t],a(o)&&l.push(o);return new i(l)},slice:function(){return new i(s.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,n){var r,i,o=this;return n!==r?(o.each(function(t){t[e]&&t[e](n)}),o):(i=o[0],i&&i[e]?i[e]():t)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){o[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name width height disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),i=r.extend(o),n.Collection=i,i}),r(W,[f,g],function(e,t){return{id:function(){return t.DOM.uniqueId()},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){return t.DOM.getSize(e)},getPos:function(e,n){return t.DOM.getPos(e,n)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)}}}),r(z,[O,f,F,W],function(e,n,r,i){var o=n.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu"," "),a={},s="onmousewheel"in document,l=!1,c=e.extend({Statics:{controlIdLookup:{}},classPrefix:"mce-",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t;e&&!(t=c.controlIdLookup[e.id]);)e=e.parentNode;return t},init:function(e){var r,o,a=this;if(a.settings=e=n.extend({},a.Defaults,e),a._id=i.id(),a._text=a._name="",a._width=a._height=0,a._aria={role:e.role},r=e.classes)for(r=r.split(" "),r.map={},o=r.length;o--;)r.map[r[o]]=!0;a._classes=r||[],a.visible(!0),n.each("title text width height name classes visible disabled active value".split(" "),function(t){var n,r=e[t];r!==n?a[t](r):a["_"+t]===n&&(a["_"+t]=!1)}),a.on("click",function(){return a.disabled()?!1:t}),e.classes&&n.each(e.classes.split(" "),function(e){a.addClass(e)}),a.settings=e,a._borderBox=a.parseBox(e.border),a._paddingBox=a.parseBox(e.padding),a._marginBox=a.parseBox(e.margin),e.hidden&&a.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml,refresh",parseBox:function(e){var t,n=10;return e?"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0}):void 0},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseInt(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e,n,r,i,o,a,s,l,c,u=this,d=u.settings,f=u.getEl();e=u._borderBox=u._borderBox||u.measureBox(f,"border"),u._paddingBox=u._paddingBox||u.measureBox(f,"padding"),u._marginBox=u._marginBox||u.measureBox(f,"margin"),l=d.minWidth,c=d.minHeight,o=l||f.offsetWidth,a=c||f.offsetHeight,r=d.width,i=d.height,s=d.autoResize,s=s!==t?s:!r&&!i,r=r||o,i=i||a;var p=e.left+e.right,h=e.top+e.bottom,m=d.maxWidth||65535,g=d.maxHeight||65535;return u._layoutRect=n={x:d.x||0,y:d.y||0,w:r,h:i,deltaW:p,deltaH:h,contentW:r-p,contentH:i-h,innerW:r-p,innerH:i-h,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(o,m),minH:Math.min(a,g),maxW:m,maxH:g,autoResize:s,scrollW:0},u._lastLayoutRect={},n},layoutRect:function(e){var t,n,r,i,o,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),e?(r=l.deltaW,i=l.deltaH,e.x!==o&&(l.x=e.x),e.y!==o&&(l.y=e.y),e.minW!==o&&(l.minW=e.minW),e.minH!==o&&(l.minH=e.minH),n=e.w,n!==o&&(n=l.minW>n?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-r),n=e.h,n!==o&&(n=l.minH>n?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-i),n=e.innerW,n!==o&&(n=l.minW-r>n?l.minW-r:n,n=n>l.maxW-r?l.maxW-r:n,l.innerW=n,l.w=n+r),n=e.innerH,n!==o&&(n=l.minH-i>n?l.minH-i:n,n=n>l.maxH-i?l.maxH-i:n,l.innerH=n,l.h=n+i),e.contentW!==o&&(l.contentW=e.contentW),e.contentH!==o&&(l.contentH=e.contentH),t=s._lastLayoutRect,(t.x!==l.x||t.y!==l.y||t.w!==l.w||t.h!==l.h)&&(a=c.repaintControls,a&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),s):l},repaint:function(){var e,t,n,r,i,o=this,a=0,s=0;e=o.getEl().style,n=o._layoutRect,i=o._lastRepaintRect||{},r=o._borderBox,a=r.left+r.right,s=r.top+r.bottom,n.x!==i.x&&(e.left=n.x+"px",i.x=n.x),n.y!==i.y&&(e.top=n.y+"px",i.y=n.y),n.w!==i.w&&(e.width=n.w-a+"px",i.w=n.w),n.h!==i.h&&(e.height=n.h-s+"px",i.h=n.h),o._hasBody&&n.innerW!==i.innerW&&(t=o.getEl("body").style,t.width=n.innerW+"px",i.innerW=n.innerW),o._hasBody&&n.innerH!==i.innerH&&(t=t||o.getEl("body").style,t.height=n.innerH+"px",i.innerH=n.innerH),o._lastRepaintRect=i,o.fire("repaint",{},!1)},on:function(e,n){function r(e){var n,r;return function(i){return n||c.parents().each(function(i){var o=i.settings.callbacks;return o&&(n=o[e])?(r=i,!1):t}),n.call(r,i)}}var i,a,s,l,c=this;if(n)for("string"==typeof n&&(n=r(n)),s=e.toLowerCase().split(" "),l=s.length;l--;)e=s[l],i=c._bindings,i||(i=c._bindings={}),a=i[e],a||(a=i[e]=[]),a.push(n),o[e]&&(c._nativeEvents?c._nativeEvents[e]=!0:c._nativeEvents={name:!0},c._rendered&&c.bindPendingEvents());return c},off:function(e,t){var n,r,i,o,a,s=this,l=s._bindings;
if(l)if(e)for(o=e.toLowerCase().split(" "),n=o.length;n--;){if(e=o[n],r=l[e],!e){for(i in l)l[i].length=0;return s}if(r)if(t)for(a=r.length;a--;)r[a]===t&&r.splice(a,1);else r.length=0}else s._bindings=[];return s},fire:function(e,t,n){function r(){return!1}function i(){return!0}var o,a,s,l,c=this;if(e=e.toLowerCase(),t=t||{},t.type||(t.type=e),t.control||(t.control=c),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=i},t.stopPropagation=function(){t.isPropagationStopped=i},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=i},t.isDefaultPrevented=r,t.isPropagationStopped=r,t.isImmediatePropagationStopped=r),c._bindings&&(s=c._bindings[e]))for(o=0,a=s.length;a>o&&(t.isImmediatePropagationStopped()||s[o].call(c,t)!==!1);o++);if(n!==!1)for(l=c.parent();l&&!t.isPropagationStopped();)l.fire(e,t,!1),l=l.parent();return t},parents:function(e){var t=this,n=new r;for(t=t.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n,r,i=this;return e=this.classPrefix+e,n=i._classes[t||"control"],n||(n=[],n.map={},i._classes[t||"control"]=n),n.map[e]||(n.map[e]=e,n.push(e),i._rendered&&(r=i.getEl(t),r&&(r.className=n.join(" ")))),i},removeClass:function(e,t){var n,r,i,o=this;if(e=this.classPrefix+e,n=o._classes[t||"control"],n&&n.map[e])for(delete n.map[e],r=n.length;r--;)n[r]===e&&n.splice(r,1);return o._rendered&&(i=o.getEl(t),i&&(i.className=n.join(" "))),o},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},getEl:function(e,t){var n,r=e?this._id+"-"+e:this._id;return n=a[r]=(t===!0?null:a[r])||i.get(r)},visible:function(e){var n,r=this;return e!==t?(r._visible!==e&&(r._rendered&&(r.getEl().style.display=e?"":"none"),r._visible=e,n=r.parent(),n&&(n._lastRect=null),r.fire(e?"show":"hide")),r):r._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}},blur:function(){this.getEl().blur()},aria:function(e,n){var r=this,i=r.getEl();return n===t?r._aria[e]:(r._aria[e]=n,r._rendered&&("label"==e&&i.setAttribute("aria-labeledby",r._id),i.setAttribute("role"==e?e:"aria-"+e,n)),r)},encode:function(e,t){return t!==!1&&c.translate&&(e=c.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t=this,n=t.getEl(),r=t.parent();if(t.items)for(var o=t.items().toArray(),a=o.length;a--;)o[a].remove();return r&&r.items&&(e=[],r.items().each(function(n){n!==t&&e.push(n)}),r.items().set(e),r._lastRect=null),t._eventsRoot&&t._eventsRoot==t&&i.off(n),delete c.controlIdLookup[t._id],n.parentNode&&n.parentNode.removeChild(n),t},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(i.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(i.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,n,r,o,a=this,s=a.settings;for(r in s)0===r.indexOf("on")&&a.on(r.substr(2),s[r]);if(a._eventsRoot){for(n=a.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)a._nativeEvents[r]=!0}a.bindPendingEvents(),s.style&&(e=a.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),a._visible||i.css(a.getEl(),"display","none"),a.settings.border&&(t=a.borderBox(),i.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),c.controlIdLookup[a._id]=a;for(var l in a._aria)a.aria(l,a._aria[l]);a.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n,r,i,o,a,s,l=this.getEl(),c=l.parentNode,u=t(l,c);n=u.x,r=u.y,i=l.offsetWidth,o=l.offsetHeight,a=c.clientWidth,s=c.clientHeight,"end"==e?(n-=a-i,r-=s-o):"center"==e&&(n-=a/2-i/2,r-=s/2-o/2),c.scrollLeft=n,c.scrollTop=r},bindPendingEvents:function(){function e(e){var t=p.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function n(e){var t,n,r,i=p.getParentCtrl(e.target),o=u._lastHoverCtrl,a=0;if(i!==o){if(u._lastHoverCtrl=i,n=i.parents().toArray().reverse(),n.push(i),o){for(r=o.parents().toArray().reverse(),r.push(o),a=0;r.length>a&&n[a]===r[a];a++);for(t=r.length-1;t>=a;t--)o=r[t],o.fire("mouseleave",{target:o.getEl()})}for(t=a;n.length>t;t++)i=n[t],i.fire("mouseenter",{target:i.getEl()})}}function r(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=p.fire("wheel",e)}var o,a,c,u,d,f,p=this;if(p._rendered=!0,d=p._nativeEvents){for(c=p.parents().toArray(),c.unshift(p),o=0,a=c.length;!u&&a>o;o++)u=c[o]._eventsRoot;for(u||(u=c[c.length-1]||p),p._eventsRoot=u,a=o,o=0;a>o;o++)c[o]._eventsRoot=u;for(f in d){if(!d)return!1;"wheel"!==f||l?("mouseenter"===f||"mouseleave"===f?u._hasMouseEnter||(i.on(u.getEl(),"mouseleave",t),i.on(u.getEl(),"mouseover",n),u._hasMouseEnter=1):u[f]||(i.on(u.getEl(),f,e),u[f]=!0),d[f]=!1):s?i.on(p.getEl(),"mousewheel",r):i.on(p.getEl(),"DOMMouseScroll",r)}}},reflow:function(){return this.repaint(),this}});return c}),r(V,[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,r){var i,o,a;if(!e){a=tinymce.ui;for(o in a)t[o.toLowerCase()]=a[o];e=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=t[n],!i)throw Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(U,[z,F,I,V,f,W],function(e,n,r,i,o,a){var s={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var t=this;t._super(e),e=t.settings,t._items=new n,t.addClass("container"),t.addClass("container-body","body"),e.containerCls&&t.addClass(e.containerCls),t._layout=i.create((e.layout||t.layout)+"layout"),t.settings.items&&t.add(t.settings.items),t._hasBody=!0},items:function(){return this._items},find:function(e){return e=s[e]=s[e]||new r(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(){var e=this;return e.keyNav?e.keyNav.focusFirst():e._super(),e},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,r=this,a=[];return o.isArray(t)||(t=[t]),o.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=o.extend({},r.settings.defaults,t),t.type=n.type=n.type||t.type||r.settings.defaultType||(n.defaults?n.defaults.type:null),t=i.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=a.createFragment(t.renderHtml()),r.hasChildNodes()&&r.childNodes.length-1>=n?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,i,o,a=this;return e=a.create(e),r=a.items(),n||(t+=1),t>=0&&r.length>t&&(i=r.slice(0,t).toArray(),o=r.slice(t).toArray(),r.set(i.concat(e,o))),a.renderNew()},preRender:function(){},renderHtml:function(){var e=this,t=e._layout;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" role="'+this.settings.role+'">'+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&a.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),a.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,n=e._layoutRect,r=e._lastRect;return r&&r.w==n.w&&r.h==n.h?t:(e._layout.recalc(e),n=e.layoutRect(),e._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0)},reflow:function(){var t,n;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},n=this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(q,[W],function(e){function n(){var e,t,n,r,i,o,a,s,l=document,c=Math.max;return e=l.documentElement,t=l.body,n=c(e.scrollWidth,t.scrollWidth),r=c(e.clientWidth,t.clientWidth),i=c(e.offsetWidth,t.offsetWidth),o=c(e.scrollHeight,t.scrollHeight),a=c(e.clientHeight,t.clientHeight),s=c(e.offsetHeight,t.offsetHeight),{width:i>n?r:n,height:s>o?a:o}}return function(r,i){function o(){return p.getElementById(i.handle||r)}var a,s,l,c,u,d,f,p=document;i=i||{},l=function(t){var r,l,h=n();t.preventDefault(),s=t.button,r=o(),d=t.screenX,f=t.screenY,l=window.getComputedStyle?window.getComputedStyle(r,null).getPropertyValue("cursor"):r.runtimeStyle.cursor,a=p.createElement("div"),e.css(a,{position:"absolute",top:0,left:0,width:h.width,height:h.height,zIndex:65535,opacity:1e-4,background:"red",cursor:l}),p.body.appendChild(a),e.on(p,"mousemove",u),e.on(p,"mouseup",c),i.start(t)},u=function(e){return e.button!==s?c(e):(e.deltaX=e.screenX-d,e.deltaY=e.screenY-f,e.preventDefault(),i.drag(e),t)},c=function(t){e.off(p,"mousemove",u),e.off(p,"mouseup",c),a.parentNode.removeChild(a),i.stop&&i.stop(t)},this.destroy=function(){e.off(o())},e.on(o(),"mousedown",l)}}),r($,[W,q],function(e,n){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function r(){function n(n,s,l,c,u,d){var f,p,h,m,g,v,y,b,C;if(p=o.getEl("scroll"+n)){if(b=s.toLowerCase(),C=l.toLowerCase(),o.getEl("absend")&&e.css(o.getEl("absend"),b,o.layoutRect()[c]-1),!u)return e.css(p,"display","none"),t;e.css(p,"display","block"),f=o.getEl("body"),h=o.getEl("scroll"+n+"t"),m=f["client"+l]-2*a,m-=r&&i?p["client"+d]:0,g=f["scroll"+l],v=m/g,y={},y[b]=f["offset"+s]+a,y[C]=m,e.css(p,y),y={},y[b]=f["scroll"+s]*v,y[C]=m*v,e.css(h,y)}}var r,i,s;s=o.getEl("body"),r=s.scrollWidth>s.clientWidth,i=s.scrollHeight>s.clientHeight,n("h","Left","Width","contentW",r,"Height"),n("v","Top","Height","contentH",i,"Width")}function i(){function t(t,r,i,s,l){var c,u=o._id+"-scroll"+t,d=o.classPrefix;o.getEl().appendChild(e.createFragment('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+t+'">'+'<div id="'+u+'t" class="'+d+'scrollbar-thumb"></div>'+"</div>")),o.draghelper=new n(u+"t",{start:function(){c=o.getEl("body")["scroll"+r],e.addClass(e.get(u),d+"active")},drag:function(e){var n,u,d,f,p=o.layoutRect();u=p.contentW>p.innerW,d=p.contentH>p.innerH,f=o.getEl("body")["client"+i]-2*a,f-=u&&d?o.getEl("scroll"+t)["client"+l]:0,n=f/o.getEl("body")["scroll"+i],o.getEl("body")["scroll"+r]=c+e["delta"+s]/n},stop:function(){e.removeClass(e.get(u),d+"active")}})}o.addClass("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height")}var o=this,a=2;o.settings.autoScroll&&(o._hasScroll||(o._hasScroll=!0,i(),o.on("wheel",function(e){var t=o.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,r()}),e.on(o.getEl("body"),"scroll",r)),r())}}}),r(j,[U,$],function(e,n){var r=e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[n],fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,n={};return e.find("*").each(function(e){var r=e.name(),i=e.value();r&&i!==t&&(n[r]=i)}),n},renderHtml:function(){var e=this,n=e._layout,r=e.settings.html;return e.preRender(),n.preRender(e),r===t?r='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+n.renderHtml(e)+"</div>":("function"==typeof r&&(r=r.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e._preBodyHtml||"")+r+"</div>"}});return r}),r(K,[W],function(e){return{moveRel:function(t,n){var r,i,o,a,s,l,c,u,d=this;return i=e.getPos(t),o=i.x,a=i.y,r=d.getEl(),s=r.offsetWidth,l=r.offsetHeight,c=t.offsetWidth,u=t.offsetHeight,n=(n||"").split(""),"b"===n[0]&&(a+=u),"r"===n[1]&&(o+=c),"c"===n[0]&&(a+=Math.round(u/2)),"c"===n[1]&&(o+=Math.round(c/2)),"b"===n[3]&&(a-=l),"r"===n[4]&&(o-=s),"c"===n[3]&&(a-=Math.round(l/2)),"c"===n[4]&&(o-=Math.round(s/2)),d.moveTo(o,a),d},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(e,t){var n=this;return n._rendered?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}}}),r(G,[W],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(Y,[j,K,G,W],function(e,t,n,r){function i(e){var t;for(t=l.length;t--;)l[t]===e&&l.splice(t,1)}var o,a,s,l=[],c=[],u=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t,n=u.zIndex||65535;if(c.length)for(e=0;c.length>e;e++)c[e].modal&&(n++,t=c[e]),c[e].getEl().style.zIndex=n,c[e].zIndex=n,n++;var i=document.getElementById(d.classPrefix+"modal-block");t?r.css(i,"z-index",t.zIndex-1):i&&(i.parentNode.removeChild(i),s=!1),u.currentZIndex=n}function n(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function i(e){var t=document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop;e.settings.autofix&&(t>(e._absY||e.layoutRect().y)?(e._absY=e._absY||e.layoutRect().y,e.getEl().style.position="fixed",e.layoutRect({y:0}).repaint()):(e.getEl().style.position="absolute",e.layoutRect({y:e._absY}).repaint()))}var d=this;d._super(e),d._eventsRoot=d,d.addClass("floatpanel"),e.autohide&&(o||(o=function(e){var t,r=d.getParentCtrl(e.target);for(t=l.length;t--;){var i=l[t];if(i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;i.hide()}}},r.on(document,"click",o)),l.push(d)),e.autofix&&(a||(a=function(){var e;for(e=l.length;e--;)i(l[e])},r.on(window,"scroll",a)),d.on("move",function(){i(this)})),d.on("postrender show",function(e){if(e.control==d){var n,i=d.classPrefix;d.modal&&!s&&(n=r.createFragment('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>'),n=n.firstChild,d.getContainerElm().appendChild(n),setTimeout(function(){r.addClass(n,i+"in"),r.addClass(d.getEl(),i+"in")},0),s=!0),c.push(d),t()}}),d.on("close hide",function(e){if(e.control==d){for(var n=c.length;n--;)c[n]===d&&c.splice(n,1);t()}}),e.popover&&(d._preBodyHtml='<div class="'+d.classPrefix+'arrow"></div>',d.addClass("popover").addClass("bottom").addClass("start"))},show:function(){var e,t=this,n=t._super();for(e=l.length;e--&&l[e]!==t;);return-1===e&&l.push(t),n},hide:function(){return i(this),this._super()},hideAll:function(){u.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){i(this),this._super()}});return u.hideAll=function(){for(var e=l.length;e--;){var t=l[e];t.settings.autohide&&(t.fire("cancel",{},!1),t.hide(),l.splice(e,1))}},u}),r(X,[W],function(e){return function(n){function r(){if(!g)if(g=[],p.find)p.find("*").each(function(e){e.canFocus&&g.push(e.getEl())});else for(var e=p.getEl().getElementsByTagName("*"),t=0;e.length>t;t++)e[t].id&&e[t]&&g.push(e[t])}function i(){return document.getElementById(f)}function o(e){return e=e||i(),e&&e.getAttribute("role")}function a(e){for(var t,n=e||i();n=n.parentNode;)if(t=o(n))return t}function s(e){var n=document.getElementById(f);return n?n.getAttribute("aria-"+e):t}function l(){var t=i();return!t||"TEXTAREA"!=t.nodeName&&"text"!=t.type?(n.onAction?n.onAction(f):e.fire(i(),"click",{keyboard:!0}),!0):void 0}function c(){var e;n.onCancel?((e=i())&&e.blur(),n.onCancel()):n.root.fire("cancel")}function u(e){var t,i,o=-1;for(r(),i=g.length;i--;)if(g[i].id===f){o=i;break}o+=e,0>o?o=g.length-1:o>=g.length&&(o=0),t=g[o],t.focus(),f=t.id,n.actOnFocus&&l()}function d(){var e,i;for(i=o(n.root.getEl()),r(),e=g.length;e--;)if("toolbar"==i&&g[e].id===f)return g[e].focus(),t;g[0].focus()}var f,p=n.root,h=n.enableUpDown!==!1,m=n.enableLeftRight!==!1,g=n.items;return p.on("keydown",function(e){var t,r=37,i=39,d=38,f=40,p=27,g=14,v=13,y=32,b=9;switch(e.keyCode){case r:m&&(n.leftAction?n.leftAction():u(-1),t=!0);break;case i:m&&("menuitem"==o()&&"menu"==a()?s("haspopup")&&l():u(1),t=!0);break;case d:h&&(u(-1),t=!0);break;case f:h&&("menuitem"==o()&&"menubar"==a()?l():"button"==o()&&s("haspopup")?l():u(1),t=!0);break;case b:t=!0,e.shiftKey?u(-1):u(1);break;case p:t=!0,c();break;case g:case v:case y:t=l()}t&&(e.stopPropagation(),e.preventDefault())}),p.on("focusin",function(e){r(),f=e.target.id}),{moveFocus:u,focusFirst:d,cancel:c}}}),r(J,[Y,j,W,X,q],function(e,n,r,i,o){var a=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.addClass("window"),e.buttons&&(t.statusbar=new n({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.addClass("foot"),t.statusbar.parent(t)),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()}),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,i=this,o=i.statusbar;i._fullscreen&&(i.layoutRect(r.getWindowSize()),i.layoutRect().contentH=i.layoutRect().innerH),i._super(),e=i.layoutRect(),i.settings.title&&!i._fullscreen&&(t=e.headerW,t>e.w&&(i.layoutRect({w:t}),n=!0)),o&&(o.layoutRect({w:i.layoutRect().innerW}).recalc(),t=o.layoutRect().minW+e.deltaW,t>e.w&&(i.layoutRect({w:t}),n=!0)),n&&i.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),i=0;t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),n.headerW=e.offsetWidth,n.headerH=e.offsetHeight,i+=n.headerH),t.statusbar&&(i+=t.statusbar.layoutRect().h),n.deltaH+=i,n.minH+=i,n.h+=i;var o=r.getWindowSize();return n.x=Math.max(0,o.w/2-n.w/2),n.y=Math.max(0,o.h/2-n.h/2),n},renderHtml:function(){var e=this,n=e._layout,r=e._id,i=e.classPrefix,o=e.settings,a="",s="",l=o.html;return e.preRender(),n.preRender(e),o.title&&(a='<div id="'+r+'-head" class="'+i+'window-head">'+'<div class="'+i+'title">'+e.encode(o.title)+"</div>"+'<button type="button" class="'+i+'close" aria-hidden="true">&times;</button>'+'<div id="'+r+'-dragh" class="'+i+'dragh"></div>'+"</div>"),o.url&&(l='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),l===t&&(l=n.renderHtml(e)),e.statusbar&&(s=e.statusbar.renderHtml()),'<div id="'+r+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+a+'<div id="'+r+'-body" class="'+e.classes("body")+'">'+l+"</div>"+s+"</div>"},fullscreen:function(e){var t,n,i=this,o=document.documentElement,a=i.classPrefix;if(e!=i._fullscreen)if(r.on(window,"resize",function(){var e;if(i._fullscreen)if(t)i._timer||(i._timer=setTimeout(function(){var e=r.getWindowSize();i.moveTo(0,0).resizeTo(e.w,e.h),i._timer=0},50));else{e=(new Date).getTime();var n=r.getWindowSize();i.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=i.layoutRect(),i._fullscreen=e,e){i._initial={x:n.x,y:n.y,w:n.w,h:n.h},i._borderBox=i.parseBox("0"),i.getEl("head").style.display="none",n.deltaH-=n.headerH+2,r.addClass(o,a+"fullscreen"),r.addClass(document.body,a+"fullscreen"),i.addClass("fullscreen");var s=r.getWindowSize();i.moveTo(0,0).resizeTo(s.w,s.h)}else i._borderBox=i.parseBox(i.settings.border),i.getEl("head").style.display="",n.deltaH+=n.headerH,r.removeClass(o,a+"fullscreen"),r.removeClass(document.body,a+"fullscreen"),i.removeClass("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h);return i.reflow()},postRender:function(){var e,t,n,r=this,a=[];setTimeout(function(){r.addClass("in")},0),r.keyboardNavigation=new i({root:r,enableLeftRight:!1,enableUpDown:!1,items:a,onCancel:function(){r.close()}}),r.find("*").each(function(n){n.canFocus&&(t=t||n.settings.autofocus,e=e||n,"filepicker"==n.type?(a.push(n.getEl("inp")),n.getEl("open")&&a.push(n.getEl("open").firstChild)):a.push(n.getEl()))}),r.statusbar&&r.statusbar.find("*").each(function(n){n.canFocus&&(t=t||n.settings.autofocus,e=e||n,a.push(n.getEl()))}),r._super(),r.statusbar&&r.statusbar.postRender(),!t&&e&&e.focus(),this.dragHelger=new o(r._id+"-dragh",{start:function(){n={x:r.layoutRect().x,y:r.layoutRect().y}},drag:function(e){r.moveTo(n.x+e.deltaX,n.y+e.deltaY)}}),r.on("submit",function(e){e.isDefaultPrevented()||r.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this;e._super(),e.dragHelger.destroy(),e.statusbar&&this.statusbar.remove()}});return a}),r(Q,[J],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onClose:n.onClose}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(Z,[J,Q],function(e,t){return function(n){var r=this,i=[];r.windows=i,r.open=function(t){var r;return t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",minWidth:50,onclick:function(){r.find("form")[0].submit(),r.close()}},{text:"Cancel",onclick:function(){r.close()}}]),r=new e(t),i.push(r),r.on("close",function(){for(var e=i.length;e--;)i[e]===r&&i.splice(e,1);n.focus()}),t.data&&r.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),n.nodeChanged(),r.renderTo(document.body).reflow()},r.alert=function(e,n,r){t.alert(e,function(){n.call(r||this)})},r.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},r.close=function(){i.length&&i[window.length-1].win.close()}}}),r(et,[S,A,b,h,m,f],function(e,n,r,i,o,a){return function(s){function l(e,t){try{s.getDoc().execCommand(e,!1,t)}catch(n){}}function c(){var e=s.getDoc().documentMode;return e?e:6}function u(e){return e.isDefaultPrevented()}function d(){function t(e){function t(){if(3==l.nodeType){if(e&&c==l.length)return!0;if(!e&&0===c)return!0}}var n,r,i,o,l,c,u;n=F.getRng();var d=[n.startContainer,n.startOffset,n.endContainer,n.endOffset];if(n.collapsed||(e=!0),l=n[(e?"start":"end")+"Container"],c=n[(e?"start":"end")+"Offset"],3==l.nodeType&&(r=I.getParent(n.startContainer,I.isBlock),e&&(r=I.getNext(r,I.isBlock)),!r||!t()&&n.collapsed||(i=I.create("em",{id:"__mceDel"}),D(a.grep(r.childNodes),function(e){i.appendChild(e)}),r.appendChild(i))),n=I.createRng(),n.setStart(d[0],d[1]),n.setEnd(d[2],d[3]),F.setRng(n),s.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),i){for(o=F.getBookmark();u=I.get("__mceDel");)I.remove(u,!0);F.moveToBookmark(o)}}s.on("keydown",function(n){var r;r=n.keyCode==O,u(n)||!r&&n.keyCode!=P||e.modifierPressed(n)||(n.preventDefault(),t(r))}),s.addCommand("Delete",function(){t()})}function f(){function e(e){var t=I.create("body"),n=e.cloneContents();return t.appendChild(n),F.serializer.serialize(t,{format:"html"})}function t(t){var n=e(t),r=I.createRng();r.selectNode(s.getBody());var i=e(r);return n===i}s.on("keydown",function(e){var n,r=e.keyCode;if(!u(e)&&(r==O||r==P)){if(n=s.selection.isCollapsed(),n&&!I.isEmpty(s.getBody()))return;if(q&&!n)return;if(!n&&!t(s.selection.getRng()))return;e.preventDefault(),s.setContent(""),s.selection.setCursorLocation(s.getBody(),0),s.nodeChanged()}})}function p(){s.on("keydown",function(t){!u(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),s.execCommand("SelectAll"))})}function h(){s.settings.content_editable||(I.bind(s.getDoc(),"focusin",function(){F.setRng(F.getRng())}),I.bind(s.getDoc(),"mousedown",function(e){e.target==s.getDoc().documentElement&&(s.getWin().focus(),F.setRng(F.getRng()))}))}function m(){s.on("keydown",function(e){if(!u(e)&&e.keyCode===P&&F.isCollapsed()&&0===F.getRng(!0).startOffset){var t=F.getNode(),n=t.previousSibling;n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(I.remove(n),e.preventDefault())}})}function g(){window.Range.prototype.getClientRects||s.on("mousedown",function(e){if(!u(e)&&"HTML"===e.target.nodeName){var t=s.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function v(){s.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&F.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&I.hasClass(e,"mceItemAnchor")&&F.select(e),s.nodeChanged()})}function y(){function e(){var e=I.getAttribs(F.getStart().cloneNode(!1));return function(){var t=F.getStart();t!==s.getBody()&&(I.setAttrib(t,"style",null),D(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!F.isCollapsed()&&I.getParent(F.getStart(),I.isBlock)!=I.getParent(F.getEnd(),I.isBlock)}s.on("keypress",function(r){var i;return u(r)||8!=r.keyCode&&46!=r.keyCode||!n()?t:(i=e(),s.getDoc().execCommand("delete",!1,null),i(),r.preventDefault(),!1)}),I.bind(s.getDoc(),"cut",function(t){var r;!u(t)&&n()&&(r=e(),setTimeout(function(){r()},0))})}function b(){var e,t;s.on("selectionchange",function(){t&&(clearTimeout(t),t=0),t=window.setTimeout(function(){var t=F.getRng();e&&n.compareRanges(t,e)||(s.nodeChanged(),e=t)},50)})}function C(){document.body.setAttribute("role","application")}function x(){s.on("keydown",function(e){if(!u(e)&&e.keyCode===P&&F.isCollapsed()&&0===F.getRng(!0).startOffset){var t=F.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function w(){c()>7||(l("RespectVisibilityInDesign",!0),s.contentStyles.push(".mceHideBrInPre pre br {display: none}"),I.addClass(s.getBody(),"mceHideBrInPre"),z.addNodeFilter("pre",function(e){for(var t,n,i,o,a=e.length;a--;)for(t=e[a].getAll("br"),n=t.length;n--;)i=t[n],o=i.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":i.parent.insert(new r("#text",3),i,!0).value="\n"}),V.addNodeFilter("pre",function(e){for(var t,n,r,i,o=e.length;o--;)for(t=e[o].getAll("br"),n=t.length;n--;)r=t[n],i=r.prev,i&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))}))}function _(){I.bind(s.getBody(),"mouseup",function(){var e,t=F.getNode();"IMG"==t.nodeName&&((e=I.getStyle(t,"width"))&&(I.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),I.setStyle(t,"width","")),(e=I.getStyle(t,"height"))&&(I.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),I.setStyle(t,"height","")))})}function N(){s.on("keydown",function(t){var n,r,i,o,a,l,c,d;if(n=t.keyCode==O,!u(t)&&(n||t.keyCode==P)&&!e.modifierPressed(t)&&(r=F.getRng(),i=r.startContainer,o=r.startOffset,c=r.collapsed,3==i.nodeType&&i.nodeValue.length>0&&(0===o&&!c||c&&o===(n?0:1)))){if(l=i.previousSibling,l&&"IMG"==l.nodeName)return;d=s.schema.getNonEmptyElements(),t.preventDefault(),a=I.create("br",{id:"__tmp"}),i.parentNode.insertBefore(a,i),s.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),i=F.getRng().startContainer,l=i.previousSibling,l&&1==l.nodeType&&!I.isBlock(l)&&I.isEmpty(l)&&!d[l.nodeName.toLowerCase()]&&I.remove(l),I.remove("__tmp")}})}function E(){s.on("keydown",function(t){var n,r,i,o,a;if(!u(t)&&t.keyCode==e.BACKSPACE&&(n=F.getRng(),r=n.startContainer,i=n.startOffset,o=I.getRoot(),a=r,n.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(s.formatter.toggle("blockquote",null,a),n=I.createRng(),n.setStart(r,0),n.setEnd(r,0),F.setRng(n))}})}function k(){function e(){s._refreshContentEditable(),l("StyleWithCSS",!1),l("enableInlineTableEditing",!1),W.object_resizing||l("enableObjectResizing",!1)}W.readonly||s.on("BeforeExecCommand MouseDown",e)}function S(){function e(){D(I.select("a"),function(e){var t=e.parentNode,n=I.getRoot();if(t.lastChild===e){for(;t&&!I.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}I.add(t,"br",{"data-mce-bogus":1})}})}s.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function T(){W.forced_root_block&&s.on("init",function(){l("DefaultParagraphSeparator",W.forced_root_block)})}function R(){s.on("Undo Redo SetContent",function(e){e.initial||s.execCommand("mceRepaint")})}function A(){s.on("keydown",function(e){var t;u(e)||e.keyCode!=P||(t=s.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),s.undoManager.beforeChange(),I.remove(t.item(0)),s.undoManager.add()))})}function B(){var e;c()>=10&&(e="",D("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),s.contentStyles.push(e+"{padding-right: 1px !important}"))}function L(){9>c()&&(z.addNodeFilter("noscript",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),V.addNodeFilter("noscript",function(e){for(var t,n,o,a=e.length;a--;)t=e[a],n=e[a].firstChild,n?n.value=i.decode(n.value):(o=t.attributes.map["data-mce-innertext"],o&&(t.attr("data-mce-innertext",null),n=new r("#text",3),n.value=o,n.raw=!0,t.append(n)))}))}function H(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",i)>0?r.setEndPoint("StartToStart",i):r.setEndPoint("EndToEnd",i),r.select())):n()}function n(){var e=a.selection.createRange();i&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&i.select(),I.unbind(a,"mouseup",n),I.unbind(a,"mousemove",t),i=r=0}var r,i,o,a=I.doc,s=a.body;a.documentElement.unselectable=!0,I.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(r&&n(),o=a.documentElement,o.scrollHeight>o.clientHeight)return;r=1,i=e(s.x,s.y),i&&(I.bind(a,"mouseup",n),I.bind(a,"mousemove",t),I.win.focus(),i.select())}})}function M(){s.on("keyup focusin",function(t){65==t.keyCode&&e.metaKeyPressed(t)||F.normalize()})}var D=a.each,P=e.BACKSPACE,O=e.DELETE,I=s.dom,F=s.selection,W=s.settings,z=s.parser,V=s.serializer,U=o.gecko,q=o.ie,$=o.webkit;x(),E(),f(),M(),$&&(N(),d(),h(),v(),T(),o.iOS?b():p()),q&&(m(),C(),w(),_(),A(),B(),L(),H()),U&&(m(),g(),y(),k(),S(),R())}}),r(tt,[f],function(e){function t(){return!1}function n(){return!0}var r="__bindings",i=e.makeMap("focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave keydown keypress keyup contextmenu dragend dragover draggesture dragdrop drop drag"," ");return{fire:function(e,i,o){var a,s,l,c,u,d=this;if(e=e.toLowerCase(),i=i||{},i.type=e,i.target||(i.target=d),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n
},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),d[r]&&(a=d[r][e]))for(s=0,l=a.length;l>s&&(a[s]=c=a[s],!i.isImmediatePropagationStopped());s++)if(c.call(d,i)===!1)return i.preventDefault(),i;if(o!==!1&&d.parent)for(u=d.parent();u&&!i.isPropagationStopped();)u.fire(e,i,!1),u=u.parent();return i},on:function(e,t){var n,o,a,s,l=this;if(t===!1&&(t=function(){return!1}),t)for(a=e.toLowerCase().split(" "),s=a.length;s--;)e=a[s],n=l[r],n||(n=l[r]={}),o=n[e],o||(o=n[e]=[],l.bindNative&&i[e]&&l.bindNative(e)),o.push(t);return l},off:function(e,t){var n,o,a,s,l,c=this,u=c[r];if(u)if(e)for(s=e.toLowerCase().split(" "),n=s.length;n--;){if(e=s[n],o=u[e],!e){for(a in u)u[e].length=0;return c}if(o){if(t)for(l=o.length;l--;)o[l]===t&&o.splice(l,1);else o.length=0;!o.length&&c.unbindNative&&i[e]&&(c.unbindNative(e),delete u[e])}}else{if(c.unbindNative)for(e in u)c.unbindNative(e);c[r]=[]}return c}}}),r(nt,[f,m],function(e,n){var r=e.each,i=e.explode,o={f9:120,f10:121,f11:122};return function(e){var a=this,s={};e.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&r(s,function(r){var i=n.isMac?e.metaKey:e.ctrlKey;return r.ctrl==i&&r.alt==e.altKey&&r.shift==e.shiftKey?e.keyCode==r.keyCode||e.charCode&&e.charCode==r.charCode?(e.preventDefault(),"keydown"==e.type&&r.func.call(r.scope),!0):t:void 0})}),a.add=function(t,n,a,l){var c;return c=a,"string"==typeof a?a=function(){e.execCommand(c,!1,null)}:a.length&&(a=function(){e.execCommand(c[0],c[1],c[2])}),r(i(t.toLowerCase()),function(t){var c={func:a,scope:l||e,desc:e.translate(n),alt:!1,ctrl:!1,shift:!1};r(i(t,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":c[e]=!0;break;default:c.charCode=e.charCodeAt(0),c.keyCode=o[e]||e.toUpperCase().charCodeAt(0)}}),s[(c.ctrl?"ctrl":"")+","+(c.alt?"alt":"")+","+(c.shift?"shift":"")+","+c.keyCode]=c}),!0}}}),r(rt,[g,y,b,E,N,R,B,L,H,M,D,P,v,s,Z,C,w,et,m,f,tt,nt],function(e,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,C,x,w){function _(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu/.test(t)?e.getDoc():e.getBody()}function N(e,t,r){var i,o,a=this;i=a.documentBaseUrl=r.documentBaseURL,o=r.baseURI,a.settings=t=T({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:i,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",directionality:"ltr",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a,ie7_compat:!0},t),n.settings=t,n.baseURL=r.baseURL,a.id=t.id=e,a.isNotDirty=!1,a.plugins={},a.documentBaseURI=new f(t.document_base_url||i,{base_uri:o}),a.baseURI=o,a.contentCSS=[],a.contentStyles=[],a.shortcuts=new w(a),a.execCommands={},a.queryStateCommands={},a.queryValueCommands={},a.suffix=r.suffix,a.editorManager=r,a.inline=t.inline,a.execCallback("setup",a)}var E=e.DOM,k=n.ThemeManager,S=n.PluginManager,T=C.extend,R=C.each,A=C.explode,B=C.inArray,L=C.trim,H=C.resolve,M=h.Event,D=b.gecko,P=b.ie,O=b.opera;return N.prototype={render:function(){function e(){var e=p.ScriptLoader;r.language&&e.add(n.editorManager.baseURL+"/langs/"+r.language+".js"),r.theme&&"function"!=typeof r.theme&&"-"!=r.theme.charAt(0)&&!k.urls[r.theme]&&k.load(r.theme,"themes/"+r.theme+"/theme"+o+".js"),C.isArray(r.plugins)&&(r.plugins=r.plugins.join(" ")),R(r.plugins.split(/[ ,]/),function(e){if(e=L(e),e&&!S.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=S.dependencies(e);R(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"};e=S.createUrl(t,e),S.load(e.resource,e)})}else S.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,r=n.settings,i=n.id,o=n.suffix;if(!M.domLoaded)return E.bind(window,"ready",function(){n.render()}),t;if(n.editorManager.settings=r,n.getElement()&&b.contentEditable){r.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||E.getParent(i,"form");a&&(n.formElement=a,r.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&E.insertAfter(E.create("input",{type:"hidden",name:i}),i),n.formEventDelegate=function(e){n.fire(e.type,e)},E.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!r.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=1,a._mceOldSubmit(a)})),n.windowManager=new m(n),"xml"==r.encoding&&n.on("GetContent",function(e){e.save&&(e.content=E.encode(e.content))}),r.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&(n.save(),n.isNotDirty=1)}),r.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0})},n.editorManager.on("BeforeUnload",n._beforeUnload)),e()}},init:function(){function e(t){var n,r,i=S.get(t);n=S.urls[t]||d.documentBaseUrl.replace(/\/$/,""),t=L(t),i&&-1===B(h,t)&&(R(S.dependencies(t),function(t){e(t)}),r=new i(d,n),d.plugins[t]=r,r.init&&(r.init(d,n),h.push(t)))}var t,n,r,i,o,a,s,l,c,u,d=this,f=d.settings,p=d.getElement(),h=[];if(d.editorManager.add(d),f.aria_label=f.aria_label||E.getAttrib(p,"aria-label",d.getLang("aria.rich_text_area")),f.theme&&("function"!=typeof f.theme?(f.theme=f.theme.replace(/-/,""),o=k.get(f.theme),d.theme=new o(d,k.urls[f.theme]),d.theme.init&&d.theme.init(d,k.urls[f.theme]||d.documentBaseUrl.replace(/\/$/,""))):d.theme=f.theme),R(f.plugins.replace(/\-/g,"").split(/[ ,]/),e),d.fire("BeforeRenderUI"),f.render_ui&&d.theme&&(d.orgDisplay=p.style.display,"function"!=typeof f.theme?(t=f.width||p.style.width||p.offsetWidth,n=f.height||p.style.height||p.offsetHeight,r=f.min_height||100,c=/^[0-9\.]+(|px)$/i,c.test(""+t)&&(t=Math.max(parseInt(t,10)+(o.deltaWidth||0),100)),c.test(""+n)&&(n=Math.max(parseInt(n,10)+(o.deltaHeight||0),r)),o=d.theme.renderUI({targetNode:p,width:t,height:n,deltaWidth:f.delta_width,deltaHeight:f.delta_height}),f.content_editable||(E.setStyles(o.sizeContainer||o.editorContainer,{wi2dth:t,h2eight:n}),n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""),r>n&&(n=r))):(o=f.theme(d,p),o.editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||d.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||d.id+"_iframecontainer"),n=o.iframeHeight||p.offsetHeight),d.editorContainer=o.editorContainer),f.content_css&&R(A(f.content_css),function(e){d.contentCSS.push(d.documentBaseURI.toAbsolute(e))}),f.content_style&&d.contentStyles.push(f.content_style),f.content_editable)return p=i=o=null,d.initContentBody();for(document.domain&&location.hostname!=document.domain&&(d.editorManager.relaxedDomain=document.domain),d.iframeHTML=f.doctype+"<html><head>",f.document_base_url!=d.documentBaseUrl&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),!b.caretAfter&&f.ie7_compat&&(d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',u=0;d.contentCSS.length>u;u++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[u]+'" />';d.contentCSS=[],s=f.body_id||"tinymce",-1!=s.indexOf("=")&&(s=d.getParam("body_id","","hash"),s=s[d.id]||s),l=f.body_class||"",-1!=l.indexOf("=")&&(l=d.getParam("body_class","","hash"),l=l[d.id]||""),d.iframeHTML+='</head><body id="'+s+'" class="mce-content-body '+l+'" '+"onload=\"window.parent.tinymce.get('"+d.id+"').fire('load');\"><br></body></html>",d.editorManager.relaxedDomain&&(P||O&&11>parseFloat(window.opera.version()))&&(a='javascript:(function(){document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+d.id+'");document.write(ed.iframeHTML);'+"document.close();ed.initContentBody();})()"),i=E.add(o.iframeContainer,"iframe",{id:d.id+"_ifr",src:a||'javascript:""',frameBorder:"0",allowTransparency:"true",title:d.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}}),d.contentAreaContainer=o.iframeContainer,o.editorContainer&&(E.get(o.editorContainer).style.display=d.orgDisplay),E.get(d.id).style.display="none",E.setAttrib(d.id,"aria-hidden",!0),d.editorManager.relaxedDomain&&a||d.initContentBody(),p=i=o=null},initContentBody:function(){var t,n,o=this,f=o.settings,p=E.get(o.id),h=o.getDoc();f.inline||(o.getElement().style.visibility=o.orgVisibility),P&&o.editorManager.relaxedDomain||f.content_editable||(h.open(),h.write(o.iframeHTML),h.close(),o.editorManager.relaxedDomain&&(h.domain=o.editorManager.relaxedDomain)),f.content_editable&&(E.addClass(p,"mce-content-body"),p.tabIndex=-1,o.contentDocument=h=f.content_document||document,o.contentWindow=f.content_window||window,o.bodyElement=p,f.content_document=f.content_window=null,f.root_name=p.nodeName.toLowerCase()),t=o.getBody(),t.disabled=!0,f.readonly||(t.contentEditable=o.getParam("content_editable_state",!0)),t.disabled=!1,o.schema=new g(f),o.dom=new e(h,{keep_values:!0,url_converter:o.convertURL,url_converter_scope:o,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:f.content_editable?o.id:null,schema:o.schema,onSetAttrib:function(e){o.fire("SetAttrib",e)}}),o.parser=new v(f,o.schema),o.parser.addAttributeFilter("src,href,style",function(e,t){for(var n,r,i,a=e.length,s=o.dom;a--;)n=e[a],r=n.attr(t),i="data-mce-"+t,n.attributes.map[i]||("style"===t?n.attr(i,s.serializeStyle(s.parseStyle(r),n.name)):n.attr(i,o.convertURL(r,t,n.name)))}),o.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"text/javascript"))}),o.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),o.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=o.schema.getNonEmptyElements();n--;)t=e[n],t.isEmpty(i)&&(t.empty().append(new r("br",1)).shortEnded=!0)}),o.serializer=new i(f,o),o.selection=new a(o.dom,o.getWin(),o.serializer,o),o.formatter=new s(o),o.undoManager=new l(o),o.forceBlocks=new u(o),o.enterKey=new c(o),o.editorCommands=new d(o),o.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(h.body.spellcheck=!1),o.fire("PostRender"),o.quirks=y(o),f.directionality&&(t.dir=f.directionality),f.nowrap&&(t.style.whiteSpace="nowrap"),f.protect&&o.on("BeforeSetContent",function(e){R(f.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),o.on("SetContent",function(){o.addVisual(o.getBody())}),f.padd_empty_editor&&o.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),o.initialized=!0,R(o._pendingNativeEvents,function(e){o.dom.bind(_(o,e),e,function(e){o.fire(e.type,e)})}),o.fire("init"),o.focus(!0),o.nodeChanged({initial:!0}),o.execCallback("init_instance_callback",o),o.contentStyles.length>0&&(n="",R(o.contentStyles,function(e){n+=e+"\r\n"}),o.dom.addStyle(n)),R(o.contentCSS,function(e){o.dom.loadCSS(e)}),f.auto_focus&&setTimeout(function(){var e=o.editorManager.get(f.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),p=h=t=null},focus:function(e){var t,n,r,i,o=this,a=o.selection,s=o.settings.content_editable,l=o.getDoc();e||(n=a.getRng(),n.item&&(r=n.item(0)),o._refreshContentEditable(),s||o.getWin().focus(),(D||s)&&(i=o.getBody(),i.setActive?i.setActive():i.focus(),s&&a.normalize()),r&&r.ownerDocument==l&&(n=l.body.createControlRange(),n.addElement(r),n.select())),o.editorManager.activeEditor!=o&&((t=o.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:o}),o.fire("activate",{relatedTarget:t})),o.editorManager.activeEditor=o},execCallback:function(e){var t,n=this,r=n.settings[e];return r?(n.callbackLookup&&(t=n.callbackLookup[e])&&(r=t.func,t=t.scope),"string"==typeof r&&(t=r.replace(/\.\w+$/,""),t=t?H(t):0,r=H(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:r,scope:t}),r.apply(t||n,Array.prototype.slice.call(arguments,1))):void 0},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r,i=e in this.settings?this.settings[e]:t;return"hash"===n?(r={},"string"==typeof i?R(i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){e=e.split("="),r[L(e[0])]=e.length>1?L(e[1]):L(e)}):r=i,r):i},nodeChanged:function(){var e,n,r,i=this,o=i.selection;i.initialized&&!i.settings.disable_nodechange&&(r=i.getBody(),e=o.getStart()||r,e=P&&e.ownerDocument!=i.getDoc()?i.getBody():e,"IMG"==e.nodeName&&o.isCollapsed()&&(e=e.parentNode),n=[],i.dom.getParent(e,function(e){return e===r?!0:(n.push(e),t)}),i.fire("NodeChange",{element:e,parents:n}))},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,t.icon=t.icon||(t.icon!==!1?e:!1),n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,n,r,i){var o,a=this,s=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||a.focus(),i=T({},i),a.fire("BeforeExecCommand",{command:e,ui:n,value:r}),i.terminate?!1:(o=a.execCommands[e])&&o.func.call(o.scope,n,r)!==!0?(a.fire("ExecCommand",{command:e,ui:n,value:r}),!0):(R(a.plugins,function(i){return i.execCommand&&i.execCommand(e,n,r)?(a.fire("ExecCommand",{command:e,ui:n,value:r}),s=!0,!1):t}),s?s:a.theme&&a.theme.execCommand&&a.theme.execCommand(e,n,r)?(a.fire("ExecCommand",{command:e,ui:n,value:r}),!0):a.editorCommands.execCommand(e,n,r)?(a.fire("ExecCommand",{command:e,ui:n,value:r}),!0):(a.getDoc().execCommand(e,n,r),a.fire("ExecCommand",{command:e,ui:n,value:r}),t))},queryCommandState:function(e){var t,n,r=this;if(!r._isHidden()){if((t=r.queryStateCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(n=r.editorCommands.queryCommandState(e),-1!==n)return n;try{return r.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var n,r,i=this;if(!i._isHidden()){if((n=i.queryValueCommands[e])&&(r=n.func.call(n.scope),r!==!0))return r;if(r=i.editorCommands.queryCommandValue(e),r!==t)return r;try{return i.getDoc().queryCommandValue(e)}catch(o){}}},show:function(){var e=this;E.show(e.getContainer()),E.hide(e.id),e.load(),e.fire("show")},hide:function(){var e=this,t=e.getDoc();P&&t&&t.execCommand("SelectAll"),e.save(),E.hide(e.getContainer()),E.setStyle(e.id,"display",e.orgDisplay),e.fire("hide")},isHidden:function(){return!E.isHidden(this.id)},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,r=this,i=r.getElement();return i?(e=e||{},e.load=!0,n=r.setContent(i.value!==t?i.value:i.innerHTML,e),e.element=i,e.no_events||r.fire("LoadContent",e),e.element=i=null,n):t},save:function(e){var n,r,i=this,o=i.getElement();return o&&i.initialized?(e=e||{},e.save=!0,e.element=o,n=e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),n=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=n:(o.innerHTML=n,(r=E.getParent(i.id,"form"))&&R(r.elements,function(e){return e.name==i.id?(e.value=n,!1):t})),e.element=o=null,n):void 0},setContent:function(e,n){var r,i=this,a=i.getBody();return n=n||{},n.format=n.format||"html",n.set=!0,n.content=e,n.no_events||i.fire("BeforeSetContent",n),e=n.content,P||0!==e.length&&!/^\s+$/.test(e)?("raw"!==n.format&&(e=new o({},i.schema).serialize(i.parser.parse(e,{isRootContent:!0}))),n.content=L(e),i.dom.setHTML(a,n.content),n.no_events||i.fire("SetContent",n),i.settings.content_editable&&document.activeElement!==i.getBody()||i.selection.normalize(),n.content):(r=i.settings.forced_root_block,e=r&&i.schema.isValidChild(a.nodeName.toLowerCase(),r.toLowerCase())?"<"+r+'><br data-mce-bogus="1"></'+r+">":'<br data-mce-bogus="1">',a.innerHTML=e,i.selection.select(a,!0),i.selection.collapse(!0),t)},getContent:function(e){var t,n=this,r=n.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:n.serializer.serialize(r,e),e.content="text"!=e.format?L(t):t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e){this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty&&this.undoManager.hasUndo()},getContainer:function(){var e=this;return e.container||(e.container=E.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return E.get(this.settings.content_element||this.id)},getWin:function(){var e,t=this;return t.contentWindow||(e=E.get(t.id+"_ifr"),e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n,r=this,i=r.settings,o=r.dom;e=e||r.getBody(),r.hasVisual===t&&(r.hasVisual=i.visual),R(o.select("table,a",e),function(e){var a;switch(e.nodeName){case"TABLE":return n=i.visual_table_class||"mce-item-table",a=o.getAttrib(e,"border"),a&&"0"!=a||(r.hasVisual?o.addClass(e,n):o.removeClass(e,n)),t;case"A":return o.getAttrib(e,"href",!1)||(a=o.getAttrib(e,"name")||e.id,n="mce-item-anchor",a&&(r.hasVisual?o.addClass(e,n):o.removeClass(e,n))),t}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){var e=this,t=e.getContainer(),n=e.getDoc();e.removed||(e.removed=1,P&&n&&n.execCommand("SelectAll"),e.save(),E.setStyle(e.id,"display",e.orgDisplay),e.settings.content_editable||(M.unbind(e.getWin()),M.unbind(e.getDoc())),M.unbind(e.getBody()),M.unbind(t),e.fire("remove"),e.editorManager.remove(e),E.remove(t))},bindNative:function(e){var t=this;t.initialized?t.dom.bind(_(t,e),e,function(n){t.fire(e,n)}):t._pendingNativeEvents?t._pendingNativeEvents.push(e):t._pendingNativeEvents=[e]},unbindNative:function(e){var t=this;t.initialized&&t.dom.unbind(e)},destroy:function(e){var t,n=this;n.destroyed||(D&&(M.unbind(n.getDoc()),M.unbind(n.getWin()),M.unbind(n.getBody())),e||(n.editorManager.off(n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null,E.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=null,n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1)},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return D?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},T(N.prototype,x),N}),r(it,[],function(){var e={};return{add:function(t,n){for(var r in n)e[r]=n[r]},translate:function(n){if(n===t)return n;if("string"!=typeof n&&n.raw)return n.raw;if(n.push){var r=n.slice(1);n=(e[n[0]]||n[0]).replace(/\{([^\}]+)\}/g,function(e,t){return r[t]})}return e[n]||n},data:e}}),r(ot,[g],function(e){function t(n){function r(){try{return document.activeElement}catch(e){return document.body}}function i(i){function o(n){return!!e.DOM.getParent(n,t.isEditorUIElement)}var a,s,l=i.editor;l.on("init",function(){"onbeforedeactivate"in document?l.dom.bind(l.getBody(),"beforedeactivate",function(){var e=l.getDoc().selection;s=e&&e.createRange?e.createRange():l.selection.getRng()}):l.inline&&l.on("nodechange",function(){for(var e,t=document.activeElement;t;){if(t==l.getBody()){e=!0;break}t=t.parentNode}e&&(s=l.selection.getRng())})}),l.on("focusin",function(){var e=n.focusedEditor;a&&(l.selection.setRng(a),a=null),e!=l&&(e&&e.fire("blur",{focusedEditor:l}),l.fire("focus",{blurredEditor:e}),l.focus(!1),n.focusedEditor=l)}),l.on("focusout",function(){a=s,window.setTimeout(function(){var e=n.focusedEditor;e!=l&&(a=null),o(r())||e!=l||(l.fire("blur",{focusedEditor:null}),n.focusedEditor=null,a=null)},0)})}n.on("AddEditor",i)}return t.isEditorUIElement=function(e){return-1!==e.className.indexOf("mce-")},t}),r(at,[rt,g,P,m,f,tt,it,ot],function(e,n,r,i,o,a,s,l){var c,u=n.DOM,d=o.explode,f=o.each,p=o.extend,h=0,m={majorVersion:"4",minorVersion:"0b2",releaseDate:"2013-04-24",editors:[],i18n:s,activeEditor:null,setup:function(){var e,t,n,i=this,o="";if(t=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/"),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else for(var a=document.getElementsByTagName("script"),s=0;a.length>s;s++){var c=a[s].src;if(/tinymce(\.jquery|)(\.min|\.dev|).js/.test(c)){-1!=c.indexOf(".min")&&(o=".min"),e=c.substring(0,c.lastIndexOf("/"));break}}i.baseURL=new r(t).toAbsolute(e),i.documentBaseURL=t,i.baseURI=new r(i.baseURL),i.suffix=o,i.focusManager=new l(i)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!u.get(t)?e.name:u.uniqueId(),e.setAttribute("id",t)),t}function r(e,t,n){var r=e[t];return r?r.apply(n||this,Array.prototype.slice.call(arguments,2)):void 0}function i(e,t){return t.constructor===RegExp?t.test(e.className):u.hasClass(e,t)}var o,a=this,s=[];a.settings=t,u.bind(window,"ready",function(){var l,c;switch(r(t,"onpageload"),t.mode){case"exact":l=t.elements||"",l.length>0&&f(d(l),function(n){u.get(n)?(o=new e(n,t,a),s.push(o),o.render(!0)):f(document.forms,function(r){f(r.elements,function(r){r.name===n&&(n="mce_editor_"+h++,u.setAttrib(r,"id",n),o=new e(n,t,a),s.push(o),o.render(1))})})});break;case"textareas":case"specific_textareas":f(u.select("textarea"),function(r){t.editor_deselector&&i(r,t.editor_deselector)||(!t.editor_selector||i(r,t.editor_selector))&&(o=new e(n(r),t,a),s.push(o),o.render(!0))});break;default:t.types?f(t.types,function(r){f(u.select(r.selector),function(i){var o=new e(n(i),p({},t,r),a);s.push(o),o.render(1)})}):t.selector&&f(u.select(t.selector),function(r){var i=new e(n(r),t,a);s.push(i),i.render(1)})}t.oninit&&(l=c=0,f(s,function(e){c++,e.initialized?l++:e.on("init",function(){l++,l==c&&r(t,"oninit")}),l==c&&r(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors[e]},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),c||(c=function(){t.fire("BeforeUnload")},u.bind(window,"beforeunload",c)),e},createEditor:function(t){return this.add(new e(t))},remove:function(e){var t,n=this,r=n.editors;if(!r[e.id])return null;for(delete r[e.id],t=0;r.length>t;t++)if(r[t]==e){r.splice(t,1);break}return n.activeEditor==e&&(n.activeEditor=r[0]),e.destroy(),n.fire("RemoveEditor",{editor:e}),r.length||u.unbind(window,"beforeunload",c),e},execCommand:function(t,n,r){var i=this,o=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||new e(r,i.settings,i).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},triggerSave:function(){f(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)}};return p(m,a),m.setup(),window.tinymce=window.tinyMCE=m,m}),r(st,[at,f],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function i(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){o[e.nodeName.toLowerCase()](s,e)})}var o,a,s,l=t.settings;l.inline_styles&&(a=r(l.font_size_legacy_values),o={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(lt,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(ct,[],function(){function e(t,n){var r,i,o,a;if(n=n||'"',null===t)return"null";if(o=typeof t,"string"==o)return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";t.length>r;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(a in t)t.hasOwnProperty(a)&&(i+="function"!=typeof t[a]?(i.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(ut,[ct,lt,f],function(e,n,r){function i(e){this.settings=o({},e),this.count=0}var o=r.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(r){var i=r.error,a=r.success;r=o(this.settings,r),r.success=function(n,o){n=e.parse(n),n===t&&(n={error:"JSON Parse error."}),n.error?i.call(r.error_scope||r.scope,n.error,o):a.call(r.success_scope||r.scope,n.result)},r.error=function(e,t){i&&i.call(r.error_scope||r.scope,e,t)},r.data=e.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),r.content_type="application/json",n.send(r)}},i}),r(dt,[g],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,o=n.count!==t?n.count:r.count,a="tinymce_jsonp_"+o;r.callbacks[o]=function(e){i.remove(a),delete r.callbacks[o],n.callback(e)},i.add(i.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),r.count++}}}),r(ft,[],function(){function e(){s=[];for(var e in a)s.push(e);i.length=s.length}function n(){function n(e){var n,r;return r=e!==t?c+e:i.indexOf(",",c),-1===r||r>i.length?null:(n=i.substring(c,r),c=r+1,n)}var r,i,s,c=0;a={},o.load(l),i=o.getAttribute(l)||"";do r=n(parseInt(n(),32)||0),null!==r&&(s=n(parseInt(n(),32)||0),a[r]=s);while(null!==r);e()}function r(){var t,n="";for(var r in a)t=a[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;o.setAttribute(l,n),o.save(l),e()}var i,o,a,s,l;return window.localStorage?localStorage:(l="tinymce",o=document.documentElement,o.addBehavior("#default#userData"),i={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,r()},removeItem:function(e){delete a[e],r()},clear:function(){a={},r()}},n(),i)}),r(pt,[g,s,v,y,f,m],function(e,t,n,r,i,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=r.PluginManager,a.ThemeManager=r.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,i.each(i,function(e,t){a[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),r(ht,[O,f],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,r,i=this,o=i.settings;t=e.items().filter(":visible"),n=o.firstControlClass,r=o.lastControlClass,t.each(function(e){e.removeClass(n).removeClass(r),o.controlClass&&e.addClass(o.controlClass)}),t.eq(0).addClass(n),t.eq(-1).addClass(r)},renderHtml:function(e){var t,n=this,r=n.settings,i="";return t=e.items(),t.eq(0).addClass(r.firstControlClass),t.eq(-1).addClass(r.lastControlClass),t.each(function(e){r.controlClass&&e.addClass(r.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),r(mt,[ht],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(gt,[z,K],function(e,n){return e.extend({Mixins:[n],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var n=this;return e!==t?(n._value=e,n._rendered&&(n.getEl().lastChild.innerHTML=n.encode(e)),n):n._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div>"+"</div>"},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),r(vt,[z,gt],function(e,t){var n;return e.extend({init:function(e){var t=this;t._super(e),t.canFocus=!0,e.tooltip&&t.on("mouseenter mouseleave",function(n){n.control==t&&"mouseenter"==n.type?t.tooltip().moveTo(-65535).text(e.tooltip).show().moveRel(t.getEl(),"bc tc"):t.tooltip().moveTo(-65535).hide()}),t.aria("label",e.tooltip)},tooltip:function(){var e=this;return n||(n=new t({type:"tooltip"}),n.renderTo(e.getContainerElm())),n},active:function(e){var t,n=this;return e!==t&&(n.aria("pressed",e),n.toggleClass("active",e)),n._super(e)},disabled:function(e){var t,n=this;return e!==t&&(n.aria("disabled",e),n.toggleClass("disabled",e)),n._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&setTimeout(function(){e.focus()},0)},remove:function(){this._super(),n&&(n.remove(),n=null)}})}),r(yt,[vt],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",function(e){e.preventDefault()}),n._super(e),t=e.size,e.subtype&&n.addClass(e.subtype),t&&n.addClass("btn-"+t)},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i="";
return e.settings.image&&(r="none",i=" style=\"background-image: url('"+e.settings.image+"')\""),r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button role="presentation" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),r(bt,[U],function(e){return e.extend({Defaults:{defaultType:"button",role:"toolbar"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Ct,[vt],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var n=this;return e!==t?(e?n.addClass("checked"):n.removeClass("checked"),n._checked=e,n.aria("checked",e),n):n._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labeledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span>"+"</div>"}})}),r(xt,[U],function(e){return e.extend({})}),r(wt,[yt,Y],function(e,t){var n=e.extend({showPanel:function(){var e=this,n=e.settings;n.panel.popover=!0,n.panel.autohide=!0,e.active(!0),e.panel?e.panel.show():e.panel=new t(n.panel).on("hide",function(){e.active(!1)}).parent(e).renderTo(e.getContainerElm()).reflow().moveRel(e.getEl(),n.popoverAlign||"bc-tc")},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&e.showPanel()}),e._super()}});return n}),r(_t,[wt],function(e){return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},showPreview:function(e){this.getEl("preview").style.backgroundColor=e},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button role="presentation" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),r(Nt,[vt,W],function(e,n){return e.extend({init:function(e){var r=this;r._super(e),r.addClass("combobox"),r.on("click",function(e){for(var t=e.target;t;)t.id&&-1!=t.id.indexOf("-open")&&r.fire("action"),t=t.parentNode}),r.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&r.parents().reverse().each(function(n){return e.preventDefault(),r.fire("change"),n.submit?(n.submit(),!1):t})}),e.placeholder&&(r.addClass("placeholder"),r.on("focusin",function(){r._hasOnChange||(n.on(r.getEl("inp"),"change",function(){r.fire("change")}),r._hasOnChange=!0),r.hasClass("placeholder")&&(r.getEl("inp").value="",r.removeClass("placeholder"))}),r.on("focusout",function(){0===r.value().length&&(r.getEl("inp").value=e.placeholder,r.addClass("placeholder"))}))},value:function(e){var n=this;return e!==t?(n._value=e,n.removeClass("placeholder"),n._rendered&&(n.getEl("inp").value=e),n):n._rendered?(e=n.getEl("inp").value,e!=n.settings.placeholder?e:""):n._value},repaint:function(){var e=this,t=e.getEl(),r=e.getEl("open"),i=e.layoutRect();return r?n.css(t.firstChild,{width:i.w-r.offsetWidth-10}):n.css(t.firstChild,{width:i.w-10}),e._super(),e},disabled:function(e){var t=this;t._super(e),t._rendered&&(t.getEl().disabled=e)},focus:function(){this.getEl("inp").focus()},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},renderHtml:function(){var e,t,n=this,r=n._id,i=n.settings,o=n.classPrefix,a=i.value||i.placeholder||"",s="";return e=i.icon?o+"ico "+o+"i-"+i.icon:"",t=n._text,(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1">'+'<button id="'+r+'-action" hidefocus tabindex="-1">'+(e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button>"+"</div>",n.addClass("has-open")),'<div id="'+r+'" class="'+n.classes()+'">'+'<input id="'+r+'-inp" class="'+o+"textbox "+o+'placeholder" value="'+a+'" hidefocus="true">'+s+"</div>"}})}),r(Et,[z,X],function(e,n){return e.extend({Defaults:{delimiter:"»"},init:function(e){var t=this;t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.keyNav=new n({root:e,enableLeftRight:!0}),e.keyNav.focusFirst(),e},data:function(e){var n=this;return e!==t?(n._data=e,n.update(),n):n._data},update:function(){this.getEl().innerHTML=this._getPathHtml()},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classPrefix+'path">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,r=n._data||[],i="",o=n.classPrefix;for(e=0,t=r.length;t>e;e++)i+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e==t-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'">'+r[e].name+"</div>";return i||(i='<div class="'+o+'path-item">&nbsp;</div>'),i}})}),r(kt,[Et,at],function(e,t){return e.extend({postRender:function(){function e(e){return 1===e.nodeType&&("BR"==e.nodeName||!!e.getAttribute("data-mce-bogus"))}var n=this,r=t.activeEditor;return n.on("select",function(t){for(var n=[],i=r.selection.getNode(),o=r.getBody();i&&(e(i)||n.push(i),i=i.parentNode,i!=o););r.focus(),r.selection.select(n[n.length-1-t.index]),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],o=t.parents,a=o.length;a--;)if(!e(o[a])){var s=r.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});i.push({name:s.name})}n.data(i)}),n._super()}})}),r(St,[U],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Tt,[U,St],function(e,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10},preRender:function(){var e=this,r=e.items();r.each(function(r){var i,o=r.settings.label;o&&(i=new n({layout:"flex",autoResize:"overflow",defaults:{flex:1},items:[{type:"label",text:o,flex:0,forId:r._id}]}),i.type="formitem",r.settings.flex===t&&(r.settings.flex=1),e.replace(r,i),i.add(r))})},recalcLabels:function(){var e,t,n=this,r=0,i=[];if(n.settings.labelGapCalc!==!1)for(n.items().filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),t=n.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+t},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},fromJSON:function(e){var t=this;if(e)for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,n={};return e.find("*").each(function(e){var r=e.name(),i=e.value();r&&i!==t&&(n[r]=i)}),n},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(Rt,[Tt],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}})}),r(At,[Nt],function(e){return e.extend({init:function(e){var t,n=this,r=tinymce.activeEditor;e.spellcheck=!1,t=r.settings.file_browser_callback,t&&(e.icon="browse",e.onaction=function(){t(n.getEl("inp").id,n.getEl("inp").value,e.filetype,window)}),n._super(e)}})}),r(Bt,[mt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(Lt,[mt],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,C,x,w,_,N,E,k,S,T,R,A,B,L,H,M,D,P,O,I,F,W,z=[],V=Math.max,U=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e._paddingBox,a=e.settings,f=a.direction,s=a.align,l=a.pack,c=a.spacing||0,("row-reversed"==f||"column-reverse"==f)&&(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"==f?(E="y",_="h",N="minH",k="maxH",T="innerH",S="top",R="bottom",A="deltaH",B="contentH",O="left",M="w",L="x",H="innerW",D="minW",P="maxW",I="right",F="deltaW",W="contentW"):(E="x",_="w",N="minW",k="maxW",T="innerW",S="left",R="right",A="deltaW",B="contentW",O="top",M="h",L="y",H="innerH",D="minH",P="maxH",I="bottom",F="deltaH",W="contentH"),d=i[T]-o[S]-o[S],w=u=0,t=0,n=r.length;n>t;t++)p=r[t],h=p.layoutRect(),m=p.settings,g=m.flex,d-=n-1>t?c:0,g>0&&(u+=g,h[k]&&z.push(p),h.flex=g),d-=h[N],v=o[O]+h[D]+o[I],v>w&&(w=v);if(C={},C[N]=0>d?i[N]-d+i[A]:i[T]-d+i[A],C[D]=w+i[F],C[B]=i[T]-d,C[W]=w,C.minW=U(C.minW,i.maxW),C.minH=U(C.minH,i.maxH),C.minW=V(C.minW,i.startMinWidth),C.minH=V(C.minH,i.startMinHeight),!i.autoResize||C.minW==i.minW&&C.minH==i.minH){for(b=d/u,t=0,n=z.length;n>t;t++)p=z[t],h=p.layoutRect(),y=h[k],v=h[N]+Math.ceil(h.flex*b),v>y?(d-=h[k]-h[N],u-=h.flex,h.flex=0,h.maxFlexSize=y):h.maxFlexSize=0;for(b=d/u,x=o[S],C={},0===u&&("end"==l?x=d+o[S]:"center"==l?(x=Math.round(i[T]/2-(i[T]-d)/2)+o[S],0>x&&(x=o[S])):"justify"==l&&(x=o[S],c=Math.floor(d/(r.length-1)))),C[L]=o[O],t=0,n=r.length;n>t;t++)p=r[t],h=p.layoutRect(),v=h.maxFlexSize||h[N],"center"===s?C[L]=Math.round(i[H]/2-h[M]/2):"stretch"===s?(C[M]=V(h[D]||0,i[H]-o[O]-o[I]),C[L]=o[O]):"end"===s&&(C[L]=i[H]-h[M]-o.top),h.flex>0&&(v+=Math.ceil(h.flex*b)),C[_]=v,C[E]=x,p.layoutRect(C),p.recalc&&p.recalc(),x+=v+c}else if(C.w=C.minW,C.h=C.minH,e.layoutRect(C),this.recalc(e),null===e._lastRect){var q=e.parent();q&&(q._lastRect=null,q.recalc())}}})}),r(Ht,[ht],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(Mt,[V,z,Y,f,at],function(e,n,r,i,o){function a(e){function n(e){return e.replace(/%(\w+)/g,"")}var r,i,a,s,c=o.activeEditor,u=c.dom,d="";return s=c.settings.preview_styles,s===!1?"":(s||(s="font-family font-size font-weight text-decoration text-transform color background-color border border-radius"),(e=c.formatter.get(e))?(e=e[0],r=e.block||e.inline||"span",i=u.create(r),l(e.styles,function(e,t){e=n(e),e&&u.setStyle(i,t,e)}),l(e.attributes,function(e,t){e=n(e),e&&u.setAttrib(i,t,e)}),l(e.classes,function(e){e=n(e),u.hasClass(i,e)||u.addClass(i,e)}),c.fire("PreviewFormats"),u.setStyles(i,{position:"absolute",left:-65535}),c.getBody().appendChild(i),a=u.getStyle(c.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,l(s.split(" "),function(e){var t=u.getStyle(i,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=u.getStyle(c.getBody(),e,!0),"#ffffff"==u.toHex(t).toLowerCase())||"color"==e&&"#000000"==u.toHex(t).toLowerCase())){if("font-size"==e&&/em|%$/.test(t)){if(0===a)return;t=parseFloat(t,10)/(/%$/.test(t)?100:1),t=t*a+"px"}"border"==e&&t&&(d+="padding:0 2px;"),d+=e+":"+t+";"}}),c.fire("AfterPreviewFormats"),u.remove(i),d):t)}function s(e){e=e.split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var l=i.each;n.translate=function(e){return o.translate(e)},o.on("AddEditor",function(t){function n(){function e(r){var i=[];return r?(l(r,function(r){var o={text:{raw:r.title},icon:r.icon};if(r.items)o.menu=e(r.items);else{var s=r.format||"custom"+t++;r.format||(r.name=s,n.push(r)),o.textStyle=function(){return a(s)},o.onclick=function(){h(s)}}i.push(o)}),i):void 0}var t=0,n=[],r=[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];g.on("init",function(){l(n,function(e){g.formatter.register(e.name,e)})});var i=e(g.settings.style_formats||r);return i}function c(){return g.undoManager?g.undoManager.hasUndo():!1}function u(){return g.undoManager?g.undoManager.hasRedo():!1}function d(){var e=this;e.disabled(!c()),g.on("Undo Redo AddUndo",function(){e.disabled(!c())})}function f(){var e=this;e.disabled(!u()),g.on("Undo Redo AddUndo",function(){e.disabled(!u())})}function p(){var e=this;g.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(g.hasVisual)}function h(e){e.control&&(e=e.control.settings.format),e&&o.activeEditor.execCommand("mceToggleFormat",!1,e)}var m,g=t.editor;m=n(),l({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){g.addButton(t,{tooltip:e,onPostRender:function(){var e=this;g.formatter?g.formatter.formatChanged(t,function(t){e.active(t)}):g.on("init",function(){g.formatter.formatChanged(t,function(t){e.active(t)})})},onclick:function(){h(t)}})}),l({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(e,t){g.addButton(t,{tooltip:e[0],cmd:e[1]})}),l({blockquote:["Toggle blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bulleted list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(e,t){g.addButton(t,{tooltip:e[0],cmd:e[1],onPostRender:function(){var e=this;g.formatter?g.formatter.formatChanged(t,function(t){e.active(t)}):g.on("init",function(){g.formatter.formatChanged(t,function(t){e.active(t)})})}})}),g.addButton("undo",{tooltip:"Undo",onPostRender:d,cmd:"undo"}),g.addButton("redo",{tooltip:"Redo",onPostRender:f,cmd:"redo"}),g.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),g.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:d,cmd:"undo"}),g.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:f,cmd:"redo"}),g.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:p,cmd:"mceToggleVisualAid"}),l({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(e,t){g.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),g.on("mousedown",function(){r.hideAll()}),e.add("styleselect",function(t){var n=[].concat(m);return e.create("menubutton",i.extend({text:"Formats",menu:n},t))}),e.add("formatselect",function(t){var n=[],r=s("Paragraph=p;Address=address;Pre=pre;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6");return l(r,function(e){n.push({text:{raw:e[0]},format:e[1],textStyle:function(){return a(e[1])}})}),e.create("listbox",i.extend({text:{raw:r[0][0]},menu:n,onclick:h},t))}),e.add("fontselect",function(t){var n=[],r=s("Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return l(r,function(e){n.push({text:{raw:e[0]},format:e[1],style:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),e.create("listbox",i.extend({text:"Font Family",menu:n,onclick:function(e){e.control.settings.format&&o.activeEditor.execCommand("FontName",!1,e.control.settings.format)}},t))}),e.add("fontsizeselect",function(t){var n=[];return l("8pt 10pt 12pt 14pt 18pt 24pt 36pt".split(" "),function(e){n.push({text:e,format:e})}),e.create("listbox",i.extend({text:"Font Sizes",menu:n,onclick:function(e){e.control.settings.format&&o.activeEditor.execCommand("FontSize",!1,e.control.settings.format)}},t))}),g.addMenuItem("formats",{text:"Formats",menu:m})})}),r(Dt,[mt],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,p,h,m,g,v,y,b,C,x,w,_,N,E,k,S,T,R=e.settings,A=[],B=[];for(R=e.settings,r=e.items().filter(":visible"),i=e.layoutRect(),n=R.columns||Math.ceil(Math.sqrt(r.length)),t=Math.ceil(r.length/n),v=R.spacingH||R.spacing||0,y=R.spacingV||R.spacing||0,b=R.alignH||R.align,C=R.alignV||R.align,m=e._paddingBox,u=0;n>u;u++)A.push(0);for(d=0;t>d;d++)B.push(0);for(d=0;t>d;d++)for(u=0;n>u&&(c=r[d*n+u]);u++)l=c.layoutRect(),_=l.minW,N=l.minH,A[u]=_>A[u]?_:A[u],B[d]=N>B[d]?N:B[d];for(S=i.innerW-m.left-m.right,x=0,u=0;n>u;u++)x+=A[u]+(u>0?v:0),S-=(u>0?v:0)+A[u];for(T=i.innerH-m.top-m.bottom,w=0,d=0;t>d;d++)w+=B[d]+(d>0?y:0),T-=(d>0?y:0)+B[d];if(x+=m.left+m.right,w+=m.top+m.bottom,s={},s.minW=x+(i.w-i.innerW),s.minH=w+(i.h-i.innerH),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH,s.minW=Math.min(s.minW,i.maxW),s.minH=Math.min(s.minH,i.maxH),s.minW=Math.max(s.minW,i.startMinWidth),s.minH=Math.max(s.minH,i.startMinHeight),!i.autoResize||s.minW==i.minW&&s.minH==i.minH){i.autoResize&&(s=e.layoutRect(s),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH);var L;L="start"==R.packV?0:T>0?Math.floor(T/t):0;var H=0,M=R.flexWidths;if(M)for(u=0;M.length>u;u++)H+=M[u];else H=n;var D=S/H;for(u=0;n>u;u++)A[u]+=M?Math.ceil(M[u]*D):D;for(p=m.top,d=0;t>d;d++){for(f=m.left,a=B[d]+L,u=0;n>u&&(c=r[d*n+u]);u++)h=c.settings,l=c.layoutRect(),o=A[u],E=k=0,l.x=f,l.y=p,g=h.alignH||b,"center"==g?l.x=f+o/2-l.w/2:"right"==g?l.x=f+o-l.w:"stretch"==g&&(l.w=o),g=h.alignV||C,"center"==g?l.y=p+a/2-l.h/2:"bottom"==g?l.y=p+a-l.h:"stretch"==g&&(l.h=a),c.layoutRect(l),f+=o+v,c.recalc&&c.recalc();p+=a+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var P=e.parent();P&&(P._lastRect=null,P.recalc())}}})}),r(Pt,[vt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e){return this.getEl().contentWindow.document.body.innerHTML=e,this}})}),r(Ot,[vt],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(e.getEl().offsetWidth>t.maxW&&(t.minW=t.maxW,e.addClass("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,e.getEl().offsetHeight)),t},disabled:function(e){var t,n=this;return e!==t&&(n.toggleClass("label-disabled",e),n._rendered&&(n.getEl()[0].className=n.classes())),n._super(e)},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&(t.getEl().innerHTML=t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t:"")+'">'+e.encode(e._text)+"</label>"}})}),r(It,[U,X],function(e,t){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e.keyNav=new t({root:e,enableLeftRight:!0}),e._super()}})}),r(Ft,[It],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",defaults:{type:"menubutton"}}})}),r(Wt,[yt,V,Ft],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,n=this,r=n.settings;n.menu||(e=r.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type)}).fire("show"),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),"bl-tl")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1))},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button id="'+t+'-open" role="presentation" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+(e._text?(i?" ":"")+e.encode(e._text):"")+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.keyboard&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof i&&r.parent()==o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&r.showMenu())}),e._super()},text:function(e){var t,n,r=this;if(r._rendered)for(n=r.getEl("open").childNodes,t=0;n.length>t;t++)3==n[t].nodeType&&(n[t].data=r.encode(e));return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(zt,[Wt],function(e){return e.extend({init:function(e){var t,n,r,i,o,a=this;if(a._values=t=e.values,t){for(n=0;t.length>n;n++)r=t[n].selected||e.value===t[n].value,r&&(i=i||t[n].text,a._value=t[n].value);e.menu=t}e.text=e.text||i||t[0].text,a._super(e),a.addClass("listbox"),a.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):a.value(t.control.settings.value),o=n})},value:function(e){function n(e,t){e.items().each(function(e){r=e.value()===t,r&&(i=i||e.text()),e.active(r),e.menu&&n(e.menu,t)})}var r,i,o,a,s=this;if(e!==t){if(s.menu)n(s.menu,e);else for(o=s.settings.menu,a=0;o.length>a;a++)r=o[a].value==e,r&&(i=i||o[a].text),o[a].active=r;s.text(i)}return s._super(e)}})}),r(Vt,[vt,V],function(e,t){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t.canFocus=!1,t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.aria("checked",!0),t.addClass("menu-item-checkbox"),e.icon="selected"),t.on("mousedown",function(e){e.preventDefault()}),t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.keyboard&&setTimeout(function(){t.menu.items()[0].focus()},0)):(t.parent().hideAll(),t.fire("cancel"),t.fire("select")))}),e.menu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,r=n.settings;n.parent().items().each(function(e){e!==n&&e.hideMenu()}),r.menu&&(n.menu?n.menu.show():(e=r.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.menu.reflow(),n.menu.fire("show"),n.menu.on("cancel",function(){n.focus()}),n.menu.on("hide",function(e){e.control===n.menu&&n.removeClass("selected")})),n.menu._parentMenu=n.parent(),n.menu.addClass("menu-sub"),n.menu.moveRel(n.getEl(),"tr-tl"),n.addClass("selected"),n.aria("expanded",!0))},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.encode(e._text),o=e.settings.icon;return o&&e.parent().addClass("menu-has-icons"),o=r+"ico "+r+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==i?'<i class="'+o+'"></i>&nbsp;':"")+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(n.shortcut?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+n.shortcut+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n()),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(Ut,[Y,X,Vt],function(e,n,r){var i=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"menu"},init:function(e){var t=this;e.autohide=!0,t._super(e),t.addClass("menu"),t.keyNav=new n({root:t,enableUpDown:!0,enableLeftRight:!0,leftAction:function(){t.parent()instanceof r&&t.keyNav.cancel()},onCancel:function(){t.fire("cancel",{},!1),t.hide()}})},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("cancel"),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(n){var r=n.settings;return r.icon||r.selectable?(e._hasIcons=!0,!1):t}),e._super()}});return i}),r(qt,[vt],function(e){return e.extend({Defaults:{classes:"radio",checked:!1},init:function(e){var t=this;t._super(e),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked()||(t.parent().items().filter("radio:checked").exec("checked",!1),t.checked(!0))}),t.checked(e.checked)},checked:function(e){var n=this;return e!==t?(e?n.addClass("checked"):n.removeClass("checked"),n._checked=e,n):n._checked},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" role="radio" unselectable="on">'+'<i class="'+n+"ico "+n+'radio"></i>'+e._text+"</div>"}})}),r($t,[U],function(e){return e.extend({})}),r(jt,[vt,q,W],function(e,t,n){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),e.settings.both&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){function e(e){return{width:e.clientWidth,height:e.clientHeight}}function r(t,r){var i,s,l,c,u=a.settings;i=a.getContainer(),s=a.getContentAreaContainer().firstChild,l=e(i),c=e(s),t=Math.max(u.min_width||100,t),r=Math.max(u.min_height||100,r),t=Math.min(u.max_width||65535,t),r=Math.min(u.max_height||65535,r),o.settings.both&&n.css(i,"width",t+(l.width-c.width)),n.css(i,"height",r+(l.height-c.height)),o.settings.both&&n.css(s,"width",t),n.css(s,"height",r),a.fire("ResizeEditor")}var i,o=this,a=o.settings.editor;o._super(),o.resizeDragHelper=new t(this._id,{start:function(){i=e(a.getContentAreaContainer().firstChild)},drag:function(e){r(i.width+e.deltaX,i.height+e.deltaY)},end:function(){}})}})}),r(Kt,[vt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r(Gt,[Wt,g],function(e,t){var n=t.DOM;return e.extend({Defaults:{classes:"widget btn splitbtn",role:"splitbutton"},repaint:function(){var e,t,r,i=this,o=i.getEl(),a=i.layoutRect();return i._super(),e=o.firstChild,t=o.lastChild,n.css(e,{width:a.w-t.offsetWidth,height:a.h-2}),n.css(t,{height:a.h-2}),r=e.firstChild.style,r.width=r.height="100%",r=t.firstChild.style,r.width=r.height="100%",i},activeMenu:function(e){var t=this;n.toggleClass(t.getEl().lastChild,t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'">'+'<button hidefocus tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button class="'+n+'open" hidefocus tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){e.control!=this||n.getParent(e.target,"."+this.classPrefix+"open")||(e.stopImmediatePropagation(),t.call(this,e))}),delete e.settings.onclick,e._super()}})}),r(Yt,[Ht],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(Xt,[j,W],function(e,t){"use stict";return e.extend({lastIdx:0,Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){this.activeTabId&&t.removeClass(this.getEl(this.activeTabId),this.classPrefix+"active"),this.activeTabId="t"+e,t.addClass(this.getEl("t"+e),this.classPrefix+"active"),e!=this.lastIdx&&(this.items()[this.lastIdx].hide(),this.lastIdx=e),this.items()[e].show().fire("showtab"),this.reflow()},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){n+='<div id="'+e._id+"-t"+i+'" class="'+r+'tab" unselectable="on">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+'<div id="'+e._id+'-head" class="'+r+'tabs">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,n,r=this;t=n=0,r.items().each(function(e,i){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH),r.settings.activeTab!=i&&e.hide()}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var i=r.getEl("head").offsetHeight;return r.settings.minWidth=t,r.settings.minHeight=n+i,e=r._super(),e.deltaH+=r.getEl("head").offsetHeight,e.innerH=e.h-e.deltaH,e
}})}),r(Jt,[vt,W],function(e,n){return e.extend({init:function(e){var n=this;n._super(e),n._value=e.value||"",n.addClass("textbox"),e.multiline?n.addClass("multiline"):n.on("keydown",function(e){13==e.keyCode&&n.parents().reverse().each(function(n){return e.preventDefault(),n.submit?(n.submit(),!1):t})})},value:function(e){var n=this;return e!==t?(n._value=e,n._rendered&&(n.getEl().value=e),n):n._rendered?n.getEl().value:n._value},repaint:function(){var e,t,n,r,i=this,o=0,a=0;return e=i.getEl().style,t=i._layoutRect,r=i._lastRepaintRect||{},n=i._borderBox,o=n.left+n.right+8,a=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-o+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-a+"px",r.h=t.h),i._lastRepaintRect=r,i.fire("repaint",{},!1),i},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="true"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="true"'+i+">"},postRender:function(){var e=this;return n.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()}})}),r(Qt,[W],function(e){return function(t){var n,r=this;r.show=function(i){return r.hide(),n=!0,window.setTimeout(function(){n&&t.appendChild(e.createFragment('<div class="mce-throbber"></div>'))},i||0),r},r.hide=function(){var e=t.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,r}}}),o([s,l,c,u,d,f,p,h,m,g,v,y,b,C,x,w,_,N,E,k,S,T,R,A,B,L,H,M,D,P,O,I,F,W,z,V,U,q,$,j,K,G,Y,X,J,Q,Z,et,tt,nt,rt,it,ot,at,st,lt,ct,ut,dt,ft,pt,ht,mt,gt,vt,yt,bt,Ct,xt,wt,_t,Nt,Et,kt,St,Tt,Rt,At,Bt,Lt,Ht,Mt,Dt,Pt,Ot,It,Ft,Wt,zt,Vt,Ut,qt,$t,jt,Kt,Gt,Yt,Xt,Jt,Qt])}(this);